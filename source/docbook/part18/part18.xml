<?xml version="1.0" encoding="utf-8" standalone="no"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xl="http://www.w3.org/1999/xlink" label="PS3.18" version="5.0" xml:id="PS3.18">
  <title>PS3.18</title>
  <subtitle>DICOM PS3.18 2015c - Web Services</subtitle>
  <info>
    <author>
      <orgname>DICOM Standards Committee</orgname>
    </author>
    <copyright>
      <year>2015</year>
      <holder>NEMA</holder>
    </copyright>
  </info>
  <chapter label="" status="1" xml:id="chapter_Notice">
    <title>Notice and Disclaimer</title>
    <para xml:id="para_e1324aff-4303-4531-ab19-c1f008cb6ae7">The information in this publication was considered technically sound by the consensus of
      persons engaged in the development and approval of the document at the time it was developed.
      Consensus does not necessarily mean that there is unanimous agreement among every person
      participating in the development of this document.</para>
    <para xml:id="para_4604edbd-6755-47ec-8975-5c269f443f34">NEMA standards and guideline publications, of which the document contained herein is one,
      are developed through a voluntary consensus standards development process. This process brings
      together volunteers and/or seeks out the views of persons who have an interest in the topic
      covered by this publication. While NEMA administers the process and establishes rules to
      promote fairness in the development of consensus, it does not write the document and it does
      not independently test, evaluate, or verify the accuracy or completeness of any information or
      the soundness of any judgments contained in its standards and guideline publications.</para>
    <para xml:id="para_2b61da8b-5927-4154-b862-3028be6f3cac">NEMA disclaims liability for any personal injury, property, or other damages of any nature
      whatsoever, whether special, indirect, consequential, or compensatory, directly or indirectly
      resulting from the publication, use of, application, or reliance on this document. NEMA
      disclaims and makes no guaranty or warranty, expressed or implied, as to the accuracy or
      completeness of any information published herein, and disclaims and makes no warranty that the
      information in this document will fulfill any of your particular purposes or needs. NEMA does
      not undertake to guarantee the performance of any individual manufacturer or seller's products
      or services by virtue of this standard or guide.</para>
    <para xml:id="para_bf1b65d6-4015-44a9-9314-ed76b4b73886">In publishing and making this document available, NEMA is not undertaking to render
      professional or other services for or on behalf of any person or entity, nor is NEMA
      undertaking to perform any duty owed by any person or entity to someone else. Anyone using
      this document should rely on his or her own independent judgment or, as appropriate, seek the
      advice of a competent professional in determining the exercise of reasonable care in any given
      circumstances. Information and other standards on the topic covered by this publication may be
      available from other sources, which the user may wish to consult for additional views or
      information not covered by this publication.</para>
    <para xml:id="para_1cc97bc9-29ee-4e90-b25a-9f2935cf72fe">NEMA has no power, nor does it undertake to police or enforce compliance with the contents
      of this document. NEMA does not certify, test, or inspect products, designs, or installations
      for safety or health purposes. Any certification or other statement of compliance with any
      health or safety-related information in this document shall not be attributable to NEMA and is
      solely the responsibility of the certifier or maker of the statement.</para>
  </chapter>
  <chapter label="" status="1" xml:id="chapter_Foreword">
    <title>Foreword</title>
    <para xml:id="para_c321918f-5f16-42f7-8fbb-f9de51e87c39">This DICOM Standard was developed according to the procedures of the DICOM Standards Committee.</para>
    <para xml:id="para_864d808c-2320-4d75-92f1-3e85f1fe7e69">The DICOM Standard is structured as a multi-part document using the guidelines established in <xref linkend="biblio_ISODirectives3"/>.</para>
    <para xml:id="para_f6543a39-57f7-42e4-b3ad-f5556fc85386">
<olink targetdoc="PS3.1" targetptr="PS3.1" xrefstyle="select: labelnumber"/> should be used as the base reference for the current parts of this standard.</para>
  </chapter>
  <chapter label="1" status="1" xml:id="chapter_1">
    <title>Scope</title>
    <para xml:id="para_13c3b33e-9bc4-46ee-9a40-1e8232a2889f">This standard specifies a web-based service for accessing and presenting DICOM (Digital Imaging and Communications in Medicine) persistent objects (e.g., images, medical imaging reports). This is intended for distribution of results and images to healthcare professionals. It provides a simple mechanism for accessing a DICOM persistent object, through HTTP/HTTPS protocol, using DICOM UIDs (Unique Identifiers). Data may be retrieved either in a presentation-ready form as specified by the requester (e.g., JPEG or GIF) or in a native DICOM format. It does not support facilities for web searching of DICOM images. This standard relates only to DICOM persistent objects (not to other DICOM objects or to non-DICOM objects). Access control beyond the security mechanisms generally available to web applications is outside the scope of this standard.</para>
  </chapter>
  <chapter label="2" status="1" xml:id="chapter_2">
    <title>Conformance</title>
    <para xml:id="para_1e9bf43f-c83f-49ae-b3e8-41c80e6059c8">Systems claiming conformance to this standard shall function in accordance with all its mandatory sections.</para>
  </chapter>
  <chapter label="3" status="1" xml:id="chapter_3">
    <title>Normative References</title>
    <para xml:id="para_52e5cf66-d457-46cf-b316-f79791f736fd">The following normative documents contain provisions that, through reference in this text, constitute provisions of this part of DICOM. For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. However, parties to agreements based on this part of DICOM are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below. For undated references, the latest edition of the normative document referred to applies. Members of ISO and IEC maintain registers of currently valid International Standards.</para>
    <bibliography>
      <biblioentry xml:id="biblio_ISODirectives3">
        <abbrev>ISO/IEC Directives, Part 3</abbrev>
        <author>
          <orgname>ISO/IEC</orgname>
        </author>
        <date>1989</date>
        <title>Drafting and presentation of International Standards</title>
      </biblioentry>
    </bibliography>
    <para xml:id="para_b3782972-c326-484b-a331-cf24845db298">ebRS ebXML Registry Service</para>
    <para xml:id="para_04c30c3a-41c0-447e-8e08-7660bdd5cb5d">HL7 CDA Health Level Seven, Clinical Document Architecture (CDA)</para>
    <para xml:id="para_c134d6e0-984c-4573-b09b-fda019f72eae">IETF RFC 822 Standard for ARPA Internet Text Messages <link xl:href="http://tools.ietf.org/html/rfc822"/>
</para>
    <para xml:id="para_aa7a5139-6723-4fec-9cfe-6bda6319f3d2">IETF RFC 2045 and followings MIME Multipurpose Internet Mail Extension <link xl:href="http://tools.ietf.org/html/rfc2045"/>
</para>
    <para xml:id="para_6a32d125-86d0-49ee-abb8-c8d1d5e5fba5">IETF RFC 3240 Application/dicom MIME Sub-type Registration <link xl:href="http://tools.ietf.org/html/rfc3240"/>
</para>
    <para xml:id="para_a907bba8-0cb6-4eab-a86d-7f01cffd4397">IETF RFC 3986 Uniform Resource Identifiers (URI): Generic Syntax <link xl:href="http://tools.ietf.org/html/rfc3986"/>
</para>
    <para xml:id="para_33d7c58f-7454-4303-aedd-46d2e9364563">IETF RFC 4627 The application/json Media Type for JavaScript Object Notation (JSON) <link xl:href="http://tools.ietf.org/html/rfc4627"/>
</para>
    <para xml:id="para_edd8936e-d6da-4d22-a3a1-085ba40aec2e">IETF RFC 6455 The WebSocket Protocol <link xl:href="http://tools.ietf.org/html/rfc6455"/>
</para>
    <para xml:id="para_98cc5eaa-ae6c-4c3c-96b8-050fcaee223a">IETF RFC 6570 URI Template <link xl:href="http://tools.ietf.org/html/rfc6570"/>
</para>
    <para xml:id="para_ae970842-4d99-4daf-9351-1ed61be0008f">IETF RFC 7230 Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing <link xl:href="http://tools.ietf.org/html/rfc7230"/>
</para>
    <para xml:id="para_4019b845-8116-4802-ace2-b67dcf03eee9">IETF RFC 7231 Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content <link xl:href="http://tools.ietf.org/html/rfc7231"/>
</para>
    <para xml:id="para_7201c9ed-84b9-48e6-bce4-5d7a5dc14b48">IETF RFC 7232 Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests <link xl:href="http://tools.ietf.org/html/rfc7232"/>
</para>
    <para xml:id="para_8dcca663-c2cd-48e8-b8e2-373043ee2707">IETF RFC 7233 Hypertext Transfer Protocol (HTTP/1.1): Range Requests <link xl:href="http://tools.ietf.org/html/rfc7233"/>
</para>
    <para xml:id="para_8b5cc264-ac28-4eb3-a79a-7a143b34c5fb">IETF RFC 7234 Hypertext Transfer Protocol (HTTP/1.1): Caching <link xl:href="http://tools.ietf.org/html/rfc7234"/>
</para>
    <para xml:id="para_99618e5d-66ea-4ae1-85b8-8ebc38ae61e4">IETF RFC 7235 Hypertext Transfer Protocol (HTTP/1.1): Authentication <link xl:href="http://tools.ietf.org/html/rfc7235"/>
</para>
    <para xml:id="para_c9781c40-f8b1-491f-ad2a-6ea1da281c80">IETF RFC 7236 Initial Hypertext Transfer Protocol (HTTP) Authentication Scheme Registrations <link xl:href="http://tools.ietf.org/html/rfc7236"/>
</para>
    <para xml:id="para_1fcda2a9-f93f-4347-a2e5-b846cdd75324">IETF RFC 7237 Initial Hypertext Transfer Protocol (HTTP) Method Registrations <link xl:href="http://tools.ietf.org/html/rfc7237"/>
</para>
    <para xml:id="para_48f0ffb2-280f-43ea-8894-a6648f231721">ISO/IEC 10918 JPEG Standard for digital compression and encoding of continuous-tone still images</para>
    <para xml:id="para_bfc47845-637d-4d00-9980-295a52fbf44e">IHE ITI TF-2x: Appendix V IHE IT Infrastructure Technical Framework, Volume 2x, Appendix V (Web Services for IHE Transactions)</para>
    <para xml:id="para_9db58e27-625e-4abb-9996-c4bcaaa566f3">SUBM-wadl-20090831 Web Application Description Language (WADL), W3C Member Submission 31 August 2009 <link xl:href="http://www.w3.org/Submission/wadl/"/>)
    </para>
  </chapter>
  <chapter label="4" status="1" xml:id="chapter_4">
    <title>Terms and Definitions</title>
    <para xml:id="para_61a94d0d-7532-4890-942a-dfdf29f83c18">For the purposes of this part of DICOM, the following terms and definitions apply.</para>
    <section label="4.1" status="2" xml:id="sect_4.1">
      <title>DICOM Persistent Object</title>
      <para xml:id="para_b283705d-e698-450f-8079-55f2272b27fa">An instance of a data object as defined by <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that has been allocated an unique identifier in the format specified for SOP Instance UID in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and has been chosen as an object to be saved securely for some period of time. Within the DICOM Standard, a DICOM Persistent Object is referred to as a Composite Service Object Pair (SOP) Instance.</para>
    </section>
     <section label="4.2" status="2" xml:id="sect_4.2">
      <title>Origin-Server</title>
      <para xml:id="para_25630219-9f1f-4784-80e2-406fd068abd3">See IETF RFC-7230 Section 2.1 Client/Server Messaging.</para>
    </section>
    <section label="4.3" status="2" xml:id="sect_4.3">
      <title>User-Agent</title>
      <para xml:id="para_1ec181db-b4b8-4752-9356-1ca1c80233e1">See IETF RFC-7230 Section 2.1 Client/Server Messaging.</para>
    </section>
    <section label="4.4" status="2" xml:id="sect_4.4">
      <title>Web Client System</title>
      <para xml:id="para_360c542f-d61d-4374-9df4-c42e8e489ccc">A system using Internet technologies (web, e-mail…) interested in retrieving DICOM Persistent Objects from a Web Enabled DICOM Server, through HTTP/HTTPS protocol.</para>
    </section>
    <section label="4.5" status="2" xml:id="sect_4.5">
      <title>Web Enabled DICOM Server</title>
      <para xml:id="para_e1d7b483-a2d7-4e10-856e-05657f1bab25">A system managing DICOM Persistent Objects and able to transmit them on request to the Web Client System.</para>
    </section>
    <section label="4.6" status="2" xml:id="sect_4.6">
      <title>Web Access to DICOM Persistent Objects</title>
      <para xml:id="para_abac5cef-d9f4-4155-a4a2-d7da46cf4650">A service enabling the Web Client System to retrieve DICOM Persistent Objects managed by a Web Enabled DICOM Server, through HTTP/HTTPS protocol.</para>
    </section>
  </chapter>
  <chapter label="5" status="1" xml:id="chapter_5">
    <title>Symbols and Abbreviated Terms</title>
    <variablelist>
      <varlistentry>
        <term>DICOM</term>
        <listitem>
          <para xml:id="para_7c0ac824-603b-4e99-95d7-51d20a10909b">Digital Imaging and Communications in Medicine</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HL7</term>
        <listitem>
          <para xml:id="para_0358e414-ca5f-4c1e-a49f-74209d3228ca">Health Level Seven</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HTML</term>
        <listitem>
          <para xml:id="para_75465497-da9f-4bd0-87b0-7aa694795501">HyperText Markup Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HTTP</term>
        <listitem>
          <para xml:id="para_ea67fe03-846b-4b19-b929-cf0f26e5fc96">HyperText Transfer Protocol</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>HTTPs</term>
        <listitem>
          <para xml:id="para_e26bae93-c79b-48f1-8f4d-a889188af361">HyperText Transfer Protocol, secured</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>IHE</term>
        <listitem>
          <para xml:id="para_fd2941f9-cd0b-4c5a-b6a6-5acfa7c91d10">Integrating the Healthcare Enterprise</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>MIME</term>
        <listitem>
          <para xml:id="para_7e24280f-0838-4f50-892b-dceba878193e">Multipurpose Internet Mail Extensions</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>MTOM</term>
        <listitem>
          <para xml:id="para_22cec18f-ca9f-4945-af55-9989c7a65aeb">Message Transmission Optimization Mechanism</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>QIDO-RS</term>
        <listitem>
          <para xml:id="para_21bc656b-e240-4545-bf35-ec812e76d0aa">Query based on ID for DICOM Objects by RESTful Services</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>REST</term>
        <listitem>
          <para xml:id="para_677031bf-b51d-41e2-9274-1973aedf0811">Representational State Transfer</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>RESTful</term>
        <listitem>
          <para xml:id="para_1e32402e-d6ec-498b-8359-554c0b19b3b4">A RESTful Web service is a Web service implemented using REST architecture and HTTP (see <link xl:href="http://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf"/>)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>SOAP</term>
        <listitem>
          <para xml:id="para_0a69b996-8f11-4b99-835a-9420b4014af0">Simple Object Access Protocol (SOAP12 for SOAP version 1.2)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>SOP</term>
        <listitem>
          <para xml:id="para_fc52aec6-7510-478e-9dc2-39e39f815d91">Service Object Pair</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>STOW-RS</term>
        <listitem>
          <para xml:id="para_83d51c81-053e-4f7a-9ebc-687eb2285bf4">STore Over the Web by RESTful Services</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>UID</term>
        <listitem>
          <para xml:id="para_002eac40-fa3e-4b49-be24-d04da25dcb82">Unique (DICOM) Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>UPS-RS</term>
        <listitem>
          <para xml:id="para_70a23487-cf38-49d0-b64d-fcf8ad023b57">Unified Procedure Step by RESTful Services</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>URL/URI</term>
        <listitem>
          <para xml:id="para_038c5db5-f982-405c-a492-9b111f7bec71">Uniform Resource Locator / Identifier</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WADL</term>
        <listitem>
          <para xml:id="para_ca13474e-6496-49e3-bbb8-9cb03dcc4a1b">Web Application Description Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WADO-RS</term>
        <listitem>
          <para xml:id="para_2b198987-95e5-4db8-9d57-f5d3439a7842">Web Access to DICOM Objects by RESTful Services</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WADO-URI</term>
        <listitem>
          <para xml:id="para_f8f0a53d-b7bc-4dba-96b3-8b3cd1fb1707">Web Access to DICOM Objects by URI</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WADO-WS</term>
        <listitem>
          <para xml:id="para_9290bca0-88de-4a48-beab-6afcc24196d1">Web Access to DICOM Objects by Web Services (WS*)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WS</term>
        <listitem>
          <para xml:id="para_ec27b234-5e10-4327-ac29-2cd4f2d7f5ad">Web Services</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>WSDL</term>
        <listitem>
          <para xml:id="para_318e43fb-3316-401b-9acb-7842453c459c">Web Services Description Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XML</term>
        <listitem>
          <para xml:id="para_143c2a0d-d3c3-4cbd-aba6-0522d4638bb5">eXtensible Markup Language</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>XOP</term>
        <listitem>
          <para xml:id="para_84df2053-e59d-4de1-9547-ad5eef4b951c">XML-binary Optimized Packaging</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </chapter>
  <chapter label="6" status="1" xml:id="chapter_6">
    <title>Data Communication Requirements</title>
    <section label="6.1" status="2" xml:id="sect_6.1">
      <title>Interaction</title>
      <para xml:id="para_a6f53f7e-db61-41e1-93f0-656052b4da5f">
        <figure label="6-1" pgwide="1" xml:id="figure_6-1">
          <title>Interaction Diagram</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.18_6-1.svg"/>
              <!--<imagedata fileref="part18_fromword_files/image002.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para xml:id="para_079da7d2-080a-4fa8-8039-c043aa93b2aa">The interaction shall be as shown in <xref linkend="figure_6-1" xrefstyle="select: label"/>.</para>
      <para xml:id="para_bc580907-ad87-4942-a8e2-7009eb819b6d">Multiple communications modes are possible:</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_bdc74731-a5b6-4ca2-a81d-192fb02b36c2">URI based using HTTP Get: WADO-URI request</para>
        </listitem>
        <listitem>
          <para xml:id="para_810df94a-8e0e-43ae-a939-e4e3353cd485">Web Services (WS) using HTTP Post: WADO-WS, either:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para xml:id="para_6014605e-02de-47d9-86c2-4b5d20ac10c7">DICOM Requester (Retrieve Imaging Document Set)</para>
            </listitem>
            <listitem>
              <para xml:id="para_d5e0afa7-f1d5-4be2-97bb-6f6da5e0fede">Rendered Requester (Retrieve Rendered Imaging Document Set)</para>
            </listitem>
            <listitem>
              <para xml:id="para_d5120875-3f0b-4bc1-93c4-2226d75d704f">Metadata Requester (Retrieve Imaging Document Set Metadata)</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para xml:id="para_49750065-c3fe-411d-aeee-7443bb1da9cc">RESTful Services (RS) using HTTP Get: WADO-RS, either:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para xml:id="para_580f27bd-9cb5-4ecb-9163-3612dbd37077">DICOM Requester (Retrieve Study, Series, or Instance DICOM Objects)</para>
            </listitem>
            <listitem>
              <para xml:id="para_cf5f94bb-84d7-4904-a8a7-89f250cf8352">Frame Pixel Data Requester (Retrieve Instance Frame Pixel Data)</para>
            </listitem>
            <listitem>
              <para xml:id="para_6c750372-3803-40a7-91b9-1d07813b16fc">Bulk Data Requester (Retrieve Study, Series, Instance Bulk Data)</para>
            </listitem>
            <listitem>
              <para xml:id="para_01b4f4ef-a67e-42a7-b09c-387468b947e9">Metadata Requester (Retrieve Study, Series, Instance Metadata)</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para xml:id="para_6e8bfbee-3f6a-4afd-96a9-76820b8b6a51">RESTful Services (RS) using HTTP Get: QIDO-RS:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para xml:id="para_aa72c26a-0eb0-4400-92d5-6b079340b763">Query Requester (Search for Study, Series or Instance DICOM Objects)</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para xml:id="para_ecd38071-066e-45f5-9c98-2214bda3fb03">RESTful Services (RS) using HTTP POST: STOW-RS, either:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para xml:id="para_9c5bcd1b-2d9e-4734-bc5b-773389f548b5">DICOM Creator (Store Instances)</para>
            </listitem>
            <listitem>
              <para xml:id="para_7f2b9ad1-976f-47a8-9f5a-4b0d4c9eb32e">Metadata and Bulk Data Creator (Store Instances)</para>
            </listitem>
          </orderedlist>
        </listitem>
        <listitem>
          <para xml:id="para_08742abb-28a8-42b6-8589-2f708e54c5b0">RESTful Services (RS) using HTTP Options: RS Capabilities:</para>
          <orderedlist numeration="loweralpha">
            <listitem>
              <para xml:id="para_b617fcfc-77db-4f6d-afcf-5e5bc328e758">Provided information about the capabilities of a DICOM RESTful web service provider)</para>
            </listitem>
          </orderedlist>
        </listitem>
      </itemizedlist>
    </section>
    <section label="6.2" status="2" xml:id="sect_6.2">
      <title>WADO-URI Request</title>
      <para xml:id="para_c79b491c-5e40-41e5-bf8e-f7fddf050d75">The HTTP Request used shall use the GET method as defined in IETF RFC7230.</para>
      <section label="6.2.1" status="3" xml:id="sect_6.2.1">
        <title>Parameters of the HTTP Request</title>
        <para xml:id="para_efd6b350-e029-4984-bba0-2bf01be4e79d">The parameters of the &lt;query&gt; component of the Request-URI to be sent to the web Server through the HTTP GET method request shall be represented as defined in IETF RFC3986.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_f6945020-11e7-424d-97c1-c67af09948ac">Other components of the Request-URI depend on the configuration, e.g., location and script language of the Web Enabled DICOM Server.</para>
            </listitem>
            <listitem>
              <para xml:id="para_75c12509-9257-4c01-b297-bf7ce2b63545">The means by which the Web Client System obtains the value of the necessary parameters for web accessing of DICOM objects is out of the scope of the standard.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="6.2.2" status="3" xml:id="sect_6.2.2">
        <title>List of Media Types Supported in the Response</title>
        <para xml:id="para_8ccf8cd1-ecce-4e21-8a0e-4393c4d48421">The "Accept" field of the GET method request shall specify the Media type(s) acceptable to the Web Client System. The(se) Media type(s) shall include at least the items of the list of MIME types specified in <xref linkend="chapter_7" xrefstyle="template:Section %n"/> of this standard devoted to the DICOM persistent object types.</para>
        <note>
          <para xml:id="para_e5354566-4390-47cd-8d28-7601e77e8a87">Typically the Accept field will be sent by a Web Client as "*/*". An optional parameter specifies the MIME type(s) preferred by the Web Client, as a subset of those specified in the "Accept" field.</para>
        </note>
      </section>
      <section label="6.2.3" status="3" xml:id="sect_6.2.3">
        <title>List of Character Sets Supported in the Response</title>
        <para xml:id="para_2ecd5f25-4bc3-497e-bd2a-781830e20be3">The "Accept-charset" field of the GET method request shall specify the character set of the object to be retrieved. If the "Accept-charset" field of the GET method is not present, or the Web Enabled DICOM Server does not support the specified character set, the character set of the response will be at the discretion of the Web Enabled DICOM Server.</para>
        <para xml:id="para_0d764d4e-bef4-4286-82e2-5edfdd8e6e6c">Note Typically the user of a Web Client does not have control over the "Accept-charset" field. An optional parameter specifies the character set to be used in the returned object.</para>
      </section>
    </section>
    <section label="6.3" status="2" xml:id="sect_6.3">
      <title>WADO-URI Response</title>
      <para xml:id="para_a6b07c4f-74cf-4505-b4da-3b3b11f2cc18">The response shall be an HTTP Response Message as specified in IETF RFC7230.</para>
      <note>
        <para xml:id="para_5234f433-269c-4e24-b042-3baaa30a566e">The content of the message-body varies according to the Media type as defined below.</para>
      </note>
      <section label="6.3.1" status="3" xml:id="sect_6.3.1">
        <title>Body of Single DICOM MIME Sub-type Part Response</title>
        <section label="6.3.1.1" status="4" xml:id="sect_6.3.1.1">
          <title>MIME Type</title>
          <para xml:id="para_9af733e6-53a5-4ae5-85b2-75b60ff6b2e4">The MIME type shall be 'application/dicom', as specified in IETF RFC3240.</para>
        </section>
        <section label="6.3.1.2" status="4" xml:id="sect_6.3.1.2">
          <title>Content</title>
          <para xml:id="para_d60b06a3-e85a-4396-9ddf-41bf55bf0ff5">The body content shall be a "Part 10 File" that includes a meta-header as defined in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>.</para>
        </section>
        <section label="6.3.1.3" status="4" xml:id="sect_6.3.1.3">
          <title>Transfer Syntax</title>
          <para xml:id="para_b939a974-c5f1-49a4-83bf-c0b58aeedda3">The returned DICOM object shall be encoded using one of the transfer syntaxes specified in the transfer syntax query parameter as defined in <xref linkend="sect_8.2.11" xrefstyle="select: label"/> below. By default, the transfer syntax shall be "Explicit VR Little Endian".</para>
          <note>
            <para xml:id="para_a25a0f0b-7973-4b7e-ad25-a63820bdfe11">This implies that retrieved images are sent uncompressed by default.</para>
          </note>
        </section>
      </section>
      <section label="6.3.2" status="3" xml:id="sect_6.3.2">
        <title>Body of Non-DICOM MIME Type Response</title>
        <section label="6.3.2.1" status="4" xml:id="sect_6.3.2.1">
          <title>MIME Type</title>
          <para xml:id="para_7bcfb81f-919b-4f2f-b5dd-3c8f2434e6e5">The MIME type shall be one on the MIME types defined in the contentType parameter, preferably the most desired by the Web Client, and shall be in any case compatible with the 'Accept' field of the GET method.</para>
          <note>
            <para xml:id="para_46257028-caa4-41df-bd1f-672dbb1e9ff6">The HTTP behavior is that an error (406 - Not Acceptable) is returned if the required content type cannot be served.</para>
          </note>
        </section>
        <section label="6.3.2.2" status="4" xml:id="sect_6.3.2.2">
          <title>Content</title>
          <para xml:id="para_f3df4ac2-db9e-4130-a129-3a0ffed037f1">The content shall be a single MIME part containing the object to be retrieved.</para>
          <note>
            <para xml:id="para_eecc47e4-b2d5-45a5-9c94-2ec01a1a55ee">Multiple objects in a response are not supported by this standard. The parameters select only a single object to retrieve. Most current Web Clients are able to retrieve single objects, within a "non multipart" MIME body, and are not able to support multipart/related or multipart/mixed responses.</para>
          </note>
        </section>
      </section>
    </section>
    <section label="6.4" status="2" xml:id="sect_6.4">
      <title>WADO-WS Request/Response</title>
      <para xml:id="para_86851ed7-1e7e-4afc-a679-e0968723a467">The DICOM Web Service defines several action types. An implementation shall support at least one of these actions. The three action types are:</para>
      <orderedlist>
        <listitem>
          <para xml:id="para_2c91adf2-a2b4-47df-9a78-6858bd02981d">RetrieveImagingDocumentSet</para>
          <para xml:id="para_768b5f61-9b0d-45bb-a296-ecb868c28f41">This action retrieves a set of DICOM instances and other objects. This action corresponds to the IHE XDS-I.b transaction RAD-69. The DICOM instances are formatted in accordance with <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/>, and encapsulated in a Web Services response.</para>
        </listitem>
        <listitem>
          <para xml:id="para_f347621b-0973-4f68-a455-10424fa589f7">RetrieveRenderedImagingDocumentSet</para>
          <para xml:id="para_06f2ae07-aead-469b-91f7-0ebff0b9eda4">This action retrieves a set of DICOM instances that have been rendered into the requested format. For example, if rendering into JPEG was requested, these will be the JPEG renderings of the requested set of DICOM objects.</para>
        </listitem>
        <listitem>
          <para xml:id="para_8eb973e5-d468-4e1c-8848-f580c1e8b994">RetrieveImagingDocumentSetMetadata</para>
          <para xml:id="para_52d7616e-66d7-4654-893d-36d343c0d700">This action retrieves a set of DICOM instances presented as an Infoset with the bulk data removed. This service can retrieve either the full metadata, or a subset selected by XPath arguments. The XML encoding for the DICOM attributes is defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/>.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_f8a4c2de-0010-434e-b345-aec932dc7e30">The Web Services actions shall be fully compliant with the Basic Profile of WS-I as defined in IHE IT Infrastructure Technical Framework Vol 2x Annex V. All &lt;wsa:Action&gt; elements shall have the mustUnderstand attribute set (mustUnderstand="1").</para>
      <section label="6.4.1" status="3" xml:id="sect_6.4.1">
        <title>WS - RetrieveImagingDocumentSet</title>
        <section label="6.4.1.1" status="4" xml:id="sect_6.4.1.1">
          <title>Request</title>
          <para xml:id="para_29129772-194d-4f2e-838a-8ec6d222848e">The specific Web Services parameters to be used for the Retrieve Imaging Document Set action shall be as follows, in the order that they would appear in the WSDL definition:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_baa8fe6c-d0ae-46ca-aa50-5d08a48f4c9f">The following types shall be imported (xsd:import) in the /definitions/types section:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6431ef46-8222-4cd5-94dd-1b3f002fa455">namespace="urn:ihe:rad:xdsi-b:2009", schema="XDSI.b_ImagingDocumentSource.xsd"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_0053ec9f-50a2-4b94-962f-356419df30f5">The baseline XDS.b schema (namespace="urn:ihe:iti:xds-b:2007", schema="XDS.b_DocumentRepository.xsd")</para>
                </listitem>
                <listitem>
                  <para xml:id="para_96f5bcad-b1c1-48d2-b057-d9d8630d2496">The baseline DICOM WADO-WS schema (namespace="urn:dicom:wado:ws:2011", schema="dicom.wado.ws.2011.xsd")</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_2da5247c-6eff-4f5b-ac06-be8cfaf62398">The /definitions/message/part/@element attribute of the Retrieve Imaging Document Set Request message shall be an "iherad:RetrieveImagingDocumentSetRequest" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_ffd5f6e4-bee2-448d-9bef-dcb3c64d64d1">The /definitions/message/part/@element attribute of the Retrieve Imaging Document Set Response message shall be an "ihe:RetrieveDocumentSetResponse" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_e204f531-f23b-48ec-b174-d3cb69bf9855">The /definitions/portType/operation/input/@wsaw:Action attribute for the Retrieve Imaging Document Set Request message shall be "urn:ihe:rad:2009:RetrieveImagingDocumentSet".</para>
            </listitem>
            <listitem>
              <para xml:id="para_46dc181d-caf5-403d-8047-3e985d58bab8">The /definitions/portType/operation/output/@wsaw:Action attribute for the Retrieve Imaging Document Set Response message shall be "urn:ihe:iti:2007:RetrieveDocumentSetResponse".</para>
            </listitem>
            <listitem>
              <para xml:id="para_fd8e57dc-51aa-468b-8cce-d73ecf8fa3f9">The /definitions/binding/operation/soap12:operation/@soapAction attribute shall be "urn:ihe:rad:2009:RetrieveImagingDocumentSet".</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_a5dbcfd4-1db7-407b-8015-abec7e1297d1">The &lt;iherad:RetrieveImagingDocumentSetRequest/&gt; element for use with the Retrieve Imaging Document Set Request Message is defined as:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_6721899a-4022-4a6a-964f-f60afb58467b">One or more &lt;iherad:StudyRequest/&gt; elements each of which includes a "studyInstanceUID" attribute identifying the study associated with the DICOM images/ objects being retrieved. Each &lt;iherad:StudyRequest/&gt; element shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a2f0865a-7f95-4783-8175-3d0a01cf4943">One or more &lt;iherad:SeriesRequest/&gt; elements each of which includes a "seriesInstanceUID" attribute identifying the series associated with the DICOM images/ objects being retrieved. Each &lt;iherad:SeriesRequest/&gt; element shall contain:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_77dca61a-b5f7-43e6-9ccc-a09e5c7398e6">One or more &lt;ihe:DocumentRequest/&gt; elements, each one representing an individual document that the requestor wants to retrieve from the Web Server. Each &lt;ihe:DocumentRequest/&gt; element contains:</para>
                      <itemizedlist>
                        <listitem>
                          <para xml:id="para_af64e06d-1116-4a26-9082-cc1a97b1e7c8">An optional &lt;ihe:RepositoryUniqueId/&gt; element that identifies the Web Server from which the document is to be retrieved. This value corresponds to XDSDocumentEntry.repositoryUniqueId. The RepositoryUniqueID is similar to a DICOM AETitle, but is a uniqueID assigned to the WADO-WS Web Server rather than a locally assigned string identifier. There will be a separate RepositoryUniqueID for each web service end point.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_e9c0a374-86fb-4abd-82e7-bb6b2d01c78c">A required &lt;ihe:DocumentUniqueId/&gt; element that identifies the document within the source. For example, this value could be a SOP Instance UID obtained from a Key Object Selection (KOS) instance.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_2e1eb849-682c-4f67-9dc0-2b44ddd153ff">An optional &lt;ihe:HomeCommunityId/&gt; element. See the IHE Profiles for the definition and possible uses of this element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_8c24bc7d-cf7d-4425-b58d-f3d03459bcd7">An optional &lt;wado:Anonymize/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_8cc6ee87-ec12-401c-865b-6e283898e4d8">An optional &lt;wado:FrameNumber/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_a930d06c-83df-4ede-8603-f42e95e4b59a">A required &lt;iherad:TransferSyntaxUIDList/&gt; element that contains a list of one or more &lt;ihe:TransferSyntaxUID&gt; elements. Each of the &lt;iherad:TransferSyntaxUID&gt; elements represent one of the transfer syntax encodings that the Imaging Document Consumer is capable of processing.</para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.4.1.2" status="4" xml:id="sect_6.4.1.2">
          <title>Response</title>
          <para xml:id="para_b26e1bd9-b9b1-4046-94ce-be76ad9cb0cd">A Web Server shall provide the document(s) indicated in the request. The Web Server shall return the document(s) or an error code when the document could not be returned. The pixel data shall be encoded using one of the DICOM transfer syntaxes included in the Retrieve Imaging Document Set Request Message. If the Imaging Document Source cannot encode the pixel data using any of the requested transfer syntaxes then an error status shall be returned.</para>
          <section label="6.4.1.2.1" status="5" xml:id="sect_6.4.1.2.1">
            <title>Form of the Response</title>
            <para xml:id="para_deb39c72-e336-47db-a411-250ab310e3ad">The &lt;ihe:RetrieveDocumentResponse/&gt; element for use with the Retrieve Imaging Document Set Response Message is defined as:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_7766cb91-02d1-424f-84d7-13102e18e854">A required /ihe:RetrieveDocumentSetResponse/rs:RegistryResponse element</para>
              </listitem>
              <listitem>
                <para xml:id="para_e1edd528-5906-4965-ad2d-43391a8d5fdc">An optional sequence of &lt;ihe:DocumentResponse/&gt; elements containing</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_c58f5ee8-600a-49d0-84fc-4ed63fd01aeb">An optional &lt;ihe:HomeCommunityId/&gt; element. The value of this element shall be the same as the value of the /RetrieveImagingDocumentSetRequest/StudyRequest/SeriesRequest/DocumentRequest/HomeCommunityId element in the Retrieve Document Set Request Message. If the &lt;ihe:HomeCommunityId/&gt; element is not present in the Retrieve Document Set Request Message, this value shall not be present.</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_dd5e929e-8e24-4ec5-b077-8fdbb492b523">An optional &lt;ihe:RepositoryUniqueId/&gt; that identifies the Imaging Document Source from which the document is to be retrieved. The value of this element shall be the same as the value of the /RetrieveImagingDocumentSetRequest/StudyRequest/SeriesRequest/DocumentRequest/RepositoryUniqueId element in the original Retrieve Imaging Document Set Request Message. This value corresponds to XDSDocumentEntry.repositoryUniqueId.</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_f229d667-a130-47ee-8d7d-7c5dc52d9e1c">A required &lt;ihe:DocumentUniqueId/&gt; that identifies the document within the Imaging Document Source. The value of this element shall be the same as the value of the /RetrieveImagingDocumentSetRequest/StudyRequest/SeriesRequest/DocumentRequest/DocumentUniqueId element in the original Retrieve Imaging Document Set Request Message. This value corresponds to the SOP Instance UID in the Retrieve Document Request.</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_9b6f79eb-97af-44a9-9fb3-42d4a1532189">A conditional &lt;wado:FrameNumber/&gt; that identifies the frame within the source document. It shall be present if and only if &lt;wado:FrameNumber/&gt; was in the request</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_76ebdbde-d9d7-4183-831c-6672f92e8c3a">A required &lt;ihe:Document/&gt; element that contains the retrieved document as an XOP Infoset.</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_a79155e3-bbfc-4638-a3ce-f1ff6f3abc00">A required &lt;ihe:mimeType/&gt; element that indicates the MIME type of the retrieved document.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
            <para xml:id="para_59889936-2b4b-4896-8ee8-aaa6289318e5">The /RetrieveDocumentSetResponse/rs:RegistryResponse/@status attributes provides the overall status of the request: It shall contain one of the following values:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_75f5fd0e-f361-443c-b060-f77d1bd6b989">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</para>
              </listitem>
              <listitem>
                <para xml:id="para_e0c7f273-8e7c-43ba-8ccf-36bc14d40153">urn:ihe:iti:2007:ResponseStatusType:PartialSuccess</para>
              </listitem>
              <listitem>
                <para xml:id="para_a57405fa-fbdc-4ca7-9ccb-6ca9f699a403">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_0ffde9e3-eb6a-4b8f-97a8-6301034f3566">See ITI TF-2a: 4.1.13 Error Reporting for the interpretation of these values.</para>
            <para xml:id="para_0d2ad6ed-f27b-410c-966a-3f9b12a20c45">For each document requested in a /RetrieveImagingDocumentSetRequest/StudyRequest/SeriesRequest/DocumentRequest element:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_1eac93be-31dd-42b8-be5c-6ec06289b60b">If the document is successfully retrieved (without warning) then no /RetrieveDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be present and a /RetrieveDocumentSetResponse/DocumentResponse/Document element shall be returned containing the document as base64binary encoded data.</para>
              </listitem>
              <listitem>
                <para xml:id="para_a42334df-cd3b-40a5-aa3a-3a21b65eb178">If a warning is reported when retrieving the document, then a /RetrieveDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_ffad5200-cb59-4696-a840-fb6399d5d050">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Warning</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_790758f9-f45d-4ef0-8901-a87c726a7d37">@errorCode is specified</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_0d0ece24-5ae1-4396-b848-6b69127dc3d7">@codeContext contains the warning message</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_0f851eb0-b7d1-4fa5-9322-f22745fe4749">@location contains the DocumentUniqueId of the document requested</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_7797ffdb-6605-421a-96cb-b5adc6e74a45">The document shall be returned in an instance of /RetrieveDocumentSetResponse/DocumentResponse/Document as base64binary encoded data. The returned document and warning are correlated via the DocumentUniqueId.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_84d8bc4a-5501-491b-b6b0-de68102e46d5">If an error is reported when retrieving a document, then a /RetrieveDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_051aa0dd-441c-41c6-85c5-2ee31c1bc91e">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_0ed2dbb3-f9a3-4da6-b6de-0a07b1604fba">@errorCode is specified</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_4cae3ffe-2646-44e2-bd34-7a43650648c7">@codeContext contains the error message</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_1e9b43db-62e1-4050-acba-545e267ae821">@location contains the DocumentUniqueId of the document requested</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_f7a4d160-8d18-4eb2-97cc-f0d0ccb2562e">No corresponding RetrieveDocumentSetResponse/DocumentResponse element shall be returned</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
            <para xml:id="para_cf9729f1-e616-450d-a1d2-1cdc8fda923a">The error conditions for failures and associated error codes are given below in section 6.4.4. These errors shall be detected and the associated errorCode returned if that error occurs. Additional errors defined in the ebRS standard, in ITI TF-2: 4.1.13 "Error Reporting", and defined by the implementer may be returned.</para>
          </section>
          <section label="6.4.1.2.2" status="5" xml:id="sect_6.4.1.2.2">
            <title>JPIP</title>
            <para xml:id="para_ecc0353c-82f9-4127-b7e9-eb6e4eeadd28">If the Web Client specifies a transfer syntax field of 1.2.840.10008.1.2.4.94 (DICOM JPIP Referenced Transfer Syntax) or 1.2.840.10008.1.2.4.95 (DICOM JPIP Referenced Deflate Transfer Syntax), and the Web Server supports the requested transfer syntax the following behavior is expected:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_c8b5d962-e5fe-43c7-8e84-79398f93bee3">If the DICOM Image Object(s) already have the same JPIP transfer syntax as the one indicated in the request, the Retrieve Imaging Document Set Response shall include the DICOM Image Objects unchanged.</para>
              </listitem>
              <listitem>
                <para xml:id="para_5279750e-2533-45b8-9fc5-9b8272a4edfb">If the DICOM Image Object(s) have a transfer syntax that differs from that of the request, the Retrieve Imaging Document Set Response shall include the DICOM image with the transfer syntax changed to the requested transfer syntax. In addition, the pixel data Attribute (7FE0,0010 tag) will have been removed and replaced with a Pixel Data Provider URL (0028,7FE0 tag). The URL represents the JPIP request and will include the specific target information.</para>
              </listitem>
              <listitem>
                <para xml:id="para_5a5399ef-803e-4c10-bda6-8b35c8c74c59">Upon receipt of this Retrieve Imaging Document Set Response, the Imaging Document Consumer may request the pixel data from the pixel data provider using the supplied URL. Additional parameters required by the application may be appended to the URL when accessing the pixel data provider.</para>
              </listitem>
              <listitem>
                <para xml:id="para_833c3d7b-7625-49a5-9913-889f74e9374e">For example, a JPIP request for a 200 by 200 pixel rendition of the entire image can be constructed from the Pixel Data Provider URL as follows:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_a18009c0-beda-4bd8-a477-c57655b87c71">Pixel Data Provider URL (0028,7FE0) = https://server.xxx/jpipserver.cgi?target=imgxyz.jp2,</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_1ecb67fe-d418-4c59-8dcc-615746beb03d">URL Generated by the application = https://server.xxx/jpipserver.cgi?target=imgxyz.jp2&amp;fsiz=200,200</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.4.2" status="3" xml:id="sect_6.4.2">
        <title>WS - RetrieveRenderedImagingDocumentSet</title>
        <section label="6.4.2.1" status="4" xml:id="sect_6.4.2.1">
          <title>Request</title>
          <para xml:id="para_0b9b6015-5543-40d8-824f-5906987792a7">The specific Web Services parameters to be used for the Retrieve Rendered Imaging Document Set action shall be as follows, in the order that they would appear in the WSDL definition:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_9703980e-f37b-41ca-8efa-ca39f014a4c8">The following types shall be imported (xsd:import) in the /definitions/types section:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_65330c11-581a-418f-ac05-96b2fdc1e67f">namespace="urn:ihe:rad:xdsi-b:2009", schema="XDSI.b_ImagingDocumentSource.xsd"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_582037ec-b2b1-4151-86e3-9bd7fee7e30e">The baseline XDS.b schema (namespace="urn:ihe:iti:xds-b:2007", schema="XDS.b_DocumentRepository.xsd")</para>
                </listitem>
                <listitem>
                  <para xml:id="para_b97657a9-32b9-4f0c-b756-9d133d39c823">The baseline DICOM WADO-WS schema (namespace="urn:dicom:wado:ws:2011", schema="dicom.wado.ws.2011.xsd")</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_49cbe234-86ea-425a-acd6-c346f7e33f2f">The /definitions/message/part/@element attribute of the Retrieve Rendered Imaging Document Set Request message shall be a "wado:RetrieveRenderedImagingDocumentSetRequest" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_bcadc71d-f7ca-4414-ae6c-3d821c010a4f">The /definitions/message/part/@element attribute of the Retrieve Rendered Imaging Document Set Response message shall be a "wado:RetrieveRenderedImagingDocumentSetResponse" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_98420177-ff94-4913-948a-bb2e5d785396">The /definitions/portType/operation/input/@wsaw:Action attribute for the Retrieve Rendered Imaging Document Set Request message shall be "urn:dicom:ws:wado:2011:RetrieveRenderedImagingDocumentSet".</para>
            </listitem>
            <listitem>
              <para xml:id="para_1bfd6a33-d577-4761-97b1-be3e8ed26401">The /definitions/portType/operation/output/@wsaw:Action attribute for the Retrieve Imaging Document Set Response message shall be "urn:dicom:ws:wado:2011:RetrieveRenderedImagingDocumentSetResponse".</para>
            </listitem>
            <listitem>
              <para xml:id="para_f7d198e6-1582-4602-a3fc-6e98d7610161">The /definitions/binding/operation/soap12:operation/@soapAction attribute shall be "urn:dicom:ws:wado:2011:RetrieveRenderedImagingDocumentSet".</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_4aeba76f-7e3b-48e2-92eb-a5377e304f6f">The &lt;wado:RetrieveRenderedImagingDocumentSetRequest/&gt; element for use with the Retrieve Imaging Document Set Request Message is defined as:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_6f399058-b772-4ebf-9166-479040074438">One or more &lt;wado:StudyRequest/&gt; elements each of which includes a "studyInstanceUID" attribute identifying the study associated with the DICOM images/ objects being retrieved. Each &lt;iherad:StudyRequest/&gt; element shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_e314523b-74a8-49a9-93b0-c9a3d878b67e">One or more &lt;wado:SeriesRequest/&gt; elements each of which includes a "seriesInstanceUID" attribute identifying the series associated with the DICOM images/ objects being retrieved. Each &lt;iherad:SeriesRequest/&gt; element shall contain:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_122c518e-d512-476a-95cf-86b21919d599">One or more &lt;wado:RenderedDocumentRequest/&gt; elements, each one representing an individual document that the requestor wants to retrieve from the Web Server. Each &lt;wado:DocumentRequest/&gt; element contains:</para>
                      <itemizedlist>
                        <listitem>
                          <para xml:id="para_496c593c-7f86-49fb-aab0-d1dc7fb3696b">An optional &lt;ihe:RepositoryUniqueId/&gt; element that identifies the Web Server from which the document is to be retrieved. This value corresponds to XDSDocumentEntry.repositoryUniqueId. The RepositoryUniqueID is similar to a DICOM AETitle, but is a uniqueID assigned to the WADO-WS Web Server rather than a locally assigned string identifier. There will be a separate RepositoryUniqueID for each web service end point.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_afceeea6-11d9-4a4a-92ef-53f5056390db">A required &lt;ihe:DocumentUniqueId/&gt; element that identifies the document within the source. This value corresponds to the SOP Instance UID referenced within the DICOM manifest.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_83a76382-ddcf-4910-b68b-abe820f0ceea">An optional &lt;ihe:HomeCommunityId/&gt; element that corresponds to the home attribute of the Identifiable class in ebRIM.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_81cd2730-046e-44a4-8c1a-31a69f4e9ac4">An optional &lt;wado:Annotation/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_5b6cb78e-265d-4ec1-9635-20300829d5ef">An optional &lt;wado:Rows/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_31a269f5-55d2-4c8e-bd65-5c8da8a0673f">An optional &lt;wado:Columns/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_f096ba12-3efc-41ed-bdff-c12183f6ff3a">An optional &lt;wado:Region/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_ceb09336-db15-4034-bb6b-42cca434e00d">An optional &lt;wado:WindowCenter/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_a2b5dd19-3523-44ae-a7ff-6b21799a7287">An optional &lt;wado:WindowWidth/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_09ecf61b-5b64-4956-af34-429988ebbedd">An optional &lt;wado:ImageQuality/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_b5789301-1eee-4bd1-b4cc-d2571b1a3a54">An optional &lt;wado:PresentationUID/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_7ed7b5cd-59f1-4fa1-a6e4-af2d1b534f1b">An optional &lt;wado:PresentationSeriesUID/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_240423ee-7991-4e4e-941c-d6d10949c7a3">An optional &lt;wado:Anonymize/&gt; element</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_81ff61f1-b2c4-429b-bcca-611071d47ee3">An optional &lt;wado:FrameNumber/&gt; element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_7559a0a3-142c-4b9f-ac71-9c1754ee831a">A required &lt;wado:ContentTypeList/&gt; element that contains a list of one or more &lt;wado:ContentType&gt; elements.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_757b9eba-b1de-407c-9294-afc82aad48aa">An optional &lt;wado:CharsetList/&gt; element that contains a list of one or more &lt;wado:Charset&gt; elements.</para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.4.2.2" status="4" xml:id="sect_6.4.2.2">
          <title>Response</title>
          <para xml:id="para_a6580b00-dd79-423d-b9fb-47aefb07eddd">An Web Server shall render and then provide the document(s) indicated in the request. The Web Server shall return the rendered documents or an error code when the document could not be returned. The rendered forms shall be the subset specified, and in the format requested. If the Imaging Document Source cannot render the pixel data in that manner then an error status shall be returned.</para>
          <para xml:id="para_15364d9e-b68b-4f37-95af-147430b7cbb7">The &lt;wado:RetrieveRenderedImagingDocumentResponse/&gt; element for use with the Retrieve Imaging Document Set Response Message, Retrieve Rendered Imaging Document Set Response Message and Retrieve Imaging Document Set Metadata Response Message is defined as:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_377161e6-5aff-42f5-ae7d-b87f66783dd8">A required /ihe:RetrieveDocumentSetResponse/rs:RegistryResponse element</para>
            </listitem>
            <listitem>
              <para xml:id="para_2ab691b9-a75e-4fc7-ac02-b4b518049ad7">An optional sequence of &lt;wado:RenderedDocumentResponse/&gt; elements containing:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_5168b1c3-308b-45e8-9eaa-aad24644889d">A &lt;ihe:HomeCommunityId/&gt; element. The value of this element shall be the same as the value of the StudyRequest/SeriesRequest/DocumentRequest/HomeCommunityId element in the Request Message. If the &lt;ihe:HomeCommunityId/&gt; element is not present in the Request Message, this value shall not be present.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_74842737-f3fa-4503-8dd5-2e0f9e96896c">A required &lt;ihe:RepositoryUniqueId/&gt; that identifies the Imaging Document Source from which the document was retrieved. The value of this element shall be the same as the value of the StudyRequest/SeriesRequest/DocumentRequest/RepositoryUniqueId element in the original Request Message.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_c6ed5ab3-9bf9-427c-ad09-4c53b08d3421">A required &lt;wado:SourceDocumentUniqueId/&gt; that identifies the source document. The value of this element shall be the same as the value of the StudyRequest/SeriesRequest/DocumentRequest/DocumentUniqueId element in the original Request Message. This value identifies the source, and is not an ID for the resulting rendered document.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_5d83deb3-0a89-4f86-b249-49897e42afab">A conditional &lt;wado:FrameNumber/&gt; that identifies the frame within the source document. It shall be present if and only if &lt;wado:FrameNumber/&gt; was in the request.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7afd45f9-5b52-42a3-8719-29c44507a576">A required &lt;wado:Annotation/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_48815fcd-7e53-4930-9880-b8f51c3abc1a">A required &lt;wado:Rows/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_fb59e829-21a8-420d-9283-3f7d54b4235e">A required &lt;wado:Columns/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_39cf1bc8-e677-4616-ae55-63894cb49224">A required &lt;wado:Region/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_162a65a6-f54c-4ba6-a9fc-e7aee4beb029">A required &lt;wado:WindowCenter/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_bf6ce084-b7e6-46e4-b44c-45c965a73259">A required &lt;wado:WindowWidth/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_50402972-b37f-41e7-a34d-1c9a4f706b0f">A required &lt;wado:ImageQuality/&gt; element that contains the actual value used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_cfa6e494-b59a-487e-a87d-28ab54650c7e">A required &lt;wado:PresentationUID/&gt; element that contains the actual value used if a PresentationUID was used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_867542d8-eca4-45bb-b43d-ab58060fb60c">A required &lt;wado:PresentationSeriesUID/&gt; element that contains the actual value used if a PresentationSeriesUID was used.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_c5777c42-032f-4218-9c24-958be7c17e53">An optional &lt;wado:Anonymize/&gt; element that shall be present if the rendered instance was anonymized.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_826970f6-91a4-48bd-a9f2-bf53eb799cb0">A required &lt;ihe:Document/&gt; element that contains the rendered document encoded as an XOP Infoset.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_b041ecf5-e12c-40ac-b6c1-3fff7f14b2ba">A required &lt;ihe:mimeType/&gt; element that indicates the MIME type of the retrieved document.</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para xml:id="para_ca6dab1b-6da2-4a70-a1a3-780c255fe25b">The /RetrieveDocumentSetResponse/rs:RegistryResponse/@status attributes provides the overall status of the request: It shall contain one of the following values:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_f867a99c-9fcb-493f-83af-0c10623b9751">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</para>
            </listitem>
            <listitem>
              <para xml:id="para_691ad9b5-b804-46d8-8c84-0e71c73edf0d">urn:ihe:iti:2007:ResponseStatusType:PartialSuccess</para>
            </listitem>
            <listitem>
              <para xml:id="para_c1257211-97f3-42e3-a473-94f3efb0ed60">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_cff8e179-5135-4d46-a282-2c8425e0bebb">For each document requested in a /RetrieveRenderedImagingDocumentSetRequest/StudyRequest/SeriesRequest/DocumentRequest element:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_71241ac3-2e8e-4103-8d5f-1b0a6fba7c4c">If the document is successfully rendered (without warning) then no /RetrieveRenderedImagingDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be present and a /RetrieveRenderedImagingDocumentSetResponse/DocumentResponse/Document element shall be returned containing the rendered document as base64binary encoded data.</para>
            </listitem>
            <listitem>
              <para xml:id="para_6f14e6de-c384-4a89-a24a-173eb710d96b">If a warning is reported when retrieving the document, then a /RetrieveRenderedImagingDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_b9832408-bd20-452b-9162-8cb3012c802c">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Warning</para>
                </listitem>
                <listitem>
                  <para xml:id="para_34007e98-260b-4e71-8aff-5964612f789a">@errorCode is specified</para>
                </listitem>
                <listitem>
                  <para xml:id="para_6196bfcb-cfbf-4ca6-bc84-0ff025822cea">@codeContext contains the warning message</para>
                </listitem>
                <listitem>
                  <para xml:id="para_88898f74-ef1c-44e7-9bf9-eab41efbcbe3">@location contains the DocumentUniqueId of the document requested</para>
                </listitem>
                <listitem>
                  <para xml:id="para_29237fa7-57d9-4220-9bf0-0012d0e35406">The rendered document shall be returned in an instance of /RetrieveRenderedImagingDocumentSetResponse/DocumentResponse/Document as base64binary encoded data. The returned document and warning are correlated via the DocumentUniqueId.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_3e272da1-4862-4a68-9860-0379bb33dd9f">If an error is reported when retrieving a document, then a /RetrieveRenderedImagingDocumentSetResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6796a0c2-8d40-44b8-bf5c-d3711985b070">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error</para>
                </listitem>
                <listitem>
                  <para xml:id="para_aa43d9eb-7b90-404f-b90d-0055e56f5071">@errorCode is specified</para>
                </listitem>
                <listitem>
                  <para xml:id="para_77434c7f-a48b-4dea-a979-32d74af94515">@codeContext contains the error message</para>
                </listitem>
                <listitem>
                  <para xml:id="para_d069e321-1a53-4700-9fca-367be1a22722">@location contains the DocumentUniqueId of the document requested</para>
                </listitem>
                <listitem>
                  <para xml:id="para_6052d0c8-71ef-40f4-a5ac-da107301d59d">No corresponding RetrieveRenderedImagingDocumentSetResponse/DocumentResponse element shall be returned</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para xml:id="para_fcc9cc0f-c055-413e-9df4-f1f0630e0ff1">The error conditions for failures and associated error codes are given below in section 6.4.4. These errors shall be detected and the associated errorCode returned if that error occurs. Additional errors defined in the ebRS standard, in ITI TF-2: 4.1.13 "Error Reporting", and defined by the implementer may be returned.</para>
        </section>
      </section>
      <section label="6.4.3" status="3" xml:id="sect_6.4.3">
        <title>WS - RetrieveImagingDocumentSetMetadataRequest</title>
        <section label="6.4.3.1" status="4" xml:id="sect_6.4.3.1">
          <title>Request</title>
          <para xml:id="para_eb20b9e4-26c5-4277-86f0-aa3ef16e53e2">The specific Web Services parameters to be used for the Retrieve Imaging Document Set Metadata action shall be as follows, in the order that they would appear in the WSDL definition:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_1353f9c5-1bc9-4312-b633-9975340d2a97">The following types shall be imported (xsd:import) in the /definitions/types section:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_8190a3c2-b98b-490e-ac92-0a3386349ce2">namespace="urn:ihe:rad:xdsi-b:2009", schema="XDSI.b_ImagingDocumentSource.xsd"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_6cc862e7-d190-4906-9292-7b9db9fa5825">The baseline XDS.b schema (namespace="urn:ihe:iti:xds-b:2007", schema="XDS.b_DocumentRepository.xsd")</para>
                </listitem>
                <listitem>
                  <para xml:id="para_85e91ca3-21ca-44f4-b7df-5c5b211aa6fc">The baseline DICOM WADO-WS schema (namespace="urn:dicom:wado:ws:2011", schema="dicom.wado.ws.2011.xsd")</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_7e1bb532-b887-4b5c-ac9a-97c3fd6fdefd">The /definitions/message/part/@element attribute of the Retrieve Imaging Document Information Set Request message shall be defined an "wado:RetrieveImagingDocumentSetInformationRequest" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_116c7f29-d578-4123-93d5-f3b8e512d1ee">The /definitions/message/part/@element attribute of the Retrieve Imaging Document Set Information Response message shall be defined an "wado:RetrieveImagingDocumentSetInformationResponse" as defined below.</para>
            </listitem>
            <listitem>
              <para xml:id="para_56e34c48-7ed9-4260-83b7-8faa922c57f6">The /definitions/portType/operation/input/@wsaw:Action attribute for the Retrieve Imaging Document Set Information Request message shall be "urn:wado:2011:RetrieveImagingDocumentSetInformation".</para>
            </listitem>
            <listitem>
              <para xml:id="para_2d86be91-5f91-4b7a-b11e-5479dc972005">The /definitions/portType/operation/output/@wsaw:Action attribute for the Retrieve Imaging Document Set Information Response message shall be "urn:wado:2011:RetrieveImagingDocumentSetInformationResponse".</para>
            </listitem>
            <listitem>
              <para xml:id="para_14dd2aca-4736-4cac-b8b1-3cfbfa340f48">The /definitions/binding/operation/soap12:operation/@soapAction attribute shall be "urn:wado:2011:RetrieveImagingDocumentSetInformation".</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_e786a20d-e570-45a0-ba46-ce608c4a50d3">The &lt;wado:RetrieveImagingDocumentSetInformationRequest/&gt; element for use with the Retrieve Imaging Document Set Request Message is defined as:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_29dfcc37-73cf-440e-8a64-9c561916c328">One or more &lt;wado:StudyRequest/&gt; elements each of which includes a "studyInstanceUID" attribute identifying the study associated with the DICOM images/objects being retrieved. Each &lt;iherad:StudyRequest/&gt; element shall contain:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_dcea1864-ca0f-4ab8-a84a-0e0edf55c0ea">One or more &lt;wado:SeriesRequest/&gt; elements each of which includes a "seriesInstanceUID" attribute identifying the series associated with the DICOM images/objects being retrieved. Each &lt;iherad:SeriesRequest/&gt; element shall contain:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_3b2bdda8-b7e5-46bb-b779-247486038596">One or more &lt;wado:DocumentInformationRequest/&gt; elements, each one representing an individual document that the requestor wants to retrieve from the Web Server. Each &lt; wado:DocumentInformationRequest /&gt; element contains:</para>
                      <itemizedlist>
                        <listitem>
                          <para xml:id="para_2bab2cd8-a65c-436e-8c5a-a58346d1eacc">· An required &lt;ihe:RepositoryUniqueId/&gt; element that identifies the Web Server from which the document is to be retrieved. This value corresponds to XDSDocumentEntry.repositoryUniqueId. The RepositoryUniqueID is similar to a DICOM AE Title, but is a uniqueID assigned to the WADO-WS Web Server rather than a locally assigned string identifier. There will be a separate RepositoryUniqueID for each web service end point.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_47af5f0f-cb0d-4925-85dc-74d0e1969954">A required &lt;ihe:DocumentUniqueId/&gt; element that identifies the document within the source. For example, this value could be a SOP Instance UID obtained from a Key Object Selection (KOS) instance.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_132b9bf3-6692-4c2f-b803-5404a4917cb7">An optional &lt;ihe:HomeCommunityId/&gt; element. See the IHE Profiles for the definition and possible uses of this element.</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_29c74668-752b-405c-a3dd-7f4395e2eead">An optional &lt;wado:Anonymize/&gt; element</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_a73f97de-e60a-4496-a46e-42de05dd3a3f">A required &lt;wado:XPath/&gt; that contains the text corresponding to the XPath "filter" applied to the Native DICOM Model transposition of the object, as defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/>.</para>
                          <note>
                            <para xml:id="para_9b480422-bfd3-4926-8c7e-2641a9e02614">If the requested filter is "/", then all of the metadata is requested.</para>
                          </note>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.4.3.2" status="4" xml:id="sect_6.4.3.2">
          <title>Response</title>
          <para xml:id="para_6d1e12c6-dd65-49bf-8f67-45445162f462">A Web Server shall extract information from each document specified in a Document Set Information Request. This shall be done by the logical equivalent of:</para>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_ec390026-8f5b-444c-85d4-07ccae9e686b">convert the non-pixel data for each of the requested data into an XML encoded form</para>
            </listitem>
            <listitem>
              <para xml:id="para_d49afb45-7b6c-4c87-a83b-091f17248e9d">apply each of the wado:XPath elements to this XML encoded form</para>
            </listitem>
            <listitem>
              <para xml:id="para_a4f7da3c-484f-42e2-aa66-e87250da4008">provide the XPath response as part of the Document Set Information Response.</para>
            </listitem>
          </orderedlist>
          <para xml:id="para_bd58c42b-91d0-4c1b-b326-2409bccc6d11">See <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> for details on conversion to XML encoded form.</para>
          <para xml:id="para_5d68d57d-581c-46b1-afdf-f9a4bf016bd8">The Web Server shall return the XPath results or an error code when the document could not be processed.</para>
          <para xml:id="para_c4dd31e4-80f7-4f39-b842-91e5f1b8b49f">The &lt;wado:RetrieveImagingDocumentSetInformationResponse/&gt; element for use with the Retrieve Imaging Document Set Response Message is additionally defined as:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_94436e7e-1352-4300-a195-6dfedc7436fe">A required /wado:RetrieveImagingDocumentSetInformationResponse/rs:RegistryResponse element</para>
            </listitem>
            <listitem>
              <para xml:id="para_954857f1-dd2a-4071-aeb3-892c5b1b39f6">An optional sequence of &lt;wado:DocumentInformationResponse/&gt; elements containing:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a6ec62a3-c437-4fac-a96d-9ceb9b2499ab">A &lt;ihe:HomeCommunityId/&gt; element. The value of this element shall be the same as the value of the StudyRequest/SeriesRequest/DocumentRequest/HomeCommunityId element in the Request Message. If the &lt;ihe:HomeCommunityId/&gt; element is not present in the Request Message, this value shall not be present.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_77ed47b4-0615-477b-b2f9-9aae264abddb">A required &lt;ihe:DocumentUniqueId/&gt; that identifies the document within the Web Server. The value of this element shall be the same as the value of the StudyRequest/SeriesRequest/DocumentRequest/DocumentUniqueId element in the original Request Message. This value corresponds to the SOP Instance UID.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_596fb4c8-11b1-423b-8eb8-32c338f1854a">A conditional &lt;wado:FrameNumber/&gt; that identifies the frame within the source document. It shall be present if and only if &lt;wado:FrameNumber/&gt; was in the request.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_a1d85059-e577-4cd1-9630-28cbe074df2e">One &lt;wado:XPathResponseList/&gt; containing:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_e5b8bac6-a35a-4a70-98ce-011064afcdef">A required &lt;wado:XPathResponse&gt; that contains the XPath results for each &lt;wado:XPath/&gt; elements, in the same order as in the request encoded as an XOP Infoset. The response element shall be empty if there was no XPath match.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para xml:id="para_110252d5-5991-4a3f-92a3-36dc2122ffd1">The /RetrieveImagingDocumentSetInformationResponse/rs:RegistryResponse/@status attributes provides the overall status of the request: It shall contain one of the following values:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_a1715d76-776b-4b6a-8969-26b8cbb1e1d6">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</para>
            </listitem>
            <listitem>
              <para xml:id="para_13f017c8-3bac-4441-bd60-fc74a9a107fe">urn:ihe:iti:2007:ResponseStatusType:PartialSuccess</para>
            </listitem>
            <listitem>
              <para xml:id="para_5dc15e10-3405-4a38-b878-6d4321c50302">urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_bea47974-855e-42b5-ae59-fd651fd972d7">For each document requested in a /RetrieveImagingDocumentSetInformationRequest/StudyRequest/SeriesRequest/DocumentRequest element:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_245c5efe-b39a-40b4-8b93-6d8130fa9abe">If the document is successfully retrieved (without warning) then no /RetrieveImagingDocumentSetInformationResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be present and a /RetrieveImagingDocumentSetInformationResponse/DocumentResponse/Document element shall be returned containing the document as base64binary encoded data.</para>
            </listitem>
            <listitem>
              <para xml:id="para_ac8f25a9-58f2-4e94-833c-200c4e6c0754">If a warning is reported when retrieving the document, then a /RetrieveImagingDocumentSetInformationResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6441e911-88c3-4a77-8314-866db8b13d48">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Warning</para>
                </listitem>
                <listitem>
                  <para xml:id="para_c8abb902-282a-40c7-83d7-a71e678aefe3">@errorCode is specified</para>
                </listitem>
                <listitem>
                  <para xml:id="para_160a65ca-1729-411e-a5a6-81491e2fee85">@codeContext contains the warning message</para>
                </listitem>
                <listitem>
                  <para xml:id="para_2f7c60a3-4df6-47a0-8712-bb0ba78e3f5b">@location contains the DocumentUniqueId of the document requested</para>
                </listitem>
                <listitem>
                  <para xml:id="para_658c4afb-6944-45f2-a2e3-d1232186bff5">The document shall be returned in an instance of /RetrieveDocumentSetResponse/DocumentResponse/Document as base64binary encoded data. The returned document and warning are correlated via the DocumentUniqueId.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_128b9ff0-0f3d-405d-9d20-5c40e27b8807">If an error is reported when retrieving a document, then a /RetrieveImagingDocumentSetInformationResponse/rs:RegistryResponse/rs:RegistryErrorList/ rs:RegistryError element shall be returned with:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_cf669aef-56e5-429f-ae1d-9983285b9cc5">@severity is urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error</para>
                </listitem>
                <listitem>
                  <para xml:id="para_8deb8d95-c0da-4626-897f-45d6db4708b4">@errorCode is specified</para>
                </listitem>
                <listitem>
                  <para xml:id="para_c28423df-3808-473f-9644-b4a62d742a58">@codeContext contains the error message</para>
                </listitem>
                <listitem>
                  <para xml:id="para_88b0e7ea-8679-4f3a-8831-b49847356a67">@location contains the DocumentUniqueId of the document requested</para>
                </listitem>
                <listitem>
                  <para xml:id="para_8d835568-ff12-4098-b1a6-267a753c6f6a">No corresponding RetrieveDocumentSetResponse/DocumentResponse element shall be returned</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <para xml:id="para_885744d6-dfc0-497a-8654-75b63cde11d0">The error conditions for failures and associated error codes are given below in section 6.4.4. These errors shall be detected and the associated errorCode returned if that error occurs. Additional errors defined in the ebRS standard, in ITI TF-2: 4.1.13 "Error Reporting", and defined by the implementer may be returned.</para>
        </section>
      </section>
      <section label="6.4.4" status="3" xml:id="sect_6.4.4">
        <title>Error Codes</title>
        <para xml:id="para_adf160d6-4a23-48e6-b0ed-80f1cb710697">The following errorCodes are defined and shall be used to report any of the associated error and warning situations. Other errorCodes may be present for other error and warning situations.</para>
        <table frame="box" label="6.4-1" rules="all" xml:id="table_6.4-1">
          <caption>Error Codes</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_7d2cbd6f-c84f-4d51-aa32-a68ed21dc68d">Error Code</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_4f550665-2633-413a-8694-f49d92c9d14c">Error Situation</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_50412378-0eba-487b-9768-77c0197865d9">urn:dicom:wado:0001</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f3f91c01-16c5-4a20-9b58-b4f9a99f542e">Unable to anonymize the requested instance(s).</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_e348629d-8d75-4002-9524-0fc107c5c983">urn:dicom:wado:0002</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_fa90369e-43a3-4237-8340-3e815060bbb3">Web Server does not support anonymization.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_9a3c752a-25da-4864-b37b-42ec98de6c5e">urn:dicom:wado:0003</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_5f041d73-a370-4280-b183-053c332a234d">The requested instance(s) are not immediately available, but can be made available by manual request.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_4d2ba47c-a23e-4045-9437-048e9c06d1fe">urn:dicom:wado:0004</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_acecea8f-b2f7-4b1e-993f-f8740578e9e4">Instance is no longer available, e.g., document retention rules have caused it to be removed or relocated.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_98e1f274-c78d-4cde-b9cb-ac71c5dd60cb">urn:dicom:wado:0005</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_77b4e12c-d80e-4250-a8aa-588f03bcebc5">The requested instance(s) cannot be returned because the size or count exceeds resource limits.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d62c9c68-db00-4525-826f-614c37f5adce">urn:dicom:wado:0006</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_bbc1ed6d-09ec-49ff-bfc1-f3e78545388e">Web Server does not support the requested format or transfer syntax.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_752fab0d-422a-47dd-9452-d5df9fd5fc06">urn:dicom:wado:0007</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1f43b3f5-734a-490d-b26d-884a152559a6">The requested instance(s) cannot be provided in the requested format or transfer syntax.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_22ed3412-95b8-465a-9d40-ae3e6e882154">urn:dicom:wado:0008</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_0ba7cb76-fc52-4e98-a697-6906fb461477">Single image format is not available for multi-frame images.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d7de2195-2e4e-4ee5-8a42-a52b0ed93572">urn:dicom:wado:0009</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_69eca14d-5328-4a45-b89a-0c6fbf2a8b26">Identifier does not match SOP Class (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_4f4fac23-baeb-4e5e-8b16-72bfe464b8c3">urn:dicom:wado:0010</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_897d35a2-7d30-44b4-8b26-636f8f32f4bb">Inconsistent identifiers, e.g., Study and Series are correct but Series is in a different Study (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d293d11b-78aa-41c4-9208-ced4d457f893">urn:dicom:wado:0011</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f037d53e-a176-4ebd-b784-4477925e1be7">SOP Class not supported (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_68030056-a87e-4e0b-b59e-72cbc908141e">urn:dicom:wado:0012</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_20b8a5b8-69b1-4180-a348-f904e8673243">Invalid parameter value in request (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3e901ac8-3441-4017-8793-783544de821c">urn:dicom:wado:0013</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3bad9abd-f9d6-4c79-8528-59b116f8c8a7">Unsupported parameter in request (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f551786f-c158-4fef-8c05-6146e1bbc213">urn:dicom:wado:0014</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_46c6c24a-2903-4c60-8529-ae3c749230dc">Processing Failure (see <olink targetdoc="PS3.7" targetptr="PS3.7" xrefstyle="select: labelnumber"/> C-MOVE)</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3202894d-3632-4dc7-9c0a-1201f8df6f51">urn:dicom:wado:0015</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_cd91e52c-1ac3-4b9a-9ef0-823cd3529f4f">Study Instance UID not known</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d89d2b33-c34d-435c-b7fe-07192de065b6">urn:dicom:wado:0016</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_c55a8639-faae-46de-a3dc-80f5b6f5102b">Series Instance UID not known</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_ee7561e6-5d1a-4840-ad97-043260fa5e54">urn:dicom:wado:0017</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_fa9b7cbd-7bdf-4343-9aa1-b48b73262261">Document UID not known</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3cde1061-e8c8-46f4-8292-0f3bdde2a263">urn:dicom:wado:0018</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_55f94979-4e0d-44a0-9a53-325b742ef711">Out of range Frame number</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_e4cf4f83-adce-4da4-b40b-8a0a4c1cb31e">urn:dicom:wado:0019</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_ad323f6b-1f51-47dc-ba52-afc0e6d8c65f">Presentation UID not known</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_8f55660b-ce44-4850-be9d-c1fcc4dc6674">urn:dicom:wado:0020</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_b2ded10b-8ad4-4dc2-b729-2ccc36b4217f">Presentation Series UID not known</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="6.5" status="2" xml:id="sect_6.5">
      <title>WADO-RS Request/Response</title>
      <para xml:id="para_c799e159-7f68-4e60-9c6e-e39b03d1352e">The DICOM RESTful Service defines several action types. An implementation shall support all the following six action types:</para>
      <orderedlist numeration="arabic">
        <listitem>
          <para xml:id="para_fda162dc-4737-4e9a-bcad-a6e273e25215">RetrieveStudy</para>
          <para xml:id="para_68bffde5-59d9-471c-895e-0072aa9d765b">This action retrieves the set of DICOM instances associated with a given study unique identifier (UID). The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        </listitem>
        <listitem>
          <para xml:id="para_79d33a8c-8769-4e93-ae5d-c274a655e463">RetrieveSeries</para>
          <para xml:id="para_c741e076-752f-4f54-b4ee-5003619dc3e4">This action retrieves the set of DICOM instances associated with a given study and series UID. The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        </listitem>
        <listitem>
          <para xml:id="para_5465c1cc-d535-4025-b80c-8ff143ca50bc">RetrieveInstance</para>
          <para xml:id="para_b2b32898-faab-4403-b885-749d266f973d">This action retrieves the DICOM instance associated with the given study, series, and SOP Instance UID. The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        </listitem>
        <listitem>
          <para xml:id="para_7bd8aaf1-3c21-4306-affd-497a309795c6">RetrieveFrames</para>
          <para xml:id="para_6cb1726f-a5ae-448f-b676-2210be6f0094">This action retrieves the DICOM frames for a given study, series, SOP Instance UID, and frame numbers. The response is pixel data, and encapsulated in a multipart MIME response.</para>
        </listitem>
        <listitem>
          <para xml:id="para_026e2557-2245-44e2-a23b-49910b5d3d79">RetrieveBulkdata</para>
          <para xml:id="para_1e25b112-9bbc-4ab5-b3e1-f17a8d547f16">This action retrieves the bulk data for a given bulk data URL. The response is a single bulk data item.</para>
        </listitem>
        <listitem>
          <para xml:id="para_fa0393da-e72b-4590-8d84-cd8045b9496a">RetrieveMetadata</para>
          <para xml:id="para_e9c27094-7ef7-4f2c-ae33-1905a55562e9">This action retrieves the DICOM instances presented as the study, series, or instance metadata with the bulk data removed.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_60c3b57f-cc2b-4057-ab07-f5a03cec6ec6">DICOM objects returned shall be <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> binary objects encoded in a requested Transfer Syntax (Explicit VR Little Endian by default) with one message part per DICOM Instance.</para>
      <para xml:id="para_3c36de3f-5ea3-4aa8-8d0d-c884db3b6ac7">
        <figure label="6.5-1" pgwide="1" xml:id="figure_6.5-1">
          <title>Mapping between IOD and HTTP message parts</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="figures/PS3.18_6.5-1.svg"/>
              <!--<imagedata fileref="part18_fromword_files/image004.png"/>-->
            </imageobject>
          </mediaobject>
        </figure>
      </para>
      <para xml:id="para_1ae103fb-c328-4245-8305-33d973a63e11">Other types of responses will be encoded in the following manner: (see <xref linkend="figure_6.5-1" xrefstyle="select: label"/>).</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_4492b719-db9b-4fc4-b452-3db9a089e7dd">All XML responses shall be encoded as described in the Native DICOM Model defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> with one message part per XML object.</para>
        </listitem>
        <listitem>
          <para xml:id="para_45565e24-8aa6-4d9f-be94-3e6f202ee156">All JSON responses shall be encoded as a DICOM JSON Model Object as defined in <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>.</para>
        </listitem>
        <listitem>
          <para xml:id="para_66fe8683-0d7c-4c31-bbf8-3be8310ec4f3">Uncompressed bulk and pixel data shall be encoded in a Little Endian format using the application/octet-stream media type with one message part per bulk data item.</para>
        </listitem>
        <listitem>
          <para xml:id="para_0cc3af4a-81c4-45d6-8918-53ec90698180">Compressed pixel data may be encoded in one of three ways:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_3c138d7a-d394-45ac-a9b0-bf2f8ab086f3">Single-frame pixel data encoded using a single-frame media type (one message part)</para>
            </listitem>
            <listitem>
              <para xml:id="para_0de22790-c8aa-4098-ae75-3553ec8bf8a7">Multi-frame pixel data encoded using a single-frame media type (one frame per message part)</para>
            </listitem>
            <listitem>
              <para xml:id="para_a8214108-cb78-4115-b387-473e4735216d">Multi-frame or video pixel data encoded using a multi-frame media type (multiple frames in one message part)</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
      <para xml:id="para_36ccb1c6-44f7-443e-a2e5-68a269aeef9d">Compressed pixel data shall be encoded using the following Media Types. Media Types corresponding to several DICOM Transfer Syntax UIDs require a transfer-syntax parameter, as shown in <xref linkend="table_6.5-1" xrefstyle="select: label"/>, to disambiguate the request.</para>
      <note>
        <para xml:id="para_e58a1492-8b31-4209-8e22-2946b6bba9d2">If the Transfer Syntax is not specified, then a reversible (lossless) encoding is used.</para>
      </note>
      <table frame="box" label="6.5-1" rules="all" xml:id="table_6.5-1">
        <caption>Media Type Mapping to Transfer Syntax</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_d4c279d5-b36d-424d-a3db-683c0452da23">
                <emphasis role="bold">DICOM Transfer Syntax UID</emphasis>
              </para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_44e244b0-3d77-4c63-903a-34f71aa43ed6">
                <emphasis role="bold">Media Type and Parameters</emphasis>
              </para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="2" rowspan="1">
              <para xml:id="para_f5e2c4eb-1b68-43b1-bf43-348daace233a">
                <emphasis role="bold">Single-frame media types</emphasis>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_34760de2-cd86-4606-85f0-35c4d388f853">1.2.840.10008.1.2.4.50</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_ef999cc6-a3d4-49d1-acec-68652f5d1798">image/dicom+jpeg; transfer-syntax=1.2.840.10008.1.2.4.50</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_47f0e4e0-f643-4047-8fd9-c38e04ba73f7">1.2.840.10008.1.2.4.51</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_94854995-2b4a-4502-af8f-d93480cf3bdb">image/dicom+jpeg; transfer-syntax=1.2.840.10008.1.2.4.51</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_667cdab1-361a-44e3-93b2-8b6c461fe6f5">1.2.840.10008.1.2.4.57</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_3e20926f-7a5d-41c4-a0b2-e701d7e688c8">image/dicom+jpeg; transfer-syntax=1.2.840.10008.1.2.4.57</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1ad89c7d-9ac3-4e0d-9306-836c01aa26a7">1.2.840.10008.1.2.4.70</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b31ef9cf-4652-45aa-b791-4449320eccf8">image/dicom+jpeg</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_110e71cf-579a-467f-afcb-5284cb881ba9">1.2.840.10008.1.2.4.70</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_412e6282-d926-4c42-b8ca-2ddc2be66470">image/dicom+jpeg; transfer-syntax=1.2.840.10008.1.2.4.70</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_ead8e178-4064-4e60-b781-b7443184d4ea">1.2.840.10008.1.2.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a132e23d-2bdf-414a-ad9d-dc5dde82376b">image/dicom+rle</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a6a5fd76-9d2b-447c-ac55-aecd49597976">1.2.840.10008.1.2.5</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5d05c0fb-9d4d-4d53-bbbb-64f182ba4e8f">image/dicom+rle; transfer-syntax=1.2.840.10008.1.2.5</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1fdb4b88-88c5-41f9-b210-9e2be3dc86c3">1.2.840.10008.1.2.4.80</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_535d3d19-a3c1-457a-a639-84531a10df4f">image/dicom+jpeg-ls</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_97fd5ec8-1cca-4124-8b55-a55a2527128e">1.2.840.10008.1.2.4.80</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d1677850-33f4-45dd-9e51-bd5aa4890df8">image/dicom+jpeg-ls; transfer-syntax=1.2.840.10008.1.2.4.80</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_577922a0-8caf-41bf-8e4d-161428a78638">1.2.840.10008.1.2.4.81</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_563b2bd2-73e5-4b6a-8be4-1a3b0fbff1ad">image/dicom+jpeg-ls; transfer-syntax=1.2.840.10008.1.2.4.81</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0321cd16-9761-4368-a5e1-e25856fa31d3">1.2.840.10008.1.2.4.90</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_23842b20-e8a7-4200-a8bc-7cf26e7cc5ea">image/dicom+jp2</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_de1aa455-7263-4993-a7e9-2361cc1cb093">1.2.840.10008.1.2.4.90</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_52bd230b-c279-4fb2-8772-6033fe8fcbc5">image/dicom+jp2; transfer-syntax=1.2.840.10008.1.2.4.90</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_16d67ea6-89cf-49c3-8a27-c7ab9b40374a">1.2.840.10008.1.2.4.91</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c2657c6f-57eb-479a-b707-1c9ddf57120f">image/dicom+jp2; transfer-syntax=1.2.840.10008.1.2.4.91</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f83b7886-f9eb-4291-987a-f7d1b1bc3a07">1.2.840.10008.1.2.4.92</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a89433a9-0632-4c65-90ee-022c86a4b0df">image/dicom+jpx</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_eecbda04-7818-4ff4-a7c4-a112dc2e6008">1.2.840.10008.1.2.4.92</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b725587f-53d3-4c97-a680-84f41f9e870e">image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.92</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_aa8da443-5f27-4df2-8f70-e669c6aa8f51">1.2.840.10008.1.2.4.93</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_5e1ccecd-c025-4de1-9fa6-3b4b029e2d16">image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.93</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="2" rowspan="1">
              <para xml:id="para_419e288b-7960-49aa-9dc1-ecd2d63071c3">
                <emphasis role="bold">Multi-frame media types</emphasis>
              </para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_6ba29fc4-9c57-4634-8d29-8b971e763f01">1.2.840.10008.1.2.4.92</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_af6b978e-5f1f-4143-9120-46eabb8456bf">image/dicom+jpx</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_bdef8afa-8c14-460f-9545-7eda4497b1f9">1.2.840.10008.1.2.4.92</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_29ff0b9c-50e5-4110-b184-33e802e4dda6">image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.92</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_e9380cbd-57fd-4385-b08e-4f193713488a">1.2.840.10008.1.2.4.93</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_b4263fd8-19a4-4deb-ba87-533e69e288d3">image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.93</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f45eea88-9a2e-4e64-b7c5-de77b278bd12">1.2.840.10008.1.2.4.100</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8692e601-a5db-450c-939a-d2edc7d7fca1">video/mpeg; transfer-syntax=1.2.840.10008.1.2.4.100</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f2e86fd5-a440-45eb-9756-ac8687916689">1.2.840.10008.1.2.4.101</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_d102f92f-b151-4e76-9c92-26b1bc605692">video/mpeg; transfer-syntax=1.2.840.10008.1.2.4.101</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f74083e1-1df8-41b6-b3c4-a882ee3575f4">1.2.840.10008.1.2.4.102</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c0668762-20ee-4e58-ba9e-6e4a84d91691">video/mp4; transfer-syntax=1.2.840.10008.1.2.4.102</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_0e7e6c60-ec11-438a-ad69-51d2ca29f1bf">1.2.840.10008.1.2.4.103</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_9c6455e4-45fb-42d6-a06d-b2f30aba8c8c">video/mp4; transfer-syntax=1.2.840.10008.1.2.4.103</para>
            </td>
          </tr>
        </tbody>
      </table>
      <note>
        <para xml:id="para_7a2148a0-3be4-4cc2-b59f-991a61f426a0">For the media type image/dicom+jp2 Transfer Syntaxes, 1.2.840.10008.1.2.4.90 and 1.2.840.10008.1.2.4.91, the image does not include the jp2 wrapper.</para>
      </note>
      <para xml:id="para_9f542d5e-641d-4bc7-bcbf-1beab1762d68">HTTP Request field Accept is used in the header lines by the client in a HTTP protocol transaction to indicate the data responses that are acceptable from the server. HTTP Response fields Content-Type and parameters are used in the header lines by the server in a HTTP protocol transaction to indicate the type and encoding of data returning to the client. All lines are RFC822 format headers. All HTTP header fields whose use is not defined by WADO-RS are presumed to have the meaning defined by the HTTP standard.</para>
      <para xml:id="para_35d2dd2d-e4a0-4d75-98e2-a3c992a9e7c0">The server is required to support uncompressed bulk and pixel data (application/octet-stream) and must be able to deliver all bulk data in that form unless it is available only in a lossy-compressed format.</para>
      <section label="6.5.1" status="3" xml:id="sect_6.5.1">
        <title>WADO-RS - RetrieveStudy</title>
        <para xml:id="para_856692f0-cc34-447d-94de-0101f09749f7">This action retrieves the set of DICOM instances associated with a given study unique identifier (UID). The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        <section label="6.5.1.1" status="4" xml:id="sect_6.5.1.1">
          <title>Request</title>
          <para xml:id="para_bea90490-2686-4753-a4cc-e5ad37e6ea6c">The specific Services resource to be used for the RetrieveStudy action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_e48f2166-3632-4d22-af45-8c059c7933ae">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_1a85fe47-9999-4596-b006-837ea855198d">{SERVICE}/studies/{StudyInstanceUID}, where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_970a32d2-9cb5-4239-95f5-ccb1d882437c">{SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_8088eb29-28b0-47a6-a438-5d946f83e646">{StudyInstanceUID} is the study instance UID for a single study.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_8f40aedb-4934-4a64-9e4c-658e612b325a">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_15a5033d-e63d-427b-bfc4-a9162d45b5c9">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_b27b5987-1c80-4873-805d-e59704ce9667">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_92491e89-862d-4cad-afd0-faeaa9348ac6">Accept - A comma-separated list of representation schemes, in preference order, which will be accepted by the service in the response to this request. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_865b7caa-e699-4c91-9b65-05409606bf0e">multipart/related; type=application/dicom; [transfer-syntax={TransferSyntaxUID}]</para>
                      <para xml:id="para_39831c16-92e1-4349-82a6-14734ef99374">Specifies that the response can be DICOM Instances encoded in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> format. If <emphasis role="italic">transfer-syntax</emphasis> is not specified the server can freely choose which Transfer Syntax to use for each Instance.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_e887a534-d583-4466-a5ad-d53d8e53cddc">multipart/related; type=application/octet-stream</para>
                      <para xml:id="para_64e4c1b3-9a68-415a-bcb0-36d85d01bfa1">Specifies that the response can be Little Endian uncompressed bulk data.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_1bbb562c-4cfe-427b-b9f4-5dcda64bb00e">multipart/related; type={MediaType}</para>
                      <para xml:id="para_3bbba0da-8c24-46b2-b3df-5433f955a261">Specifies that the response can be pixel data encoded using a {MediaType} listed in <xref linkend="table_6.5-1" xrefstyle="select: label"/> (including parameters).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <note>
            <para xml:id="para_9321531b-4d2b-408c-a904-be8393e2f158">An example of a more complicated accept header with multiple transfer syntaxes:</para>
            <itemizedlist mark="none">
              <listitem>
                <para xml:id="para_2f0b2e3d-c544-49e1-985b-f9b9a4d0c6ec">User is interested in receiving JPEG2000 pixel data in lossless or compressed format but is willing to accept JPEG as well.</para>
                <itemizedlist mark="none">
                  <listitem>
                    <para xml:id="para_1ce9bd91-680f-46c6-ab24-b5eccefc3953">The Accept request would contain the following comma-separated parameters:</para>
                    <itemizedlist mark="none">
                      <listitem>
                        <para xml:id="para_150b9984-c227-4978-9eb3-c583979183ed">Accept: multipart/related=image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.92,, multipart/related=image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.93, multipart/related=image/dicom+jpeg</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_377cdd2c-37fe-43d2-8f9e-7f9967b9a3c7">or alternatively, multiple Accept headers:</para>
                    <itemizedlist mark="none">
                      <listitem>
                        <para xml:id="para_9fa19caf-1383-47db-8c74-a6511e3fa399">Accept: multipart/related=image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.92,</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_4ad5fba5-de3e-40a9-a758-7ad0399a785f">Accept: multipart/related=image/dicom+jpx; transfer-syntax=1.2.840.10008.1.2.4.93</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_518254af-075c-4e6a-9808-5d9063d59c00">Accept: multipart/related=application/dicom+jpeg</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </note>
        </section>
        <section label="6.5.1.2" status="4" xml:id="sect_6.5.1.2">
          <title>Response</title>
          <para xml:id="para_799420b5-043d-4f6f-8533-77ef6d640717">The Server shall provide the document(s) indicated in the request. In order to parse the bulk data items it is necessary to also retrieve the metadata for the Study.</para>
          <para xml:id="para_91d95a83-b2a4-43c4-920d-8d8e1f06a479">The Server shall return the document(s), or an error code when the document(s) cannot be returned. If the server cannot convert all of the data to any of the requested media types/Transfer Syntaxes, then an error code shall be returned, either a "Not Acceptable" response if no data is returned or a "Partial Content" response if only some data is returned.</para>
          <para xml:id="para_2fbf396e-95a2-47f5-9e2b-03b2f81c61b3">The client can compare the SOP Instance UIDs or bulk data URLs in the metadata and the message response to determine which bulk data elements have been returned.</para>
          <para xml:id="para_05efc00c-752a-4053-9af9-503d161552dd">All response formats have a content type of multipart/related with a message boundary separator. The response format depends on the Accept header specified in the request.</para>
          <section label="6.5.1.2.1" status="5" xml:id="sect_6.5.1.2.1">
            <title>DICOM Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_47fc0a51-913c-4e8f-8054-f5a47e6e993c">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_1c4c0d0a-5abd-4b27-b0e6-d39bb656315c">multipart/related; type=application/dicom; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_da655bde-d9e4-40b8-803c-acc8605545b0">The entire multipart response contains every instance for the specified Study that can be converted to one of the requested Transfer Syntaxes.</para>
              </listitem>
              <listitem>
                <para xml:id="para_99a1a2f9-8f41-48de-be66-86efdc0170a5">Each item in the multipart response represents a DICOM SOP Instance with the following http headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_239f4ee8-25b7-40e3-b43c-22de8773e252">Content-Type: application/dicom</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.5.1.2.2" status="5" xml:id="sect_6.5.1.2.2">
            <title>Bulk Data Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_f3467314-d6c6-4b26-a6a5-37fa9e775923">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_da8570f1-5580-4aa4-bd00-c8bfe9f54d3b">multipart/related; type=application/octet-stream; boundary={MessageBoundary}</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_5838ac1d-867c-4427-9202-998daa6ef2bd">multipart/related; type={MediaType}; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_7585576b-6153-463c-9906-44191bae476b">The entire multipart response contains all bulk data for the specified Study that can be converted to one of the requested media types.</para>
              </listitem>
              <listitem>
                <para xml:id="para_266be24a-2599-4a58-8b4c-8af0bc0b4b89">Each item in the response is one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_becfc464-3867-4a36-bd49-cc8e7b2a76a2">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_6cdcafe9-d41b-4169-af93-632913dff9df">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_8cf96a13-896e-4edf-8403-50296144ed65">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_595dcddb-d600-4778-9eba-c428486e2353">a compressed bulk data element from a SOP Instance in the Study encoded in a single-frame compression {MediaType} with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_7c019759-4d6e-4599-bfdb-bee889868187">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_a1a9c1ad-27c9-442a-8f39-aad1c14acc2f">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_b0bdfddc-539c-4f40-844a-79accbcf3cc3">a compressed frame from a multi-frame SOP Instance in the Study encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_87568e93-5178-4576-840b-3f536c8f6c9b">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_a7a1f207-a0f3-4966-9582-1f37786d5818">Content-Location: {BulkDataURL}/frames/{FrameNumber}</para>
                        <note>
                          <para xml:id="para_2992af6e-6380-4a80-8c3c-f5cd2e9f08ea">Each frame will come in a separate part.</para>
                        </note>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_838a705b-4088-4b90-858e-862be656fdcf">a set of compressed frames from a SOP Instance in the Study encoded in a multi-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_c7220057-c756-499e-a3c8-db82e9a456f9">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_89e587a8-2d81-48de-b8af-bad95637c685">Content-Location: {BulkDataURL}[/frames/{FrameList}]</para>
                        <itemizedlist>
                          <listitem>
                            <para xml:id="para_ec708362-9b4f-436c-809f-280bc3e0583f">{FrameList} is a list of frames separated by %2C (comma). It may be omitted if the message part includes all frames for the specified bulk pixel data object.</para>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.2" status="3" xml:id="sect_6.5.2">
        <title>WADO-RS - RetrieveSeries</title>
        <para xml:id="para_c91d4213-be1f-425c-abe5-123e34d6dc99">This action retrieves the set of DICOM instances associated with a given study and series UID. The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        <section label="6.5.2.1" status="4" xml:id="sect_6.5.2.1">
          <title>Request</title>
          <para xml:id="para_7cf96350-5f65-4232-a965-8503609bcf42">The specific resource to be used for the RetrieveSeries action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_027fdc07-ae3e-4f4a-9038-d13dd0a5b63f">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_4b6e03ff-1fe8-4c16-aa80-7933682df25b">{SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}, where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_5eb7b566-9925-486c-a7ff-9304837eaf8e">{SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_0cafcbd2-554c-4202-8b03-c643d986a3af">{StudyInstanceUID} is the study instance UID for a single study.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_3017b0b7-fffa-4502-a875-7055a31b68e6">{SeriesInstanceUID} is the series instance UID for a single series.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_4be2c7a3-3a77-4ead-9b35-4698daf43e33">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_5cb45151-0f00-4743-bb57-938d57bda001">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_cab37ee5-6eb1-4eef-abf7-5f191ccd46ac">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_33992c3f-edfe-4687-8c42-6882f5fc87e2">Accept - A comma-separated list of representation schemes, in preference order, which will be accepted by the service in the response to this request. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_5d1806de-2810-4a96-993f-dae5283222f6">multipart/related; type=application/dicom; [transfer-syntax={TransferSyntaxUID}]</para>
                      <para xml:id="para_244c5ef3-40f5-4ad1-aa93-ed067e9300ba">Specifies that the response can be DICOM Instances encoded in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> format. If <emphasis role="italic">transfer-syntax</emphasis> is not specified the server can freely choose which Transfer Syntax to use for each Instance.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_4accd2cc-7585-4a09-8422-747397ceb781">multipart/related; type=application/octet-stream;</para>
                      <para xml:id="para_10bb16ce-e2c1-4c2a-a5e0-ea5f8dcc8fb9">Specifies that the response can be Little Endian uncompressed bulk data.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_f5cb6e46-2e30-48c6-b723-226614cb7bec">multipart/related; type={MediaType}</para>
                      <para xml:id="para_9e7139a9-a8ee-44d2-8370-2a91e9e6aaf8">Specifies that the response can be pixel data encoded using a {MediaType} listed in <xref linkend="table_6.5-1" xrefstyle="select: label"/> (including parameters).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.5.2.2" status="4" xml:id="sect_6.5.2.2">
          <title>Response</title>
          <para xml:id="para_8ea2bd78-772e-4886-bfb2-b9512823f07a">The Server shall provide the document(s) indicated in the request. In order to parse the bulk data items it is necessary to also retrieve the corresponding metadata for the specified Study, Series, or Instance.</para>
          <para xml:id="para_426f3e1e-0f0e-41f6-a43a-d10306482ce0">The Server shall return the document(s), or an error code when the document(s) cannot be returned. If the server cannot convert all of the data to any of the requested media types/Transfer Syntaxes, then an error code shall be returned, either a "Not Acceptable" response if no data is returned or a "Partial Content" response if only some data is returned.</para>
          <para xml:id="para_5204e010-64df-48e0-82c4-0f682d70e818">The client can compare the SOP Instance UIDs or bulk data URLs in the metadata and the message response to determine which bulk data elements have been returned.</para>
          <para xml:id="para_893a4b56-3096-4a37-8143-0f9f63b897c0">All response formats have a content type of multipart/related with a message boundary separator. The response format depends on the Accept header specified in the request.</para>
          <section label="6.5.2.2.1" status="5" xml:id="sect_6.5.2.2.1">
            <title>DICOM Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_cb126611-4687-470a-b047-dbe349faa7d1">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_9201f45c-078f-4851-a8ed-89e827fbeb28">multipart/related; type=application/dicom; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_c5d4e899-a104-4022-a4e3-cabf128b29ce">The entire multipart response contains every instance for the specified Series that can be converted to one of the requested Transfer Syntaxes.</para>
              </listitem>
              <listitem>
                <para xml:id="para_8eaca26b-5f8f-49f0-9c86-7eba3923c5cc">Each item in the multipart response represents a DICOM SOP Instance with the following http headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_61af6413-39f9-4f6f-8635-a900df39e6ba">Content-Type: application/dicom</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.5.2.2.2" status="5" xml:id="sect_6.5.2.2.2">
            <title>Bulk Data Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_6edb29ce-c58b-4332-8739-6afb5a3a0264">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_c319b120-c26f-4756-aa91-d497302f3c53">multipart/related; type= application/octet-stream; boundary={MessageBoundary}</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_1a0e78d6-2ed1-4fa2-871d-bb5c6f8244b2">multipart/related; type={MediaType}; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_02a50cc7-ec16-470d-9d7d-d19d6c6eef38">The entire multipart response contains all bulk data for the specified Series that can be converted to one of the requested media types.</para>
              </listitem>
              <listitem>
                <para xml:id="para_7f6811d7-14cf-4d43-b731-a791da5dab84">Each item in the response is one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_9bfdf805-60e2-4908-9c30-b1289403bcfc">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_71483e32-f2d9-4af3-9db6-0717e0914a39">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_d2aebfbf-3190-4dca-a6cd-24d5f8047411">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_5f934188-4cab-4aa0-a701-e83901cf6a58">a compressed bulk data element from a SOP Instance in the Series encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_cde77699-67d8-43e7-8783-4526bc10a12e">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_0597ec4a-c783-4007-81a1-d4242bbad83c">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_e1484a70-4628-43f1-acbe-f7271b15735f">a compressed frame from a multi-frame SOP Instance in the Series encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_051bdabf-5504-44a4-83b4-8e747966413d">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_629d476e-7cf8-4906-bb1d-1b826e287c87">Content-Location: {BulkDataURL}/frames/{FrameNumber}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_d2150d49-915f-4de6-bed6-9cf4fc87ef8f">a set of compressed frames from a multi-frame SOP Instance in the Series encoded in a multi-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_112b6caf-917d-4ac5-98be-fd14cff2d6e3">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_337c4a2f-be52-4b05-ba48-864837806aae">Content-Location: {BulkDataURL}[/frames/{FrameList}]</para>
                        <itemizedlist>
                          <listitem>
                            <para xml:id="para_b80bc219-15bc-40ee-87a9-587e4f1979ec">{FrameList} is a list of frames separated by %2C (comma). It may be omitted if the message part includes all frames for the specified bulk pixel data object.</para>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.3" status="3" xml:id="sect_6.5.3">
        <title>WADO-RS - RetrieveInstance</title>
        <para xml:id="para_50c27866-ebf7-41be-8d90-8d6ba919f2a2">This action retrieves the DICOM instance associated with the given study, series, and SOP Instance UID. The response can be DICOM or bulk data depending on the "Accept" type, and is encapsulated in a multipart MIME response.</para>
        <section label="6.5.3.1" status="4" xml:id="sect_6.5.3.1">
          <title>Request</title>
          <para xml:id="para_8637bc17-ef71-452d-9617-81edced9117b">The specific resource to be used for the RetrieveInstance action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_fcdbb819-bfd8-451c-a3b1-00a6e128b35b">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_85498d2e-0895-4716-95c4-8a6e8432d217">{SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}/instances/{SOPInstanceUID}, where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_1835636a-197c-48c2-844c-201c642338c9">{SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_89414d19-c468-481a-be2c-6520f75b234e">{StudyInstanceUID} is the study instance UID for a single study.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_3a22bc92-378f-4270-a4cf-ca8bb54378e9">{SeriesInstanceUID} is the series instance UID for a single series.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_264bfbd0-162a-470e-9917-7b54f301c5e3">{SOPInstanceUID} is the SOP Instance UID for a single SOP Instance.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_4b523e06-6e1a-4a82-b054-53b7f579d76c">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a63d7700-aac9-48c9-b8d3-2ea6b5e1d72b">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_13941b57-14e6-4149-9b88-097703d3ba0c">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_1542be4e-7431-43bf-aeca-e1dc6fa18a1b">Accept - A comma-separated list of representation schemes, in preference order, which will be accepted by the service in the response to this request. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_26ac53ed-f69a-492c-8ecb-1f9a685afc53">multipart/related; type=application/dicom; [transfer-syntax={TransferSyntaxUID}]</para>
                      <para xml:id="para_7f340e97-89ef-4dec-bd66-94fefb6048a1">Specifies that the response can be DICOM Instances encoded in <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> format. If <emphasis role="italic">transfer-syntax</emphasis> is not specified the server can freely choose which Transfer Syntax to use for each Instance.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_a7046d7f-84ca-45c2-ac2d-a2ff917e4f6f">multipart/related; type=application/octet-stream;</para>
                      <para xml:id="para_84bbdc5f-f7c8-4e45-9e79-c1e1ad878962">Specifies that the response can be Little Endian uncompressed bulk data.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_31edf938-94b9-4e35-b660-3813411ac66b">multipart/related; type={MediaType}</para>
                      <para xml:id="para_9c980d88-38d5-4b49-a4f4-d54caa62ee0f">Specifies that the response can be pixel data encoded using a {MediaType} listed in <xref linkend="table_6.5-1" xrefstyle="select: label"/> (including parameters).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.5.3.2" status="4" xml:id="sect_6.5.3.2">
          <title>Response</title>
          <para xml:id="para_aa94e701-80d4-4550-bdb6-693e32b75c99">The Server shall provide either a single DICOM <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> object for the SOP Instance or one or more bulk data items. In order to parse the bulk data items it is necessary to also retrieve the corresponding metadata for the specified Study, Series, or Instance.</para>
          <para xml:id="para_0cf8d056-d08d-41c6-bf83-e887a0d52b75">The Server shall return the document(s), or an error code when the document(s) cannot be returned. If the server cannot convert all of the bulk data to any of the requested media types, then an error code shall be returned, either a "Not Acceptable" response if no data is returned or a "Partial Content" response if only some data is returned.</para>
          <para xml:id="para_486eeb1e-a589-4950-9dd4-e75f5c861b09">The client can compare the bulk data URLs in the metadata and the message response to determine which bulk data elements have been returned.</para>
          <para xml:id="para_683dd0fd-eb0e-4519-8d63-53dc099c97d6">All response formats have a content type of multipart/related with a message boundary separator. The response format depends on the Accept header specified in the request.</para>
          <section label="6.5.3.2.1" status="5" xml:id="sect_6.5.3.2.1">
            <title>DICOM Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_41cfb3c0-52d0-481d-bd31-b6fad6e2fca1">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_887a7191-0f8b-480e-b425-ba02e5f5d2da">multipart/related; type=application/dicom; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_63c32410-652d-442e-b31e-fb0786e316f6">The multipart response contains a single item representing the specified DICOM SOP Instance with the following http headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_7fa15517-ada9-406f-8d83-34d4b90ea21d">Content-Type: application/dicom</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.5.3.2.2" status="5" xml:id="sect_6.5.3.2.2">
            <title>Bulk Data Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_325d6be2-1ccd-4f3e-94df-52d40989cd06">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_f2f30c3b-6682-4fad-8ffe-a02048afafc6">multipart/related; type=application/octet-stream; boundary={MessageBoundary}</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_ae3f9223-462b-43a5-9fec-ac3636b64b9a">multipart/related; type={MediaType}; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_0ad44ac4-fcb7-48e9-ba46-1c18500344ec">The entire multipart response contains all bulk data for the specified Instance that can be converted to one of the requested media types.</para>
              </listitem>
              <listitem>
                <para xml:id="para_5edea80c-9f69-40c9-b946-27a2c7d19d4a">Each item in the response is one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_e49bab93-b8f5-4e64-9b1d-9e86721362d2">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_65d201d9-6be3-4849-901d-514bcb489911">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_de616dfc-21c1-4dc1-ae43-682a91960b29">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_c0e2b99d-0097-4ea9-8df3-28439ea9c7c0">a compressed bulk data element from a SOP Instance encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_96fb8aff-a484-44f3-8129-97c919d2f4bf">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_7e9d8d80-294d-47b3-b84e-6f1ad4ea9bed">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_55343a82-9d45-43ee-bbf0-3ab1dd370d18">a compressed frame from a multi-frame SOP Instance encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_7cbaf002-3136-45e3-9f16-a263d3df3831">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_d41ce7a5-df8e-4d8b-ad44-b611477ba357">Content-Location: {BulkDataURL}/frames/{FrameNumber}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_6ae47e5b-f7f3-49a6-920e-ab5a4dbc8be1">a set of compressed frames from a multi-frame SOP Instance encoded in a multi-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_3b1ab85d-13af-46bf-b4ed-4f0216fb004a">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_115b9ceb-7232-4083-a171-4809e5655b36">Content-Location: {BulkDataURL}[/frames/{FrameList}]</para>
                        <itemizedlist>
                          <listitem>
                            <para xml:id="para_392fbb2c-3be8-4b98-83d5-3a09e6f47d33">{FrameList} is a list of frames separated by %2C (comma). It may be omitted if the message part includes all frames for the specified bulk pixel data object.</para>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.4" status="3" xml:id="sect_6.5.4">
        <title>WADO-RS - RetrieveFrames</title>
        <para xml:id="para_7de6f6d6-0fc4-4034-868a-ccc08235c4eb">This action retrieves the DICOM frames for a given study, series, SOP Instance UID, and frame numbers. The response is pixel data, and is encapsulated in a multipart MIME response.</para>
        <section label="6.5.4.1" status="4" xml:id="sect_6.5.4.1">
          <title>Request</title>
          <para xml:id="para_fda8f24b-fa70-4650-ba61-5ebb506866fb">The specific Services resources to be used for the RetrieveFrames action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_7a8aed3f-635d-40e8-851e-b0702d82d797">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ffdf03fa-80f0-46c9-a96e-bc717f611f2f">{SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}/instances/{SOPInstanceUID}/frames/{FrameList}, where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_e26a3f51-91e6-4ec6-b470-540c4b6b34c0">{SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_6d5f0999-3db9-4c5f-9342-3bce55c226c4">{StudyInstanceUID} is the study instance UID for a single study.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_b2f198dd-2443-444a-95a3-80a1b1a0220b">{SeriesInstanceUID} is the series instance UID for a single series.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_24b17b23-1ffb-4cd1-9dc5-5d98d2c32348">{SOPInstanceUID} is the SOP Instance UID for a single SOP Instance.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_704bd289-4141-4ed7-80e3-b16d593104aa">{FrameList} is a comma or %2C separated list of one or more non duplicate frame numbers. These may be in any order (e.g., ../frames/1,2,4,3).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_e3db569b-c153-4381-883d-2775fbe06a23">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_de1af78f-1d05-4db7-8329-26222cbe6647">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_31df4c62-2500-470c-ac2c-9d2742b71fbd">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_3c2f1639-0ed2-49d3-9811-daa748148fb3">Accept</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_dd7be313-d231-4b3e-8e2e-a4086c416494">multipart/related; type=application/octet-stream</para>
                      <para xml:id="para_440e249a-ab3b-46e4-b55b-6cff254fcd73">Specifies that the response can be Little Endian uncompressed pixel data</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_5252698b-3697-4d11-8b1a-56d8cefc8da4">multipart/related; type={MediaType}</para>
                      <para xml:id="para_fc338f5f-7470-4d54-8f29-41f5558865ec">Specifies that the response can be pixel data encoded using a {MediaType} and {TransferSyntaxUID} listed in <xref linkend="table_6.5-1" xrefstyle="select: label"/> (including parameters).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.5.4.2" status="4" xml:id="sect_6.5.4.2">
          <title>Response</title>
          <para xml:id="para_34f9519b-d7d7-4ecf-8d7e-728ab553ba48">The Server shall provide the document(s) indicated in the request. In order to parse the bulk data items it is necessary to also retrieve the corresponding metadata for the specified Study, Series, or Instance.</para>
          <para xml:id="para_d2640b95-c2bc-4d45-9e6f-8fa9aed09055">The Server shall return the document(s) or an error code when the document(s) cannot be returned. If the server cannot encode the pixel data using any of the requested media types, then an error status shall be returned.</para>
          <para xml:id="para_09ff4378-e3d3-403d-a61c-9174d34b59e4">All response formats has a content type of multipart/related with a message boundary separator.</para>
          <section label="6.5.4.2.1" status="5" xml:id="sect_6.5.4.2.1">
            <title>Pixel Data Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_aac064c1-f298-40f9-9756-b28873105e64">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_cce69b58-3c11-486c-b4c0-813f4f644f52">multipart/related; type=application/octet-stream; boundary={MessageBoundary}</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_38def3a4-f46a-4bf1-9099-2a2d71d20022">multipart/related; type={MediaType}; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_e8281724-5a37-4087-a6ee-a0943356227a">The entire multipart response contains all requested Frames for the specified Instance.</para>
              </listitem>
              <listitem>
                <para xml:id="para_08105893-8aa5-4fec-bc0f-1608b3f29ebf">Each item in the response is one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_e998d512-e3e3-4352-a9ea-7a1e39c3dd7d">an uncompressed frame encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_290a03bd-7918-4487-9bd6-9c1337ffe55d">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_2d35e8ed-4513-436e-a5d1-89e878956290">Content-Location: {BulkDataURL}[/frames/{FrameNumber}]</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_b048969e-564f-47c9-b76a-f9c1c445285e">a compressed frame encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_6541eda3-01b9-4344-8e28-69c679df1a59">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_1fec1975-ced1-4939-9e1f-5ed25b05821d">Content-Location: {BulkDataURL}/frames/{FrameNumber}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_45626355-a0fc-46e5-b8f4-0045390fd70d">a set of compressed frames encoded in a multi-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_31822308-4775-4cd0-bc7f-2b532e043c7e">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_1133586c-79d2-4050-a24a-9d6de47e050e">Content-Location: {BulkDataURL}[/frames/{FrameList}]</para>
                        <itemizedlist>
                          <listitem>
                            <para xml:id="para_7b044657-9d5d-433c-9a6b-ea9d5ceaed40">{FrameList} is a list of frames separated by %2C (comma). It may be omitted if the message part includes all frames for the specified bulk pixel data object.</para>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_efe6c834-fd88-4462-a9ea-9df1a3c00831">The frames will be returned in the order specified by the Frame List.</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.5" status="3" xml:id="sect_6.5.5">
        <title>WADO-RS - RetrieveBulkdata</title>
        <para xml:id="para_c2130274-82fe-4c4f-811a-79c606547c72">This action retrieves the bulk data for a given bulk data URL. The response is a single bulk data item.</para>
        <section label="6.5.5.1" status="4" xml:id="sect_6.5.5.1">
          <title>Request</title>
          <para xml:id="para_5e9a8b18-d1cd-4d35-9db0-5c6498f4169d">The specific Services resource to be used for the RetrieveBulkdata action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_9952a457-0ca0-49c9-94a3-a4b95092ec5e">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_193b1d78-5cc1-45b4-b349-7024edc35e21">{BulkDataURL}, where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_07e1fa32-09c4-4abf-9b51-f4c161af8840">{BulkDataURL} is the URL of a bulk data element. This may be the URL attribute of a BulkData element received in response to a WADO-RS RetrieveMetadataRequest.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_f04db915-d8da-487a-aed9-dd28774f91d0">The server shall always return the same bulk data for a specified BulkData URL if the data is available.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_13f2e6c7-b8f5-4c82-a5d9-8bad3f106759">If the resource specified by the BulkData URL is not available, the server shall return:</para>
                      <itemizedlist>
                        <listitem>
                          <para xml:id="para_890fad22-292a-41e7-8b45-da4889eee726">404 - Not Found, if the server expects to be able to return the resource again in the future</para>
                        </listitem>
                        <listitem>
                          <para xml:id="para_504c759c-8b56-4321-977c-21b8841c1cbe">410 - Gone, if the server does not expect the resource to be valid in the future</para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                    <listitem>
                      <para xml:id="para_e8c87b87-8639-4b24-afd6-a07d61dd972d">The server determines the period of time a BulkData URL resource is available.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_29f28adc-c0ac-45f7-a25c-0d550d97c2a8">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_82adbcb5-e070-4555-808f-8320dcfce2de">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_7a8686a0-e170-40f0-9a1f-7a2ef9017e4c">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_c6caad25-9269-4ca8-8396-2fd40552c429">Accept</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_2e64d6ad-2237-4cec-acba-41ffe97b9a6c">multipart/related; type=application/octet-stream</para>
                      <para xml:id="para_27c8146b-434b-4f7d-a232-2428b5365e66">Specifies that the response can be Little Endian uncompressed bulk data.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_4cd9d7c4-e6ae-4318-a909-62ec02ae33f2">multipart/related; type={MediaType}</para>
                      <para xml:id="para_7416c060-024c-4f54-bda7-facb1da91884">Specifies that the response can be pixel data encoded using a {MediaType} listed in <xref linkend="table_6.5-1" xrefstyle="select: label"/> (including parameters).</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_a7cfae67-cab7-4e1b-ba8f-c7a403899387">Range</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_a76e5c3f-ae95-4af7-812f-097e73bbc98c">See RFC 7230 Section 14.35. If omitted in the request the server shall return the entire bulk data object.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.5.5.2" status="4" xml:id="sect_6.5.5.2">
          <title>Response</title>
          <para xml:id="para_d3495b38-fc01-454a-bf88-b7c6270c44f7">The Server shall provide the document(s) indicated in the request. In order to parse the bulk data items it is necessary to also retrieve the corresponding metadata for the specified Study, Series, or Instance.</para>
          <para xml:id="para_ed349d77-bb3b-4a5a-b7b8-ef30e81fb139">The Server shall return the document(s) or an error code when the document(s) cannot be returned. If the server cannot encode the pixel data using any of the requested media types, then an error status shall be returned.</para>
          <para xml:id="para_2386d594-1dc7-44f2-986a-a1c96ca393b9">All response formats have a content type of multipart/related with a message boundary separator. The response format depends on the Accept header specified in the request.</para>
          <section label="6.5.5.2.1" status="5" xml:id="sect_6.5.5.2.1">
            <title>Bulk Data Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_ea7a9015-5fbe-4db6-b021-bfba34de95c8">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_4580354e-ce57-4f7b-8b17-f1268c4dbdf6">multipart/related; type=application/octet-stream; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_bcc8e94c-f417-4679-9b53-58c5b0ef62fc">The single item in the response is one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_9270f1e6-7dac-4168-86de-f5a796e1688a">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_ec1a2fd2-ce8c-49a1-8632-b399825e7923">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_dfc45f84-0e7a-486c-b74b-0829298e93a8">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_bcbb82f5-f68d-43ec-9a6f-d4c06f7ee8e4">a compressed bulk data element from a SOP Instance encoded in a single-frame media type with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_a521b07d-38dc-4923-8a9b-b17023b7fc6a">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_fd62ebbc-01da-402e-b6bf-d7fc821db0bb">Content-Location: {BulkDataURL}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_fb9b8ca3-ffa9-448e-97b8-c2ab8c77c92e">If the Range header is specified in the request, the server shall return only the specified bytes of the bulk data object. See RFC 7230 Section 14.35.</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.6" status="3" xml:id="sect_6.5.6">
        <title>WADO-RS - RetrieveMetadata</title>
        <para xml:id="para_9f5f23bc-1dbc-4e8d-aee2-01d373a3f86b">This action retrieves the DICOM instances presented as the study, series, or instance metadata with the bulk data removed. The response is metadata for the DICOM attributes.</para>
        <para xml:id="para_ce9fe9f5-8e59-4659-baf0-3bf8665eb5e2">The study, series, or instance metadata includes all attributes; however, a RESTful Service is permitted to replace the Value Field of an attribute with a BulkDataURL for attributes with Value Representations (VR) of FL, FD, IS, LT, OB, OD, OF, OW, SL, SS, ST, UL, UN, US, and UT. The client can use the BulkDataURL with the RetrieveBulkData action to retrieve the original Value Field of that attribute.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_ea59e86c-2a89-4f48-b4d1-d20443b8b2f1">The server is not required to replace any attribute with a BulkDataURL; this is intended to allow the server to provide clients with metadata of a reasonably small size by leaving out large data Value Fields.</para>
            </listitem>
            <listitem>
              <para xml:id="para_390bb950-6ea8-4883-9685-8d880da4e64b">Attributes with binary Value Fields are encoded as XML Base64 binary values.</para>
            </listitem>
            <listitem>
              <para xml:id="para_c510d145-192b-41b8-80b4-b4ee66e2b620">Some DICOM instances, such as SR documents, may be entirely described in the metadata.</para>
            </listitem>
          </orderedlist>
        </note>
        <section label="6.5.6.1" status="4" xml:id="sect_6.5.6.1">
          <title>Request</title>
          <para xml:id="para_a636a5ff-7457-4590-abea-f2ab4422439f">The specific Services resources to be used for the RetrieveMetadata action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_b5bbaa1d-9ae3-4a43-8ed0-8f5dc046ea1f">Resources</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_11a6e730-016c-4794-82bf-18a4f68dc093">{SERVICE}/studies/{StudyInstanceUID}/metadata</para>
                </listitem>
                <listitem>
                  <para xml:id="para_a13abffc-c959-4dd4-bf02-7db87c6bd4ec">{SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}/metadata</para>
                </listitem>
                <listitem>
                  <para xml:id="para_d72f08a6-a6ac-46b4-9143-68f3573a7f97">{SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}/instances/{SOPInstanceUID}/metadata</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_a57d6afe-ba90-476d-b4ba-884fea8794a5">where</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_c4973edf-4dff-4ce5-8334-bf9e8e27060f">{SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_744da772-5ca8-49ca-ba9a-d1f864a92646">{StudyInstanceUID} is the study instance UID for a single study.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_5632d990-fcaf-42aa-a2b0-9699e64075bb">{SeriesInstanceUID} is the series instance UID for a single series.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_f386f2b4-484b-485d-8201-2efe744eeb38">{SOPInstanceUID} is the SOP Instance UID for a single SOP Instance.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_5ee1d4c8-25d8-480f-815c-26ea700225ef">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_7f8b8d93-a0bd-4a35-94af-36219a2dda98">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_a87d0c3e-0497-4d47-890a-31ab89c8a14f">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_3099e360-832f-48a1-9f62-df30c6169216">Accept</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_69adcb29-4336-4e08-adda-aaf0bf024a11">multipart/related; type=application/dicom+xml</para>
                      <para xml:id="para_484da7e1-d277-42be-b3d5-44da389c4986">Specifies that the response should be <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML. All WADO-RS providers must support this Media Type.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_f87d1078-985a-49f3-8d4d-628736d4adb8">application/json</para>
                      <para xml:id="para_a8cc4da3-0718-4310-bc99-0b03a4809b7f">Specifies that the results should be DICOM JSON (see <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>). A WADO-RS provider may optionally support this Media Type</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.5.6.2" status="4" xml:id="sect_6.5.6.2">
          <title>Response</title>
          <para xml:id="para_07252b92-2ea2-4cb7-b135-e6f7bea5e185">The Server shall provide the document(s) indicated in the request. The Server shall return the document(s) or an error code when the document(s) could not be returned.</para>
          <para xml:id="para_edceea03-3ad1-4a84-80b9-339fa1beb531">The response has a content type of either:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_5bb2794d-2597-46eb-aa32-1da9938c87d0">multipart/related; type=application/dicom+xml, as described in the Native DICOM Model defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/>, or</para>
            </listitem>
            <listitem>
              <para xml:id="para_2be262de-d26d-4c2d-a18e-1869718c5050">application/json, as described in <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>.</para>
            </listitem>
          </itemizedlist>
          <para xml:id="para_7c140f19-1bb1-4f71-9929-e8410b034e90">The response must include the URL attribute for each BulkData element.</para>
          <note>
            <para xml:id="para_fa7a7dd9-2e4d-4a04-9105-1ef4fb318dc6">The metadata is consistent with the characteristics of the bulk data on the server. If bulk data is requested using specified Transfer Syntaxes or media types, it is possible that the bulk data retrieved may be inconsistent with the metadata. For example, for a Study whose DICOM Tag (0028,2110) "LossyImageCompression" is set to "00", indicating no lossy compression, calling RetrieveStudy and requesting a lossy compression media type will provide pixel data that is inconsistent with the metadata. It is the responsibility of the client to deal with these inconsistencies appropriately.</para>
          </note>
          <section label="6.5.6.2.1" status="5" xml:id="sect_6.5.6.2.1">
            <title>XML Metadata Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_3cbdb543-f0b4-4678-986a-e499996ec0a5">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_55038bd8-40f3-4591-89f8-c7613f6d2ae9">multipart/related; type=application/dicom+xml</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_6d2fb75f-456b-4ce1-a703-9689d53096b6">The entire multipart response contains all XML metadata for the specified Study, Series, or Instance.</para>
              </listitem>
              <listitem>
                <para xml:id="para_c10816c6-1dd4-48c4-816e-68d1a76cdf46">Each item in the response is the XML encoded metadata for an Instance with the following http headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_ab467555-7e33-4b0c-8ddb-d326af561f77">Content-Type: application/dicom+xml; transfer-syntax={TransferSyntaxUID}</para>
                    <para xml:id="para_1c9ba38b-9a1f-41ab-ac79-df6b9ec51b97">Where {TransferSyntaxUID} is the UID of the DICOM Transfer Syntax used to encode the inline binary data in the XML metadata.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.5.6.2.2" status="5" xml:id="sect_6.5.6.2.2">
            <title>JSON Metadata Response</title>
            <itemizedlist>
              <listitem>
                <para xml:id="para_f4135a6b-cc09-494f-8c57-1b81334719ff">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_de631399-d4e5-41ce-8f0d-15118a4c4660">application/json; transfer-syntax={TransferSyntaxUID}</para>
                    <para xml:id="para_2260f8e4-de33-4efb-ac89-63eb82819704">Where {TransferSyntaxUID} is the UID of the DICOM Transfer Syntax used to encode the inline binary data in the XML metadata.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_79d84fa9-d847-4174-8ac5-dacba0648fef">The response is a JSON array that contains all metadata for the specified Study.</para>
              </listitem>
              <listitem>
                <para xml:id="para_0af8c3d8-0f17-41ee-9c0e-89a49dfa8051">Each element in the array is the DICOM JSON encoded metadata for an Instance (see <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>).</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
      </section>
      <section label="6.5.7" status="3" xml:id="sect_6.5.7">
        <title>Error Codes</title>
        <para xml:id="para_7680de35-639d-47b3-a65b-016e48485a87">The following error codes are defined and shall be used to report any of the associated error and warning situations. Other error codes may be present for other error and warning situations.</para>
        <table frame="box" label="6.5-2" rules="all" xml:id="table_6.5-2">
          <caption>Error Codes</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_a3174454-8039-45e8-bf3b-4af04833e56b">
                  <emphasis role="bold">Client Error Code</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_318ff491-b20a-4af3-bdd3-b4bdf6dd4212">
                  <emphasis role="bold">Client Error Name</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_1f3fb890-405f-4387-bf21-aa2c5c4f28b9">
                  <emphasis role="bold">Error Situation</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_2106ed6b-db28-4070-a4c0-28a3f89988c6">206</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_95dfb857-8c5e-414c-828b-7528fbf18683">Partial Content</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_440507c8-9e06-4607-83a0-2193deaa683b">Accept type, Transfer Syntax or decompression method supported for some but not all requested content.</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_dafea710-6614-40f0-b6eb-bb131b9e6f13">400</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_4e829893-dcae-4191-85c0-ccd5389cf711">Bad Request</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_5e91e769-6a4e-49a5-b963-754383f8efc1">Malformed resource</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f48a8769-87a6-4758-bb75-061f857a49f9">404</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1c49722e-6e41-493b-b9ab-2e826582ecfc">Not Found</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_49b266ae-29f4-4eb1-81a2-8dba9b533bef">Specified resource does not exist</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_43a1670f-761a-4e49-bd52-2cddc4955e79">406</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d5ccd8de-4ba5-4a9d-b862-52600be322da">Not Acceptable</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_7cfab1d4-b09c-4787-8752-effe2ef893eb">Accept type, Transfer Syntax or decompression method not supported</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_7d559641-fb87-4360-9c0b-f5f4c72f19ec">410</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_941ab9de-2176-4c06-8b78-451dabb0127c">Gone</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_6292ac9a-6e94-4962-b01c-b33b1592f381">Specified resource was deleted</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_7654136e-846e-4fd4-bc94-124c69558f51">503</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_bcb73bab-007d-41d4-af62-25f2553f3f9e">Busy</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_2a7bfb6e-e3b9-4abe-be5f-222fdc2de77d">Service is unavailable</para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="6.6" status="2" xml:id="sect_6.6">
      <title>STOW-RS Request/Response</title>
      <para xml:id="para_55ccdde5-6371-4fdc-9836-68cfcffa232c">The STOW-RS Service defines one action type. An implementation shall support the following action type:</para>
      <orderedlist numeration="arabic">
        <listitem>
          <para xml:id="para_5767b4ee-abe2-41f7-a28b-d8f06cb59e2c">Store Instances</para>
          <para xml:id="para_b4d87f8c-dd3b-4fb3-8ea5-74e732a93b98">This action creates new resources for the given SOP Instances on the Server or appends to existing resources on the Server.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_7e4aaa2d-cfb2-408f-9e42-5c7ce788a59b">All request messages are HTTP/1.1 multipart messages. The organization of SOP Instances into message parts depends on whether the SOP Instances are structured as <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> binary instances, or metadata and bulk data.</para>
      <para xml:id="para_adaea576-b5b9-4377-9f1f-e12e4026cab8">
<olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> binary instances shall be encoded with one message part per DICOM Instance.</para>
      <para xml:id="para_83722061-3e3a-49ab-afc8-a2dcdcd9f68f">Metadata and bulk data requests will be encoded in the following manner:(see <xref linkend="figure_6.5-1" xrefstyle="select: label title"/>):</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_561ebb02-36c9-4e95-98be-e5b6bdac2650">All XML request messages shall be encoded as described in the Native DICOM Model defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> with one message part per XML object.</para>
        </listitem>
        <listitem>
          <para xml:id="para_089b5bb9-2751-44af-93da-195062bb927a">All JSON requests shall be encoded as an array of DICOM JSON Model Objects defined in <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>.</para>
        </listitem>
        <listitem>
          <para xml:id="para_6f507e25-a6d0-4d51-a292-21b3595e0731">Uncompressed bulk and pixel data shall be encoded in a Little Endian format using the application/octet-stream media type with one message part per bulk data item.</para>
        </listitem>
        <listitem>
          <para xml:id="para_d88e3987-d817-4fcb-a483-229b666d399f">Compressed pixel data shall be encoded in one of two ways:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_bb4d1bea-ad4c-4522-821d-6cf750701f1f">Single-frame pixel data encoded using a single-frame media type (one message part)</para>
            </listitem>
            <listitem>
              <para xml:id="para_8761a8a9-562f-4186-9493-8d2734606045">Multi-frame or video pixel data encoded using a multi-frame media type (multiple frames in one message part)</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
      <para xml:id="para_71331b45-0125-498b-ac95-ba01864baf15">Compressed pixel data shall be encoded using the Media Types as described in <xref linkend="table_6.5-1" xrefstyle="select: label"/> WADO-RS Media Type Mapping to Transfer Syntax UID. Media Types corresponding to several DICOM Transfer Syntax UIDs may require a transfer-syntax parameter to disambiguate the request.</para>
      <para xml:id="para_39aec49c-a59d-4ccf-8098-e348e63c1788">HTTP Request field Content-Type is used in the header lines by the client in an HTTP/1.1 transaction to indicate the type of data being sent to the Service. All lines are RFC822 or RFC7230 format headers. All HTTP header fields whose use is not defined by STOW-RS shall have the meaning defined by the HTTP standard.</para>
      <para xml:id="para_ec81376a-b54b-45e5-800d-0ef06613c805">The Service is required to support uncompressed bulk and pixel data (multipart/related; type= application/octet-stream).</para>
      <section label="6.6.1" status="3" xml:id="sect_6.6.1">
        <title>STOW-RS - Store Instances</title>
        <para xml:id="para_aa62421c-c3dd-4361-9900-197c356ce486">This action stores one or more DICOM instances associated with one or more study instance unique identifiers (SUID). The request message can be DICOM or metadata and bulk data depending on the"Content-Type", and is encapsulated in a multipart request body.</para>
        <section label="6.6.1.1" status="4" xml:id="sect_6.6.1.1">
          <title>Request</title>
          <para xml:id="para_ae31de42-f1bf-404d-aca3-b3fab25001f5">The specific Service resource to be used for the Store Instances action shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_8c1e87c7-a342-485d-b953-2b12fc777ac2">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_70e473a8-ca71-4bd5-a131-32f338b1b5cf">{SERVICE}/studies[/{StudyInstanceUID}], where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_0ac9d69f-92c2-49a5-89d2-58f21ce838c3">{SERVICE} is the base URL for the service. This may be a combination of scheme (either HTTP or HTTPS), host, port, and application.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_aa74902b-2e18-4ca1-86ab-73b11d519449">{StudyInstanceUID} (optional) is the study instance UID for a single study. If not specified, instances can be from multiple studies. If specified, all instances shall be from that study; instances not matching the StudyInstanceUID shall be rejected.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_70f57d8e-957d-4203-87fe-3114e7fb86a8">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_629e253a-3619-4c94-a702-2b80b4cf0422">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_dee43bff-8a09-439f-82d9-a60720ddc8ea">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6bafbb0b-a4b5-453a-b96e-33938ad4f06f">Content-Type - The representation scheme being posted to the RESTful service. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_e76d3d10-5ad9-4b9f-a54f-899863da9112">multipart/related; type=application/dicom; boundary={messageBoundary}</para>
                      <para xml:id="para_d46965f9-c8f3-46c0-b58f-4daa2634e539">Specifies that the post is <olink targetdoc="PS3.10" targetptr="PS3.10" xrefstyle="select: labelnumber"/> binary instances. All STOW-RS providers must accept this Content-Type.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_9eaac1d1-b160-495f-9e12-b76079e6a7a1">multipart/related; type=application/dicom+xml; boundary={messageBoundary}</para>
                      <para xml:id="para_c64825a9-867c-4390-9fec-d8902ba0ce07">Specifies that the post is <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata and bulk data. All STOW-RS providers must accept this Content-Type.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_7c16258b-42a3-499a-b520-4931093de2c5">multipart/related; type=application/json; boundary={messageBoundary}</para>
                      <para xml:id="para_cbc549bf-3685-467f-8c72-9f4395372497">Specifies that the post is DICOM JSON metadata and bulk data. A STOW-RS provider may optionally accept this Content-Type.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <note>
            <para xml:id="para_7797e725-56b9-4343-893b-9c2225b9dbc8">It is not necessary that the study referenced by the StudyInstanceUID in the resource (and in the provided instances) exists on the server, however it is necessary that it be a valid UID. The client may have obtained an appropriate UID from elsewhere or generated it as described in <olink targetdoc="PS3.5" targetptr="chapter_9" xrefstyle="select: docname label quotedtitle"/> and <olink targetdoc="PS3.5" targetptr="chapter_B" xrefstyle="template:Annex %n “%t” in PS3.5"/>.</para>
          </note>
          <section label="6.6.1.1.1" status="5" xml:id="sect_6.6.1.1.1">
            <title>DICOM Request Message Body</title>
            <para xml:id="para_0e205248-00aa-4a78-a821-4843ccb69c96">The DICOM Request Message has a multipart body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_b89fa158-e90e-4835-bda5-668e2b7b2b41">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_27495851-e3dd-492a-8375-62b43c72c6d2">multipart/related; type=application/dicom; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_3718a835-38af-440b-941e-8f74c6708837">The multipart request body contains every instance to be stored. Each instance is in a separate part of the multipart body.</para>
              </listitem>
              <listitem>
                <para xml:id="para_75564539-2806-427c-91db-e7ed96210e1d">Each part in the multipart body represents a DICOM SOP Instance with the following HTTP headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_07d5ee18-40ae-4af1-89ec-a98f65db54df">Content-Type: application/dicom</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.6.1.1.2" status="5" xml:id="sect_6.6.1.1.2">
            <title>XML Metadata and Bulk Data Request Message Body</title>
            <para xml:id="para_519408e3-b2bf-4ded-b06c-524d60f7414d">The XML Metadata and Bulk Data Request Message has a multipart body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_073dc59c-31ff-4028-a642-5fdf5154ef15">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_f2c0d928-9ac5-4d72-99a5-5b16d26fa049">multipart/related; type=application/dicom+xml; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_5dd8ef02-aee9-4da0-ab6c-57bb9b90fef8">The multipart request body contains all the metadata and bulk data to be stored. If the number of bulk data parts does not correspond to the number of unique BulkDataURIs in the metadata then the entire message is invalid and will generate an error status line.</para>
              </listitem>
              <listitem>
                <para xml:id="para_a62437ac-3170-4e41-af0d-9ba39444706d">Each body part is either DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata or a bulk data item from a SOP Instance sent as part of the Store operation. The first part of the multipart message must be XML metadata.</para>
              </listitem>
              <listitem>
                <para xml:id="para_050be22b-9935-4c12-9ae8-97bf39f9977a">The first part in the multipart request will contain the following HTTP headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_d2d825ad-4fae-4a49-aff2-be53c1d98f80">Content-Type: application/dicom+xml; transfer-syntax={TransferSyntaxUID}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_66e8fd51-f5ea-4284-b395-b85c03831474">Subsequent items will contain the following HTTP headers (order is not guaranteed):</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_dd581b67-b51b-4408-bfff-7538dfe230e4">additional metadata with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_63f9a56e-6263-439a-a29d-72e6081f1f4a">Content-Type: application/dicom+xml; transfer-syntax={TransferSyntaxUID}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_199dfcca-4fe1-426d-9d33-b0b601a337a8">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_07983528-768f-46b5-8f28-188e0ae81d96">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_0d457bda-6005-41f9-b357-91ee4cf4a23c">Content-Location: {BulkDataURI}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_1e411d81-3b1d-457a-b25b-9f94472de05b">a compressed pixel data object from a SOP Instance in the Study with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_2fa85338-f278-4be3-8da1-9b1efde0b2a7">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_3c698f81-25b9-47e2-88cc-829b2f5bb321">Content-Location: {BulkDataURI}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_a842eba5-cf3a-4410-83a1-dea2b2dc361e">Metadata and its associated bulk data shall always be sent in the same POST request.</para>
              </listitem>
            </itemizedlist>
            <note>
              <para xml:id="para_1dd48770-4da8-4fe0-84db-744be161c305">It is not intended that metadata and bulk data be stored separately in multiple POST requests since the service always requires the metadata for context.</para>
            </note>
          </section>
          <section label="6.6.1.1.3" status="5" xml:id="sect_6.6.1.1.3">
            <title>JSON Metadata and Bulk Data Request Message Body</title>
            <para xml:id="para_cd11bc03-1728-4461-a491-eefa23b1da01">The JSON Metadata and Bulk Data Request Message has a multipart body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_afbc1098-f054-40b3-9a2b-2bcb69ea67ca">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_7d69b3da-e87c-439b-8304-c841ebd00850">multipart/related; type=application/json; boundary={MessageBoundary}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_5f4e830a-a299-4e95-b96a-d28ec9802c21">The multipart request body contains all the metadata and bulk data to be stored. If the number of bulk data parts does not correspond to the number of unique BulkDataURIs in the metadata then the entire message is invalid and will generate an error status line.</para>
              </listitem>
              <listitem>
                <para xml:id="para_2f19338e-b038-45f0-a85f-0fa4085651b5">The first part in the multipart request will contain a JSON array of DICOM JSON Model Objects (defined in <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>). Each array element is the metadata from a SOP Instance sent as part of the Store operation. This message part will have the following headers:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_86bbe2f4-d654-4b4b-9973-bf738b3669cf">Content-Type: application/json; transfer-syntax={TransferSyntaxUID}</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_5714d939-983a-4706-ac09-2daffc42c812">Subsequent items will be one of the following:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_6e1a1d4d-1697-4f87-bdbc-366dedf2f8e8">an uncompressed bulk data element encoded in Little Endian binary format with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_d056cc68-006a-4eda-902b-4e498362ae36">Content-Type: application/octet-stream</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_a0c8564a-ec6f-4863-bc3e-bfb7cc0e6427">Content-Location: {BulkDataURI}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_8f685405-83be-4788-b863-53f777b13d7c">a compressed pixel data object from a SOP Instance in the Study with the following headers:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_dd994f68-85a9-41aa-96a3-316d4213d613">Content-Type: {MediaType}</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_112c1b7e-b464-4da8-86f3-f9bc89ecd4f2">Content-Location: {BulkDataURI}</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_2505f3a9-53ec-4b9f-9ee2-9ead05e11076">JSON Metadata and its associated bulk data shall always be sent in the same POST request.</para>
              </listitem>
            </itemizedlist>
            <note>
              <para xml:id="para_88f72d66-4054-4dff-86e4-39be467f6782">It is not intended that metadata and bulk data be stored separately in multiple POST requests since the service always requires the metadata for context.</para>
            </note>
          </section>
        </section>
        <section label="6.6.1.2" status="4" xml:id="sect_6.6.1.2">
          <title>Action</title>
          <para xml:id="para_2077d80f-6cce-4964-98a9-a6ce48c3e8a7">The Service may coerce or replace values of attributes such as Patient Name, ID, Accession Number, for example, during import of media from an external institution, reconciliation against a master patient index, or reconciliation against an imaging procedure order. The Service may correct, or replace incorrect values, such as Patient Name or ID, for example, when incorrect worklist item was chosen or operator input error occurs.</para>
          <para xml:id="para_890eaf2a-cbec-4816-8a6b-0371c1395843">If any element is coerced or corrected, the Original Attribute Sequence (0400,0561) shall be included in the DICOM Object that is stored and may be included in the PS3.18 XML Store Instances Response Module in the response.</para>
          <note>
            <para xml:id="para_ded2e695-3abe-4257-b9b0-39bb5cf70ac4">For more information on populating the Original Attribute Sequence, see <olink targetdoc="PS3.3" targetptr="sect_C.12.1" xrefstyle="select: docname label quotedtitle"/>.</para>
          </note>
        </section>
        <section label="6.6.1.3" status="4" xml:id="sect_6.6.1.3">
          <title>Response</title>
          <para xml:id="para_3f0603ff-aab8-4705-b497-3590f3370070">The RESTful Service shall return an HTTP status line, including a status code and associated textual phrase for the entire set of stored SOP Instances, followed by a message body containing the Store Instances Response Module as defined in <xref linkend="table_6.6.1-2" xrefstyle="select: label"/>. The message body shall be encoded as either:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_16282b30-23b8-4408-ac5e-7a2ed3852ca5">an XML object as described in the Native DICOM Model defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/>, or</para>
            </listitem>
            <listitem>
              <para xml:id="para_ffcf48c7-c502-489a-8cec-888a0e38700f">a DICOM JSON Model Object defined as defined in  <xref linkend="chapter_F" xrefstyle="template:Annex %n"/>.</para>
            </listitem>
          </itemizedlist>
          <section label="6.6.1.3.1" status="5" xml:id="sect_6.6.1.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_eb10bdbc-6919-4c11-bfe2-da6b82016117">If the status for all instances included in the POST request is Success, the RESTful Service shall return an "HTTP 200 - Success" response code.</para>
            <para xml:id="para_7f03f4ef-8160-417d-a8a0-b3056a53c394">If the status for all instances included in the POST request is Failure, the RESTful Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.6.1-1" xrefstyle="select: label"/>. If there are instance specific errors, the response code shall be a 409 and the response payload shall contain the Store Instances Response Module, which contains additional information regarding instance errors.</para>
            <para xml:id="para_761a3691-f6bb-43d6-bc93-dc19e33c7f24">In all other conditions, the RESTful Service shall return an "HTTP 202 - Accepted" response code. The response payload may contain a Store Instances Response Module, which specifies additional information regarding instance warnings or failures.</para>
            <table frame="box" label="6.6.1-1" rules="all" xml:id="table_6.6.1-1">
              <caption>HTTP/1.1 Standard Response Code</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_2ddaf295-1e9f-404d-817f-35ff1e6cb48b">Service Status</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_d2d41aba-ed3a-4970-b607-b09e3b42a03c">HTTP/1.1 Status Codes</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_aabb5a09-a6a4-49cd-8be5-c4e2cf601da7">STOW-RS Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c2477e8b-afcc-40d5-8daf-77c735b389ff">Failure</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_42a8b3bc-47f8-4d9f-92ef-acf92e1dbd98">400 - Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4041be4d-3656-4b9f-9bc2-354e786f662f">This indicates that the STOW-RS Service was unable to store any instances due to bad syntax.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5d9f189f-7b28-4135-add0-efe51c8ea64f">401 - Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f3c2fde7-e7d1-4b14-b3cd-45ffcddbd61d">This indicates that the STOW-RS Service refused to create or append any instances because the client is not authorized.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7576bd5c-f978-4563-accf-125204b509a1">403 - Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c8afc607-7886-4383-9c74-1f33efbb633f">This indicates that the STOW-RS Service understood the request, but is refusing to fulfill it (e.g., an authorized user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_52685487-a068-4122-b31c-26cd3ed1b096">409 - Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2f4bffd0-91f5-4258-8c19-113c97a1cba6">This indicates that the STOW-RS Service request was formed correctly but the service was unable to store any instances due to a conflict in the request (e.g., unsupported SOP Class or StudyInstanceUID mismatch).</para>
                    <para xml:id="para_f27456c2-ec91-4e04-ac26-41868062a137">This may also be used to indicate that a STOW-RS Service was unable to store any instances for a mixture of reasons.</para>
                    <para xml:id="para_f2cdcd00-a35f-401a-8ec4-3f068cb7bd1e">Additional information regarding the instance errors can be found in the XML response message body.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ab2e2052-7e78-47c4-b32e-04af24e0377f">415 - Unsupported Media Type</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9d009717-dd1f-451c-b555-3bdcc8f10578">This indicates that the STOW-RS Service does not support the Content-Type specified in the storage request (e.g., the service does not support JSON metadata).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1"/>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3ca68f87-6ab1-44ca-b6c3-731bb1f67c89">503 - Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f40d98b8-45f9-4c30-b210-5b16924175a1">This indicates that the STOW-RS Service was unable to store any instances because it was out of resources.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bb0f2215-2136-44b8-ad0e-9fef6c502cc7">Warning</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_fcd5faee-9f1b-4c3d-a454-0070c398f782">202 - Accepted</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5c1917a1-1f24-4807-8f5c-b7271e6c0fa6">This indicates that the STOW-RS Service stored some of the instances but warnings or failures exist for others.</para>
                    <para xml:id="para_568b4779-1c8c-4d50-a7d2-d1115fad2865">Additional information regarding this error can be found in the XML response message body.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9ef662d9-3c60-4dc3-8db1-45e9ae02e371">Success</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9891cb2f-49a7-4861-9752-460c0b512d23">200 - OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8b2293fb-a0e6-45e6-b3cd-de1cb9bd9562">This indicates that the STOW-RS Service successfully stored all the instances.</para>
                  </td>
                </tr>
              </tbody>
            </table>
            <note>
              <para xml:id="para_2ed8929b-bf80-4f8e-bac4-1a51ff03d516">HTTP Status Codes for Failures and Warnings are returned in HTTP response headers. It is recommended that the text returned in the HTTP Response Warning contain a DICOM Status Code and descriptive reason as defined in <xref linkend="sect_6.6.1.3.2.1" xrefstyle="select: label"/>. For example,</para>
              <para xml:id="para_8870d1f9-32a8-43d3-aafd-c8f19eaaa6f8">
                <computeroutput>Warning: "A700: Out of memory"</computeroutput>
              </para>
            </note>
          </section>
          <section label="6.6.1.3.2" status="5" xml:id="sect_6.6.1.3.2">
            <title>Response Message Body</title>
            <para xml:id="para_023620f1-fc76-488b-9211-c428f745b89f">The message body shall provide appropriate status codes for individual SOP Instances indicating success, warning, or failure as defined below.</para>
            <para xml:id="para_b6e8d36d-60c1-4f89-a404-a4be88f3c724">The message body may also include details about the processing of attributes by the service.</para>
            <para xml:id="para_e49388da-4058-4e06-83d8-f32bb7d2d421">
<xref linkend="table_6.6.1-2" xrefstyle="select: label"/> defines the Attributes for referencing SOP Instances that are contained in a Store Instances Response Module in the response message body.</para>
            <table frame="box" label="6.6.1-2" rules="all" xml:id="table_6.6.1-2">
              <caption>Store Instances Response Module Attributes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_c2005b12-a595-4bdb-8003-65865066bee3">
                      <emphasis role="bold">Attribute Name</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_0e9fa866-6c42-4595-a58c-f295072d0248">
                      <emphasis role="bold">Tag</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_0bf3267f-27f1-47ef-899c-efc7024a8ebc">
                      <emphasis role="bold">Type</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_cfb84346-308e-4f19-b43a-864473d706c2">
                      <emphasis role="bold">Attribute Description</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c04ec140-cbc3-4244-8f06-dfcfeac77133">Retrieve URL</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_b028bebf-b2ff-477f-8404-f257cc338903">(0008,1190)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_6515fa8e-ac3c-4270-8e43-c225ae583d51">2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6dac9fff-8f03-4c67-8c7d-44f4b22b5ce9">The URL where the Study is available for retrieval via a WADO-RS Retrieve Study service.</para>
                    <note>
<para xml:id="para_a14d38f5-1ec5-4a6f-a5c5-e0a820f51ede">The VR of this attribute has changed from UT to UR.</para>
</note>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_533df5a1-be23-4669-bd1c-5b5141411474">Failed SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_0c1f70a3-5bfd-4e45-adf8-f8b0fa5cab9b">(0008,1198)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_719fe679-cf03-498f-8854-0f3398850d2e">1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_908cb6fb-9a6e-4960-afbe-8726d82b0961">A sequence of Items where each Item references a single SOP Instance for which storage could not be provided.</para>
                    <para xml:id="para_21e2f347-dcd4-49d4-9843-f9c5ed5f949c">Required if one or more SOP Instances failed to store.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para xml:id="para_d5fece3f-a887-49d3-999c-e15e82efde48">
                      <emphasis role="italic">&gt;<olink targetdoc="PS3.3" targetptr="table_10-11" xrefstyle="select: docname label quotedtitle"/>
</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4da177fd-c4ba-4e90-933b-35ac07fa9c8d">&gt;Failure Reason</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_3498b087-1cc3-4e54-8788-efc11ae2ca50">(0008,1197)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_9e5ee408-fa8b-45f8-a858-f255a2738bf8">1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_280940ef-0e4e-479b-aa75-7d86a2093b0e">The reason that storage could not be provided for this SOP Instance.</para>
                    <para xml:id="para_be5d60d7-30e6-460f-8546-a71b71b6cfa6">See <xref linkend="sect_6.6.1.3.2.1.2" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8e634c87-8e2a-4b3d-8456-4284e6700a06">Referenced SOP Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_34024c16-a314-4825-9406-73a04f906fcd">(0008,1199)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_787b999f-1d54-4920-a0f2-120d357e0264">1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e5198e35-9715-4267-bd65-9a12561deb32">A sequence of Items where each Item references a single SOP Instance that was successfully stored.</para>
                    <para xml:id="para_daafa01e-02a8-4671-ba4e-8d0e663a954d">Required if one or more SOP Instances were successfully stored.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para xml:id="para_b07f16ad-9286-486b-9d07-70c78bc7f90e">
                      <emphasis role="italic">&gt;<olink targetdoc="PS3.3" targetptr="table_10-11" xrefstyle="select: docname label quotedtitle"/>
</emphasis>
                    </para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cc2d6253-d0b3-4925-a32c-57ab42f5e637">&gt;Retrieve URL</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_d1b5fdd4-ec06-467f-9206-bbf7c17042ad">(0008,1190)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_8735e107-bb3f-43ee-b4b7-08bb6a286f4a">2</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3babff8f-5561-421a-9aaf-209e016b8aaf">The URL where the SOP Instance is available for retrieval via a WADO-RS service.</para>
                    <note>
<para xml:id="para_21b6655c-00bd-438b-82da-32927a76a00c">The VR of this attribute has changed from UT to UR.</para>
</note>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bb9c1f94-f18e-4911-9dc4-1ad333cb15b1">&gt;Warning Reason</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_a1922779-4c0a-409b-aeb0-dbaacd809387">(0008,1196)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_ae089573-4faf-485b-a2b5-565bcee42937">1C</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2bed7f7f-4aad-4e68-8f2b-edcd8b254aa2">The reason that this SOP Instance was accepted with warnings.</para>
                    <para xml:id="para_7cea3252-c2ca-4f36-a8d6-e58e33e9d103">Required if there was a warning for this SOP Instance.</para>
                    <para xml:id="para_b7f5cb07-05b1-4b11-b216-29c781af140a">See <xref linkend="sect_6.6.1.3.2.1.1" xrefstyle="select: label"/>.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b6c4e525-dc86-4ffc-8d94-3432f6900fa8">&gt;Original Attributes Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_12a0455f-1532-428e-a518-2bf5e285fa37">(0400,0561)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_a2faadcd-459d-4b53-8f63-e0e56aab9221">3</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f05c5e00-1626-4de1-831a-e10af93623fd">Sequence of Items containing all attributes that were removed or replaced by other values.</para>
                    <para xml:id="para_22a9a511-0846-47f5-9457-665120229af7">One or more Items are permitted in this sequence.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_30992e50-016b-4f57-93f0-83f45a996da5">&gt;&gt;Attribute Modification DateTime</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_82a6490a-96f9-464a-b991-5ffdc37c00b2">(0400,0562)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_d2a54f2c-55ef-4aa6-a86d-0d26c7849cdb">1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2e42817f-83b1-4b9b-9d1a-35617d83479a">Date and time the attributes were removed and/or replaced.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_558e8f4b-f874-4c2f-838d-f51598992167">&gt;&gt;Modifying System</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_db470055-8427-4fb5-a28a-795f48d633f7">(0400,0563)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_29597362-8c8c-4494-a6cc-fb11482fa007">1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_294fd7e5-5f73-4484-b74c-e8bb6ad789d1">Identification of the system that removed and/or replaced the attributes.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a7e51148-9a74-427f-9538-e2e77114dbd5">&gt;&gt;Reason for the Attribute Modification</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_54dfbc3c-ef5e-47f1-9605-f7a09ef821eb">(0400,0565)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_789c9468-b8c5-407a-bbbf-46ec8e4f8b54">1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f8c2e811-fe27-411e-86b7-3acd3bd63b05">Reason for the attribute modification. Defined terms are:</para>
                    <para xml:id="para_2a5b9d42-44e6-491f-84f1-b3b6df5df2db">COERCE = Replace values of attributes such as Patient Name, ID, Accession Number, for example, during import of media from an external institution, or reconciliation against a master patient index.</para>
                    <para xml:id="para_78f7c9b6-feb5-4624-8a2e-a620c8c9d3e8">CORRECT = Replace incorrect values, such as Patient Name or ID, for example, when incorrect worklist item was chosen or operator input error.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a622fade-7503-4bf4-b9c9-1d38be3cba74">&gt;&gt;Modified Attributes Sequence</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_f8320d5c-74fd-485d-87f3-9507d00d7a5b">(0400,0550)</para>
                  </td>
                  <td align="center" colspan="1" rowspan="1">
                    <para xml:id="para_9e122227-a0d1-45e6-b903-3e4d8fc6e6c1">1</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_97bc651a-30ac-4780-9661-435cd8115fa3">Sequence that contains all the Attributes, with their previous values, that were modified or removed from the main data set.</para>
                    <para xml:id="para_81288324-d9f2-4f93-8317-6050ea4fd608">Only a single Item shall be included in this sequence.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="4" rowspan="1">
                    <para xml:id="para_2fa21bd9-7dee-4f34-8ea4-8b9ee7377f5a">
                      <emphasis role="italic">&gt;&gt;Any Attribute from the main data set that was modified or removed; may include Sequence Attributes and their Items.</emphasis>
                    </para>
                  </td>
                </tr>
              </tbody>
            </table>
            <section label="6.6.1.3.2.1" status="6" xml:id="sect_6.6.1.3.2.1">
              <title>Store Instances Response Attribute Description</title>
              <section label="6.6.1.3.2.1.1" status="7" xml:id="sect_6.6.1.3.2.1.1">
                <title> Warning Reason</title>
                <para xml:id="para_72dac4bd-0502-41cf-9665-5aa8f552a190">For the following semantics the associated value shall be used for the Warning Reason (0008,1196):</para>
                <variablelist>
                  <varlistentry>
                    <term>B000 - Coercion of Data Elements</term>
                    <listitem>
                      <para xml:id="para_2c0958a2-2569-416d-ba8a-2056e90d2b9f">The STOW-RS Service modified one or more data elements during storage of the instance. See <xref linkend="sect_6.6.1.3" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>B006 - Elements Discarded</term>
                    <listitem>
                      <para xml:id="para_c09912da-0aa1-4e73-8f01-fbede7a1a8e6">The STOW-RS Service discarded some data elements during storage of the instance. See <xref linkend="sect_6.6.1.3" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>B007 - Data Set does not match SOP Class</term>
                    <listitem>
                      <para xml:id="para_eaf99b32-e15c-4b98-b1ab-10fb5150c9d7">The STOW-RS Service observed that the Data Set did not match the constraints of the SOP Class during storage of the instance.</para>
                    </listitem>
                  </varlistentry>
                </variablelist>
                <para xml:id="para_32cfb01d-8dcc-4451-80d8-a051c256ecc8">Additional codes may be used for the Warning Reason (0008,1196) to address the semantics of other issues.</para>
                <para xml:id="para_a64bd9b0-9327-4f70-b963-fd65e9574022">In the event that multiple codes may apply, the single most appropriate code shall be used.</para>
              </section>
              <section label="6.6.1.3.2.1.2" status="7" xml:id="sect_6.6.1.3.2.1.2">
                <title>Failure Reason</title>
                <para xml:id="para_bffa65be-8a0b-4d67-ba52-d24660eca54e">For the following semantics the associated value shall be used for the Failure Reason (0008,1197). Implementation specific warning and error codes shall be defined in the conformance statement:</para>
                <variablelist>
                  <varlistentry>
                    <term>A7xx - Refused out of Resources</term>
                    <listitem>
                      <para xml:id="para_a77fda45-53b8-4b9c-b646-b6e63224e780">The STOW-RS Service did not store the instance because it was out of resources.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>A9xx - Error: Data Set does not match SOP Class</term>
                    <listitem>
                      <para xml:id="para_eefa0312-8d77-4534-be2a-756f07e2d53d">The STOW-RS Service did not store the instance because the instance does not conform to its specified SOP Class.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Cxxx - Error: Cannot understand</term>
                    <listitem>
                      <para xml:id="para_0c99bf76-16fc-4aa7-a974-33529cc190f4">The STOW-RS Service did not store the instance because it cannot understand certain Data Elements.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>C122 - Referenced Transfer Syntax not supported</term>
                    <listitem>
                      <para xml:id="para_1c0e9e21-0064-43c2-87de-dbce76148334">The STOW-RS Service did not store the instance because it does not support the requested Transfer Syntax for the instance.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>0110 - Processing failure</term>
                    <listitem>
                      <para xml:id="para_01ac8dd9-b814-48c9-911b-d8d740be8495">The STOW-RS Service did not store the instance because of a general failure in processing the operation.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>0122 - Referenced SOP Class not supported</term>
                    <listitem>
                      <para xml:id="para_50987c76-f847-46ed-9c0f-db69378319b2">The STOW-RS Service did not store the instance because it does not support the requested SOP Class.</para>
                    </listitem>
                  </varlistentry>
                </variablelist>
                <para xml:id="para_69e5c43f-5057-4d92-85b0-4ead1adf6f99">Additional codes may be used for the Failure Reason (0008,1197) to address the semantics of other issues.</para>
                <para xml:id="para_56798204-dc85-4ec1-953d-1a15f7f94ffe">In the event that multiple codes may apply, the single most appropriate code shall be used.</para>
              </section>
            </section>
            <section label="6.6.1.3.2.2" status="6" xml:id="sect_6.6.1.3.2.2">
              <title>Response Message Body Example</title>
              <para xml:id="para_d4e5d494-eab4-43a5-9603-4b46d124b71d">The following is an example of a PS3.18 XML Store Instances Response Module in the response message body containing 2 failed SOP Instances, 1 successful SOP Instance, and 1 accepted SOP Instance with a warning:</para>
              <programlisting><![CDATA[<?xml version="1.0" encoding="utf-8"?>
<NativeDicomModel xmlns="http://dicom.nema.org/PS3.19/models/NativeDICOM"
xsi:schemaLocation="http://dicom.nema.org/PS3.19/models/NativeDICOM"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <DicomAttribute tag="00081198" vr="SQ" keyword="FailedSOPSequence">
    <Item number="1">
      <DicomAttribute tag="00081150" vr="UI" keyword="ReferencedSOPClassUID">
        <Value number="1">1.2.840.10008.3.1.2.3.1</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081155" vr="UI"
      keyword="ReferencedSOPInstanceUID">
        <Value number="1">
        2.16.124.113543.6003.1011758472.49886.19426.2085542308</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081197" vr="US" keyword="FailureReason">
        <Value number="1">290</Value>
      </DicomAttribute>
    </Item>
    <Item number="2">
      <DicomAttribute tag="00081150" vr="UI" keyword="ReferencedSOPClassUID">
        <Value number="1">1.2.840.10008.3.1.2.3.1</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081155" vr="UI"
      keyword="ReferencedSOPInstanceUID">
        <Value number="1">
        2.16.124.113543.6003.1011758472.49886.19426.2085542309</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081197" vr="US" keyword="FailureReason">
        <Value number="1">290</Value>
      </DicomAttribute>
    </Item>
  </DicomAttribute>
  <DicomAttribute tag="00081199" vr="SQ" keyword="ReferencedSOPSequence">
    <Item number="1">
      <DicomAttribute tag="00081150" vr="UI" keyword="ReferencedSOPClassUID">
        <Value number="1">1.2.840.10008.5.1.4.1.1.2</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081155" vr="UI"
      keyword="ReferencedSOPInstanceUID">
        <Value number="1">
        2.16.124.113543.6003.189642796.63084.16748.2599092903</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081190" vr="UR" keyword="RetrieveURL">
        <Value number="1">
        https://wadors.hospital.com/studies/2.16.124.113543.6003.1154777499.30246.19789.3503430045/
        series/2.16.124.113543.6003.2588828330.45298.17418.2723805630/
        instances/2.16.124.113543.6003.189642796.63084.16748.2599092903</Value>
      </DicomAttribute>
    </Item>
    <Item number="2">
      <DicomAttribute tag="00081150" vr="UI" keyword="ReferencedSOPClassUID">
        <Value number="1">1.2.840.10008.5.1.4.1.1.2</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081155" vr="UI"
      keyword="ReferencedSOPInstanceUID">
        <Value number="1">
        2.16.124.113543.6003.189642796.63084.16748.2599092905</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081196" vr="US" keyword="WarningReason">
        <Value number="1">45056</Value>
      </DicomAttribute>
      <DicomAttribute tag="00081190" vr="UR" keyword="RetrieveURL">
        <Value number="1">
        https://wadors.hospital.com/studies/2.16.124.113543.6003.1154777499.30246.19789.3503430045/
        series/2.16.124.113543.6003.2588828330.45298.17418.2723805630/
        instances/2.16.124.113543.6003.189642796.63084.16748.2599092905</Value>
      </DicomAttribute>
    </Item>
  </DicomAttribute>
  <DicomAttribute tag="00081190" vr="UR" keyword="RetrieveURL">
    <Value number="1">
    https://wadors.hospital.com/studies/2.16.124.113543.6003.1154777499.30246.19789.3503430045</Value>
  </DicomAttribute>
</NativeDicomModel>
]]></programlisting>
            </section>
          </section>
        </section>
      </section>
    </section>
    <section label="6.7" status="2" xml:id="sect_6.7">
      <title>QIDO-RS Request/Response</title>
      <para xml:id="para_a72f19f0-9ba3-42e7-ae45-a307d5851c94">DICOM QIDO-RS defines several action types. An implementation shall support the following action types:</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_f7ce0d1c-8ea8-45f2-8946-163f548d05e4">SearchForStudies</para>
          <para xml:id="para_7aa5cbf9-9bbd-4385-9208-9fe2bf0115c2">This action searches for DICOM Studies that match specified search parameters and returns a list of matching studies and the requested attributes for each study.</para>
        </listitem>
        <listitem>
          <para xml:id="para_655a77b7-3024-4c92-afbb-cac5a5cffcc1">SearchForSeries</para>
          <para xml:id="para_8dfcd0bd-87a6-4164-826c-87f98abc2b0f">This action searches for DICOM Series that match specified search parameters and returns a list of matching series and the requested attributes for each series.</para>
        </listitem>
        <listitem>
          <para xml:id="para_c4581767-37d9-40c7-8268-68032a7ca868">SearchForInstances</para>
          <para xml:id="para_74ad02fa-1bf7-401a-8603-be2d05675c2f">This action searches for DICOM Instances that match specified search parameters and returns a list of matching instances and the requested attributes for each instance.</para>
        </listitem>
      </orderedlist>
      <section label="6.7.1" status="3" xml:id="sect_6.7.1">
        <title>QIDO-RS - Search</title>
        <section label="6.7.1.1" status="4" xml:id="sect_6.7.1.1">
          <title>Request</title>
          <para xml:id="para_b010ca44-221a-4550-a8ea-3335b3ebd75e">The specific resources to be used for the search actions shall be as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_08ed8d64-ed78-41c7-b355-a5d38fed0b70">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_bc82054b-8f18-4381-acd2-04d8478bc0ed">SearchForStudies</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_c9ddc32c-7211-406c-967e-58a8c95a5652">{+SERVICE}/studies{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_4373de8d-f112-4956-b6d0-6e6438036df4">SearchForSeries</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_f6771e2f-44e7-478c-b66f-8f54cb6288fe">{+SERVICE}/studies/{StudyInstanceUID}/series{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_c4fb45d0-edc0-4881-bdd6-637c98bd358f">{+SERVICE}/series{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_bb92183c-767f-4cb1-8fb9-a61df9bcc2dc">SearchForInstances</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_b7dd2b8c-15ee-4656-80a3-96c5424d9bdb">{+SERVICE}/studies/{StudyInstanceUID}/series/{SeriesInstanceUID}/instances{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_7e9626d3-eac1-45e9-ac76-4362aa50e202">{+SERVICE}/studies/{StudyInstanceUID}/instances{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_b75e3c91-ad93-4b5d-877d-8b14f40a9869">{+SERVICE}/instances{?query*,fuzzymatching,limit,offset}</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
              <para xml:id="para_76b37fcd-3616-41dd-93e4-feb818196b13">where</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_8027c246-18f3-41a8-afd2-d697370b996e">{+SERVICE} is the base URL for the QIDO RESTful service. This may be a combination of protocol (http or https), authority, and path.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_22aba581-8df0-4a1b-a3e3-46f7cdb82263">{StudyInstanceUID} is the unique Study Instance UID for a single study.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_f1daa25d-618f-42a9-bb2d-ccd01cd571eb">{SeriesInstanceUID} is the unique Series Instance UID for a single series.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_5fe2c878-b8cf-4ee2-b389-e7789ca77e01">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_499e64f8-5e7c-4ae9-933d-fd28c59447e1">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_a90f8990-151b-4ba8-a079-4b7e7ce9a78d">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_2ad87ca9-29b4-4757-9ed6-709600bcf19d">Accept - The Media Type of the query results. The types allowed for this request header are:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_03c5f91d-b7fb-4a7f-bc44-e9b8b0c72a48">multipart/related; type=application/dicom+xml (default)</para>
                      <para xml:id="para_dab97707-3737-4937-9267-3679e0d772c8">Specifies that the results should be DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML (one part per result)</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_2f89786d-fde5-49f0-ad81-8f52a4b789d4">application/json</para>
                      <para xml:id="para_27b1fff0-55c6-4731-984d-2caa6f93ebc4">Specifies that the results should be DICOM JSON</para>
                    </listitem>
                  </itemizedlist>
                  <para xml:id="para_0804d78c-6c5c-490f-9976-1a0853633760">A QIDO-RS provider shall support both Accept header values</para>
                </listitem>
                <listitem>
                  <para xml:id="para_90fdba2e-aa30-4656-b60d-cf2737688e8a">Cache-control: no-cache (recommended)</para>
                  <para xml:id="para_be6ced57-6db6-4f61-87bd-55cdb01a8c1a">If included, specifies that search results returned should be current and not cached.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_74d47ec1-0533-4190-a558-dba16f686114">{query}</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_d6c34db9-c067-4fda-9452-882d63b1b062">{attributeID}={value}</para>
                  <para xml:id="para_92f73def-009f-43fe-b2b0-ebd43f2c033f">0-n / {attributeID}={value} pairs allowed</para>
                </listitem>
                <listitem>
                  <para xml:id="para_42810892-d27e-465e-afeb-2896d186c52d">includefield={attributeID} | all</para>
                  <para xml:id="para_c9297e89-ee36-48f2-9fc8-3c5fcbaec7a3">0-n includefield / {attributeID} pairs allowed, where "all" indicates that all available attributes should be included for each response.</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_564c1b47-9b7d-46dd-8394-2d61265dcca5">Each {attributeID} must refer to one of:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_80dd41aa-f762-4469-9def-268f89a02c29">Patient IE attributes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_5d31ea9e-c260-4b98-bdb5-55f301b42ae0">Study IE attributes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_54725bab-25ac-464c-b2b7-6dc073918aa0">Series IE attributes (SearchForSeries or SearchForInstances requests only)</para>
                </listitem>
                <listitem>
                  <para xml:id="para_6133e427-9667-436c-989d-3d28bcff06f3">Composite Instance IE attributes (SearchForInstances requests only)</para>
                </listitem>
                <listitem>
                  <para xml:id="para_e70c7064-35da-4127-a22b-d73bdbc70c60">Additional Query/Retrieve Attributes (<olink targetdoc="PS3.4" targetptr="sect_C.3.4" xrefstyle="select: docname label"/>)</para>
                </listitem>
                <listitem>
                  <para xml:id="para_118cc35b-825d-4665-9681-fd64d625dd23">Timezone Offset From UTC (0008,0201)</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_d62b2ccb-e463-412c-8060-3c69923b4205">See <xref linkend="sect_6.7.1.1.1" xrefstyle="select: label"/> for {attributeID} and {value} encoding rules</para>
            </listitem>
            <listitem>
              <para xml:id="para_cd9e37df-5eff-4f71-83ce-43da9b530ad5">fuzzymatching=true | false</para>
            </listitem>
            <listitem>
              <para xml:id="para_27fa0c03-58f7-4b48-8aa6-d87a82e6685a">limit={maximumResults}</para>
            </listitem>
            <listitem>
              <para xml:id="para_47401d38-c09a-476b-b273-76ca86c82a5b">offset={skippedResults}</para>
            </listitem>
          </itemizedlist>
          <section label="6.7.1.1.1" xml:id="sect_6.7.1.1.1">
            <title>{attributeID} encoding rules</title>
            <para xml:id="para_01ad2346-0122-449e-aa1e-429903e457f5">Each {attributeID} query key shall be unique unless the associated DICOM Attribute allows UID List matching (see <olink targetdoc="PS3.4" targetptr="sect_C.2.2.2.2" xrefstyle="select: docname label"/>), in which case each {value} will be interpreted to be an element of the UID List.</para>
            <para xml:id="para_5333301b-f76a-436d-876f-44ab87de94cc">The acceptable values for {value} are determined by the types of matching allowed by C-FIND for its associated {attributeID} (see <olink targetdoc="PS3.4" targetptr="sect_C.2.2.2" xrefstyle="select: docname label"/>). All characters in {value} that are disallowed for URIs shall be percent-encoded. See IETF RFC 3986 for details.</para>
            <para xml:id="para_b54c56a8-87a1-4efd-90a4-3e31e4a0ae8f">If an {attributeID} is passed as the value of an "includefield" query key this is equivalent to C-FIND Universal matching for the specified attribute (see <olink targetdoc="PS3.4" targetptr="sect_C.2.2.2.3" xrefstyle="select: docname label"/>).</para>
            <para xml:id="para_f8904356-308e-4aa5-9cc6-de7d821f4524">{attributeID} can be one of the following:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_b072e74a-17ea-4c7a-920a-4d87d4bd0fa0">{dicomTag}</para>
              </listitem>
              <listitem>
                <para xml:id="para_9dd75260-c60b-4bf9-a2ee-5c7cb02b4cac">{dicomKeyword}</para>
              </listitem>
              <listitem>
                <para xml:id="para_b4acbad5-cb3b-4198-aebd-64dd43586b51">{dicomTag}.{attributeID}, where {attributeID} is an element of the sequence specified by {dicomTag}</para>
              </listitem>
              <listitem>
                <para xml:id="para_ab252018-66f3-4528-9209-09b7cfc98156">{dicomKeyword}.{attributeID}, where {attributeID} is an element of the sequence specified by {dicomKeyword}</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_a3294265-2c91-497d-a5e4-603fb52fe51c">{dicomTag} is the eight character hexadecimal string corresponding to the Tag of a DICOM Attribute (see <olink targetdoc="PS3.6" targetptr="chapter_6" xrefstyle="select: docname label"/>).</para>
            <para xml:id="para_0f2c3f08-2718-45cc-a836-fbbddbc0112b">{dicomKeyword} is the Keyword of a DICOM Attribute (see <olink targetdoc="PS3.6" targetptr="chapter_6" xrefstyle="select: docname label"/>).</para>
            <note>
              <para xml:id="para_4b05e50b-307e-474f-89cb-fb4cd10c8db9">Examples of valid values for {attributeID}:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_7396b118-0201-4e4c-9378-9ac8a146bb00">0020000D</para>
                </listitem>
                <listitem>
                  <para xml:id="para_5ad34888-dd31-4249-a388-244aa736bb6e">StudyInstanceUID</para>
                </listitem>
                <listitem>
                  <para xml:id="para_8261a511-e11e-4a6a-b92a-bd9b501e2fbd">00101002.00100020</para>
                </listitem>
                <listitem>
                  <para xml:id="para_fff5690c-ab98-4198-afdd-fa8d52233820">OtherPatientIDsSequence.PatientID</para>
                </listitem>
                <listitem>
                  <para xml:id="para_632061d0-7bc1-4d0d-a06c-2257b8f0ac01">00101002.00100024.00400032</para>
                </listitem>
                <listitem>
                  <para xml:id="para_bcd9c18a-d4d2-4762-b86c-1adb81bea523">OtherPatientIDsSequence.IssuerOfPatientIDQualifiersSequence.UniversalEntityID</para>
                </listitem>
              </itemizedlist>
            </note>
            <note>
              <para xml:id="para_d7b404a9-d495-4a02-8957-1a8bf151ebc1">Examples of valid QIDO-RS URLs:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_f7f19803-a482-4c9b-87ec-4142b3040f13">http://dicomrs/studies​?PatientID=11235813</para>
                </listitem>
                <listitem>
                  <para xml:id="para_f3df2aae-0a14-4c31-9bb1-8db1e7438052">http://dicomrs/studies​?PatientID=11235813​&amp;StudyDate=20130509</para>
                </listitem>
                <listitem>
                  <para xml:id="para_8ea04713-1bc4-4679-a354-7138f087ac85">http://dicomrs/studies​?00100010=SMITH*​&amp;00101002.00100020=11235813​&amp;limit=25</para>
                </listitem>
                <listitem>
                  <para xml:id="para_ebeecb62-5a9e-451f-946b-33652770f9f4">http://dicomrs/studies​?00100010=SMITH*​&amp;OtherPatientIDsSequence.00100020=11235813</para>
                </listitem>
                <listitem>
                  <para xml:id="para_b375add3-512e-4be5-a158-524260c1962c">http://dicomrs/studies​?PatientID=11235813​&amp;includefield=00081048​&amp;includefield=00081049​&amp;includefield=00081060</para>
                </listitem>
                <listitem>
                  <para xml:id="para_b739b69e-07d9-4f80-b53a-2bd6f61967bf">http://dicomrs/studies​?PatientID=11235813​&amp;StudyDate=20130509-20130510</para>
                </listitem>
                <listitem>
                  <para xml:id="para_9ba6d3d2-f651-454e-a7cf-bb56d7aa4979">http://dicomrs/studies​?StudyInstanceUID=1.2.392.200036.9116.2.2.2.2162893313.1029997326.94587​%2c1.2.392.200036.9116.2.2.2.2162893313.1029997326.94583</para>
                </listitem>
              </itemizedlist>
            </note>
           </section>
        </section>
        <section label="6.7.1.2" status="4" xml:id="sect_6.7.1.2">
          <title>Response</title>
          <para xml:id="para_9a89396c-1453-4ec3-945d-aa315bb28174">The Server shall perform the query indicated in the request. The Server shall return the query results or, when the query cannot be performed, an error code.</para>
          <para xml:id="para_ac90db55-81ca-4681-8feb-32aee9c6e270">If the limit query key is not specified or its value exceeds the total number of matching results then {maximumResults} is the lesser of the number of matching results and the maximum number of results supported by the Server.</para>
          <para xml:id="para_ad54ba79-9d67-42a7-a4fe-24441338fcf1">If the offset query key is not specified or its value is less than zero then {skippedResults} is zero.</para>
          <para xml:id="para_00dddc8d-bb6d-4e56-bd8f-a92f4edfb936">The first result returned shall be result number ({skippedResults} + 1). The last result returned shall be result number ({skippedResults} + {maximumResults}). If ({skippedResults} + 1) exceeds {maximumResults} then no results are returned.</para>
          <para xml:id="para_46cf4869-b479-4dfc-8e09-414f5d0a99e5">If the number of results exceeds the maximum supported by the server, the server shall return the maximum supported results and the response shall include the following HTTP/1.1 Warning header (see RFC 7230 Section 14.46):</para>
          <para xml:id="para_ef3e3e2d-5559-44aa-bd31-205128221cf9">
            <computeroutput>Warning: 299 {SERVICE}: "The number of results exceeded the maximum supported by the server. Additional results can be requested.</computeroutput>
          </para>
          <note>
            <para xml:id="para_2a8a90ff-63c7-4322-bc2a-2919eed5b855">The client can request additional results by specifying a value for the "offset" query key.</para>
          </note>
          <para xml:id="para_e1140c73-c50d-4050-a58f-d59b9db04b8e">The server shall be idempotent so that if the list of results is the same, the response to a request with a specific set of parameters shall always be the same, including order. If the complete list of results is different for subsequent transactions the responses may be different. In a situation where results are changing due to changes in the server contents, queries using the limit and offset may be inconsistent.</para>
          <para xml:id="para_9b8e4884-94a6-49f7-aa5b-574faa72be57">The response format depends on the Accept header specified in the request.</para>
          <section label="6.7.1.2.1" status="5" xml:id="sect_6.7.1.2.1">
            <title>Matching</title>
            <para xml:id="para_99f8c3a6-d419-4f97-b0e5-f3ea0a7f5636">The matching semantics for each attribute are determined by the types of matching allowed by C-FIND (see <olink targetdoc="PS3.4" targetptr="sect_C.2.2.2" xrefstyle="select: docname label"/>).</para>
            <para xml:id="para_f3d8fd2f-81f4-4b94-982f-15be9b4193b6">Matching results shall be generated according to the Hierarchical Search Method described in <olink targetdoc="PS3.4" targetptr="sect_C.4.1.3.1.1" xrefstyle="select: docname label"/>.</para>
            <para xml:id="para_3e0b98af-c0c6-49d9-a6dc-bb5577a9f844">Combined Datetime matching shall be performed (see <olink targetdoc="PS3.4" targetptr="sect_C.2.2.2.5" xrefstyle="select: docname label"/>).</para>
            <note>
              <para xml:id="para_631905bc-fe96-4b37-9d54-f50427ccaf94">If a QIDO-RS provider is acting as a proxy for a C-FIND SCP that does not support combined Datetime matching the QIDO-RS provider will need to perform a C-FIND request using Date only and filter results outside the time range before returning a QIDO-RS response</para>
            </note>
            <para xml:id="para_1260d71e-c9a1-4cdf-bb63-86742c3f140f">If the TimezoneOffsetFromUTC / 00080201 query key is included in the request, dates and times in the request are to be interpreted in the specified time zone.</para>
            <para xml:id="para_b9f12be3-2aba-4f10-86f5-b6e65bbefbec">If the "fuzzymatching=true" query key/value is included in the request and it is supported then additional fuzzy semantic matching of person names shall be performed in the manner specified in the DICOM Conformance Statement for the service provider.</para>
            <para xml:id="para_de39c48f-d86e-451f-8312-4395c4172d57">If the "fuzzymatching=true" query key/value is included in the request and it is not supported, the response shall include the following HTTP/1.1 Warning header (see RFC 7230 Section 14.46):</para>
            <para xml:id="para_0294dabf-269b-4359-a8e0-ac4a3af81945">Warning: 299 {SERVICE}: "The fuzzymatching parameter is not supported. Only literal matching has been performed."</para>
            <para xml:id="para_a0e05231-e1b9-4103-9dbe-1e3aba6fa217">where {SERVICE} is the base URL for the QIDO-RS provider. This may be a combination of scheme (http or https), host, port, and application.</para>
            <note>
              <para xml:id="para_09fe8c8d-33d0-469f-a267-6a527f8fe105">The Warning header is separate from the Status Line and does not affect the returned Status Code.</para>
            </note>
            <section label="6.7.1.2.1.1" status="6" xml:id="sect_6.7.1.2.1.1">
              <title>Study Matching</title>
              <para xml:id="para_5a56b21c-a2f0-4e67-9008-1be13719878f">Providers of the SearchForStudies service shall support the search query keys described in <xref linkend="table_6.7.1-1" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-1" rules="all" xml:id="table_6.7.1-1">
                <caption>QIDO-RS STUDY Search Query Keys</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_4cafe425-d462-4461-a59d-1de14bcb19f5">Key Word</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_8686e43d-ae03-459a-86c0-140f94445946">Tag</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_75d057fd-4fe0-4f1e-a21d-661ff39d7fac">StudyDate</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_e782d3b0-6f06-4232-a41b-8f8203914039">00080020</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_ee47a97f-4461-46bc-b800-5e7a93e88e87">StudyTime</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_44d56abd-716b-4245-bcfe-28fb890b9718">00080030</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b6ed39e7-032c-4f0f-a3f8-5fb495b52b34">AccessionNumber</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_68881904-21c4-4eda-bbd4-dc51d087ecdc">00080050</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0ef7d792-f3ed-42ff-868b-08ce01918164">ModalitiesInStudy</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_a73f4477-413d-4fb9-9ded-8f2cfba1ef72">00080061</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_88a7384b-9398-490b-bf11-28654c012fce">ReferringPhysicianName</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_2ae5368f-ce9d-40a3-924a-757b37387deb">00080090</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_23fe7040-6252-4454-a144-67aacd9eebb7">PatientName</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_e40aaf74-7042-42c0-9d1c-e3144d4d26fe">00100010</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b4bde0a9-0b9e-41e7-9124-867fdf9eaa0e">PatientID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5c9eec0d-ee02-4b4e-afc5-0083a31b50b9">00100020</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b966faea-a980-43c0-8d26-4142407d0744">StudyInstanceUID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_c63753bf-08c4-44d6-8c02-af605ef599b6">0020000D</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5a0ef5d5-d3af-4589-8037-4fbb2c0c54ce">StudyID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_72fef80a-01ae-4bf0-83b3-d9719f96f6c1">00200010</para>
                    </td>
                  </tr>
                </tbody>
              </table>
            </section>
            <section label="6.7.1.2.1.2" status="6" xml:id="sect_6.7.1.2.1.2">
              <title>Series Matching</title>
              <para xml:id="para_5262a28b-b307-466d-9644-d94479246669">Providers of the SearchForSeries service shall support the search query keys described in <xref linkend="table_6.7.1-1a" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-1a" rules="all" xml:id="table_6.7.1-1a">
                <caption>QIDO-RS SERIES Search Query Keys</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_667370bb-05ff-4264-acd8-b8fbd4a0849c">Key Word</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_b15f5de4-ebdc-4d91-8250-32dff36d1081">Tag</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5d3f96ee-6520-4610-bafb-cbeaf54fd01d">Modality</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_dc6f627f-96dc-4c91-a4a3-1ffc709f2757">00080060</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_56ab557e-2b08-4e17-92ec-44b08aed9e55">SeriesInstanceUID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_bf37116d-5323-44eb-bbd1-d2227083b57b">0020000E</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_90f6bfde-866b-4596-aa3f-7e98b59fb0f9">SeriesNumber</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_64bdd008-0e15-4b2d-8319-215bb868ce61">00200011</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_c1ec1664-c41f-4a7e-aef0-f71d9d9a3e2b">PerformedProcedureStepStartDate</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_66a6d377-402c-4d3a-92c6-162204afb07b">00400244</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_4cf18746-3b2c-459a-a880-93b98d5fd00e">PerformedProcedureStepStartTime</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_a35fdf8f-fabf-460c-9226-d1468a89a368">00400245</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_adde5a0b-cba9-44a5-93d4-2e971e786213">RequestAttributeSequence</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_63c32aff-befd-473f-82cf-71580fa09857">00400275</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_6b57e3e3-a0d7-48b4-be51-d81f06094e9a">&gt;ScheduledProcedureStepID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_35a12667-110a-49c6-9098-afddd938fe9f">00400009</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_2ee17242-1a76-4d7f-bc37-be5f4e3c722a">&gt;RequestedProcedureID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0f5ad59e-d934-46e5-ad9b-aea3273e54c6">00401001</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para xml:id="para_aaf73857-6dad-46c7-90af-b7958bf74e1e">If {StudyInstanceUID} is not specified in the URL and this form of Relational Query is supported, all Study-level attributes specified in <xref linkend="table_6.7.1-1" xrefstyle="select: label"/> shall also be supported.</para>
            </section>
            <section label="6.7.1.2.1.3" status="6" xml:id="sect_6.7.1.2.1.3">
              <title>Instance Matching</title>
              <para xml:id="para_73d56890-ac01-40f6-83a8-fd807085ba45">Providers of the SearchForInstances service shall support the search query keys described in <xref linkend="table_6.7.1-1b" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-1b" rules="all" xml:id="table_6.7.1-1b">
                <caption>QIDO-RS INSTANCE Search Query Keys</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_363a90c4-3f19-4e6f-9907-30a6fc3a6a7b">Key Word</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_466c2868-6169-4a6d-ba54-ee1d860f8c19">Tag</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0a7a115d-2a8a-47a0-bb09-3d253876a97a">SOPClassUID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_ac0bc437-bfef-40b3-a732-26ecac75b485">00080016</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_853f0dd8-58ab-49e8-a882-896fbf405d86">SOPInstanceUID</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_ae0c6d77-17cf-424f-91ee-70e0fdffa3b4">00080018</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0c67a22b-acbb-4050-8296-42b9e27aefe3">InstanceNumber</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_7eb58d32-5aef-4a06-a112-ce1658fa658d">00200013</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para xml:id="para_b60130f0-639d-4b93-88cf-e889c2794c12">If {StudyInstanceUID} is not specified in the URL and this form of Relational Query is supported, all Study-level attributes specified in <xref linkend="table_6.7.1-1" xrefstyle="select: label"/> shall also be supported.</para>
              <para xml:id="para_44f36084-1284-4b74-9c01-1e49701d2c8c">If {SeriesInstanceUID} is not specified in the URL and this form of Relational Query is supported, all Series-level attributes specified in <xref linkend="table_6.7.1-1a" xrefstyle="select: label"/> shall also be supported.</para>
            </section>
          </section>
          <section label="6.7.1.2.2" status="5" xml:id="sect_6.7.1.2.2">
            <title>Query Result Attributes</title>
            <section label="6.7.1.2.2.1" status="6" xml:id="sect_6.7.1.2.2.1">
              <title>Study Result Attributes</title>
              <para xml:id="para_431a74ed-dda4-4067-86c3-4e28b82b4518">For each matching Study, the QIDO-RS provider shall return all attributes in accordance with <xref linkend="table_6.7.1-2" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-2" rules="all" xml:id="table_6.7.1-2">
                <caption>QIDO-RS STUDY Returned Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_5bb43fb6-adcc-4b0b-8b36-8db27a0aacb8">Attribute Name</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_07a5c770-305e-41d7-b7be-290ac562e3c9">Tag</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_d96cd9f9-994d-44ad-b647-b7a46d69384e">Notes</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_84ee58ac-b83c-4e7b-9ced-e057212a0ef4">Specific Character Set</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_c0598bdf-3cb6-4f19-a404-45b9659716ae">(0008,0005)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_a1a6fe5f-ee32-44f2-8039-cb2eb0d8e032">If necessary for encoding any returned attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0c9c825b-a497-4bf5-b98a-c9cd0ebf1762">Study Date</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_a9e3e963-67bd-4cff-a27a-58449a52d718">(0008,0020)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_befa0450-dfb1-43af-ba53-f76a89d3e717">Study Time</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_b43837bb-c1b9-4710-823d-3621f4f772ec">(0008,0030)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_6bff412c-f1c6-4008-8ec3-e3a9a7a62c21">Accession Number</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_8c81cfeb-cbe1-43d8-a8c4-8960761bf4ad">(0008,0050)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_79999211-2538-4a68-a8f6-253f3067d640">Instance Availability</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_6d8f97a4-7fe6-4694-8760-89fe0c8556ce">(0008,0056)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_aabecadc-d302-4988-a62b-6ad45451a9b9">Modalities in Study</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_a218a133-2582-4d4e-a2f3-ba98c82bf5c6">(0008,0061)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5a20a4be-bdb1-4454-8e32-ce26d5a65f15">Referring Physician's Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_659fd333-48a4-4096-9fce-734c719782f0">(0008,0090)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_9baaab62-6100-4a36-b6fc-fe16815fb192">Timezone Offset From UTC</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_71271bdb-1e89-4fac-b3e0-27baf1549873">(0008,0201)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_e8007f5a-74ff-4717-8049-351c7a118de2">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_3bfffdcd-15c9-48b3-a8e6-750b7d5ad6db">Retrieve URL</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_ecc1247e-5287-4c54-aebc-a55c0f6617b1">(0008,1190)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_6b1fa5fb-4831-484f-840c-8cc45ab00f45">Shall be empty if the resource cannot be retrieved via WADO-RS</para>
                      <note>
<para xml:id="para_7e5a8965-874c-46c4-b472-1815443902f7">The VR of this attribute has changed from UT to UR.</para>
</note>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_13f5a799-101a-400d-a39e-f6abd9470c8b">Patient's Name</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_a4f645b6-c232-4466-a2fa-84b481184eb3">(0010,0010)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_e8063db6-caaf-403c-a787-c545919fc4fc">Patient ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_bc93aad1-49c3-46e2-950e-6e7719437c14">(0010,0020)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_c8861245-a7fb-4d2c-95cf-9c1b2f80fd7d">Patient's Birth Date</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_081a2ee5-8706-4175-b059-b35a1ab06267">(0010,0030)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_625d28c7-23aa-4bb4-bf92-d9a4ab85f8a8">Patient's Sex</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_caf803c4-730a-4e0f-8fad-aabe6fd47232">(0010,0040)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_1975181e-dc50-4678-bc28-28773ffe2eff">Study Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_960e8c34-bc90-4ce4-bb77-db0518ae8a70">(0020,000D)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_4b6aa201-ddec-4665-b03b-3029adacdd93">Study ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_13d3246a-2cf9-42cc-8b26-997e8013eca5">(0020,0010)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_07e648b7-974e-487e-a364-da5ecad689a6">Number of Study Related Series</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_5ffc4688-651e-4906-b2f0-1eef51d1ec14">(0020,1206)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5b3e53ff-4c12-47be-a8f7-6c554f82d57e">Number of Study Related Instances</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_8863068a-c11e-4206-8ad3-3d24996b3c6d">(0020,1208)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_db813b79-a4b7-4593-9d16-42c263b47958">All other Study Level DICOM Attributes passed as {attributeID} query keys that are supported by the service provider as matching or return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_1234084f-eb92-4a1a-9bb2-b394602cdea9">All other Study Level DICOM Attributes passed as "includefield" query values that are supported by the service provider as return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_57fd51d4-101f-4d56-a403-6adddc2341fa">All available Study Level DICOM Attributes if the "includefield" query key is included with a value of "all"</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para xml:id="para_a8c82924-563f-4bc2-ba37-31769f940c09">Series Level and Instance Level attributes passed as "includefield" query values shall not be returned.</para>
              <note>
                <para xml:id="para_36622655-ae1f-4abb-92d1-58756674e7d9">The above list is consistent with those required for IHE RAD-14 (see <link xl:href="http://www.ihe.net/Technical_Framework/upload/IHE_RAD_TF_Vol2.pdf"/> Table 4.14-1).</para>
              </note>
            </section>
            <section label="6.7.1.2.2.2" status="6" xml:id="sect_6.7.1.2.2.2">
              <title>Series Result Attributes</title>
              <para xml:id="para_42c52c28-0a13-45e4-a491-a6b587669d1b">For each matching Series, the QIDO-RS provider shall return all attributes listed in <xref linkend="table_6.7.1-2a" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-2a" rules="all" xml:id="table_6.7.1-2a">
                <caption>QIDO-RS SERIES Returned Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_1091e53c-14e9-442b-9a07-37171c16474a">Attribute Name</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_da992f20-791d-4c47-acbb-48f85dcfcdd1">Tag</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_15168a5c-ba60-434a-9f98-7c57ad6e5765">Notes</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_16c81843-ccde-4c41-bbc3-25bfb2787bf1">Specific Character Set</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_69b0f98f-dcb8-4a1f-ba52-259e7b5194d1">(0008,0005)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_a95ab743-b08c-4b62-a436-cb9d88f986f2">If necessary for encoding any returned attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_656fef8b-4752-4b9a-a964-4934092b6c47">Modality</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_2010930e-6217-48e6-a8b9-4f4e20811d17">(0008,0060)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_d7799847-763f-4f98-beea-985fbd6ce552">Timezone Offset From UTC</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_1ab0e72c-1e77-4d83-b222-e640d5bdbeb5">(0008,0201)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5b09979d-777b-47e6-af45-3dc1fe78ceaf">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_1ed42bb4-3b3e-4458-8d08-58f380bf7e7b">Series Description</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_236a861c-b80e-4641-a47b-f36974c9beff">(0008,103E)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_1d355177-8e09-47f9-911f-797a33e5c80d">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_0e658bfd-623f-411b-a108-125165a135e3">Retrieve URL</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_1af401bf-b55f-4b84-bd80-879937b33d44">(0008,1190)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_802b055b-7196-4afa-a168-da8e27b323f8">Shall be empty if the resource cannot be retrieved via WADO-RS</para>
                      <note>
<para xml:id="para_09694f02-799c-4ec8-b422-31bba79e6f69">The VR of this attribute has changed from UT to UR.</para>
</note>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_be8c409a-7802-4bf3-9656-4c30215e4e90">Series Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_85f3dfa6-5461-4dcb-ad6b-b7c4065dc03c">(0020,000E)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_dc260267-2e15-4e17-af2f-e3e3a6661417">Series Number</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_553f650a-8fb4-49f7-b531-c83e5d78fea6">(0020,0011)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_1c4b34d4-d66b-4cc0-b540-88f48f80b970">Number of Series Related Instances</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_ccdce8e0-1566-462e-a666-31a6b4490293">(0020,1209)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b712fd2b-a124-4f01-b7a9-23fa546e4530">Performed Procedure Step Start Date</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_bfbeb5b8-05ac-49cb-a7f7-636708ac40c0">(0040,0244)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_31b4948f-df81-4385-b03b-e31a95e8d558">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_8356e99b-eac2-4a33-ad75-98e230f7933f">Performed Procedure Step Start Time</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_b47d466b-f114-43f0-b24a-e24bbd3c09a3">(0040,0245)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_faf3e5a2-3ff4-437e-9420-e9e4846c9752">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_921ed5dc-371f-416f-8ef1-4e3cc86a856b">Request Attribute Sequence</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_2a069154-4f28-46ae-8726-9e4b970cc008">(0040,0275)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b1be2ade-c155-4043-a1e8-45f73872ea91">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_a318f214-f4f7-42a5-9389-0c02e74755c0">&gt;Scheduled Procedure Step ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_d280a9b8-b237-488d-8dbf-c90bc18e5ac7">(0040,0009)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_3444d15e-7ad7-4d18-86ba-c51b47ef0757">&gt;Requested Procedure ID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_fe17bbca-01fa-493a-8fa0-edccb056b638">(0040,1001)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_06c69a9c-e37b-45a0-80b8-5f63bf959178">All other Series Level DICOM Attributes passed as {attributeID} query keys that are supported by the service provider as matching or return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_5ad94150-bf87-48fd-8b11-7e3ed0b37068">All other Study or Series Level DICOM Attributes passed as "includefield" query values that are supported by the service provider as return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_2fa4f7d6-611a-4c46-ba19-d617dc211142">All available Instance Level DICOM Attributes if the "includefield" query key is included with a value of "all"</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_4803c0f1-2ba8-4dd0-a135-faf663dcd8f1">If {StudyInstanceUID} is not specified, all Study-level attributes specified in <xref linkend="table_6.7.1-2" xrefstyle="select: label"/>
</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <para xml:id="para_f3cd13b3-609a-40f3-a58b-4f3231069475">Instance Level attributes passed as "includefield" query values shall not be returned.</para>
              <note>
                <para xml:id="para_fec55004-c9d4-4a71-95ed-09ce12221ac7">The above list is consistent with the attributes required for IHE RAD-14 (see <link xl:href="http://www.ihe.net/Technical_Framework/upload/IHE_RAD_TF_Vol2.pdf"/> Table 4.14-1).</para>
              </note>
            </section>
            <section label="6.7.1.2.2.3" status="6" xml:id="sect_6.7.1.2.2.3">
              <title>Instance Result Attributes</title>
              <para xml:id="para_77f13bd8-75f2-4e25-81c3-4992f9c0905d">For each matching instance, the QIDO-RS provider shall return all attributes listed in <xref linkend="table_6.7.1-2b" xrefstyle="select: label"/>:</para>
              <table frame="box" label="6.7.1-2b" rules="all" xml:id="table_6.7.1-2b">
                <caption>QIDO-RS INSTANCE Returned Attributes</caption>
                <thead>
                  <tr valign="top">
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_6d1adf4c-8930-4490-a9f9-204f9e2ca3ff">Attribute Name</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_acde4c60-d0c1-4635-9c9f-df77d76da296">Tag</para>
                    </th>
                    <th align="center" colspan="1" rowspan="1">
                      <para xml:id="para_2cb9bfef-686c-4103-a36c-38e3a08996e7">Notes</para>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_60f427c2-29fb-41d6-8084-98b941268084">Specific Character Set</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_be3f9861-16a7-4571-8dce-c022d09132e1">(0008,0005)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_844bded8-7167-4e62-baff-fcd73f85b8f7">If necessary for encoding any returned attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b2691fb4-046c-4f2e-b7a6-cb9b89cd91ee">SOP Class UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_5900837a-2d6e-4d1e-ab3e-aaf994c92ad7">(0008,0016)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b2b33c0a-2016-4bf5-bc5b-c31b52247473">SOP Instance UID</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_69188c23-45a5-45af-a4b7-421411b5f427">(0008,0018)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_7c35c611-b908-4ee6-b8cb-4991dd146180">Instance Availability</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_df5d44d5-5778-49ed-8474-e3566003a2a7">(0008,0056)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_37bb6a52-ac97-46fb-a5ca-7864be600ed9">Timezone Offset From UTC</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_5cddbe54-4259-4eb8-9f61-4a86293462b3">(0008,0201)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_c279c548-418f-4989-83d6-82ed3134b828">May be absent if no value is available</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_01258ebe-6b67-4552-bf9a-d2126646dcfb">Retrieve URL</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_2dfa7f4f-4398-4b93-9fe1-27dde2823a66">(0008,1190)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_b06e4407-7eaa-4b3b-abe0-9d19c5cddc0f">Shall be empty if the resource cannot be retrieved via WADO-RS</para>
                      <note>
<para xml:id="para_f5496b0f-28f0-46bf-a264-124177946dc2">The VR of this attribute has changed from UT to UR.</para>
</note>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_209d9120-7b40-4c06-85f6-f6c2257759aa">Instance Number</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_962f3385-bb3f-461d-a0b7-1cf1e6a3a583">(0020,0013)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1"/>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_23782e7b-d195-4905-88fd-82d646bc45d6">Rows</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_dd8e0dae-055b-409d-97f5-6762f12636e3">(0028,0010)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_ef1b73db-9562-492a-bc03-19cddafbced7">Only present for Image Instances</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_ae42c252-48ad-409b-8eb0-fd1a711c4f2d">Columns</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_802df200-fed5-4b40-8749-1520551a6fb9">(0028,0011)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_07fd3a64-1393-40ca-aaeb-5a31eb9abc65">Only present for Image Instances</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_e7ff7493-a24c-48a8-8121-60e412ea6317">Bits Allocated</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_abd93f45-51e0-4874-b504-11fc23e3510c">(0028,0100)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_5027ee64-29c9-4f58-aeb5-0bd1ca34bfcf">Only present for Image Instances</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_22ad3a2c-372f-4d0d-845a-c429bf73f3d7">Number of Frames</para>
                    </td>
                    <td align="center" colspan="1" rowspan="1">
                      <para xml:id="para_63388e39-814a-4578-9826-242623e386db">(0028,0008)</para>
                    </td>
                    <td align="left" colspan="1" rowspan="1">
                      <para xml:id="para_1e8c8c9f-9335-4a79-beb4-4514cb5f39a8">Only present for Multi-frame image instances</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_f7e01460-0ec6-4454-bad1-a7095f064fd0">All other Instance Level DICOM Attributes passed as {attributeID} query keys that are supported by the service provider as matching or return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_785b890e-7e95-4d60-822f-811866938d58">All other Study, Series or Instance Level DICOM Attributes passed as "includefield" query values that are supported by the service provider as return attributes</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_22a4e7d5-6e3b-4b14-af7f-1edb3db98161">All available Instance Level DICOM Attributes if the "includefield" query key is included with a value of "all"</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_f2bb21ba-8170-4523-9fe0-7a9da3ecb102">If {StudyInstanceUID} is not specified, all Study-level attributes specified in <xref linkend="table_6.7.1-2" xrefstyle="select: label"/>
</para>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td align="left" colspan="3" rowspan="1">
                      <para xml:id="para_5af7c4c0-1c4c-4a43-be6b-95b488bfbd21">If {SeriesInstanceUID} is not specified, all Series-level attributes specified in <xref linkend="table_6.7.1-2a" xrefstyle="select: label"/>
</para>
                    </td>
                  </tr>
                </tbody>
              </table>
              <note>
                <para xml:id="para_4b6b6cc6-1374-4f5f-8635-6cfb03283f2d">The above list is consistent with the attributes required for IHE RAD-14 (see <link xl:href="http://www.ihe.net/Technical_Framework/upload/IHE_RAD_TF_Vol2.pdf"/> Table 4.14-1 and Table 4.14-2).</para>
              </note>
            </section>
          </section>
          <section label="6.7.1.2.3" status="5" xml:id="sect_6.7.1.2.3">
            <title>Query Result Messages</title>
            <para xml:id="para_18106137-0fb4-4d25-a837-36edaf86ab3a">The server shall support returning query results as:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_d03132e8-a1a9-4d36-b68d-6cc839cadafc">XML Results</para>
              </listitem>
              <listitem>
                <para xml:id="para_50b3dd99-16af-4887-94db-636e2db249a5">JSON Results</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_26ca0dcd-2f43-4ee2-94c5-1b0244e69bd3">The result format used shall depend on the Accept header of the request.</para>
            <section label="6.7.1.2.3.1" status="6" xml:id="sect_6.7.1.2.3.1">
              <title>XML Results</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_97a4850b-6af3-4fad-afd5-46ab49ac8bcc">Content-Type: multipart/related; type=application/dicom+xml</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_d0efc730-f17e-49a3-ae36-453d434cd01e">The response is a multipart message body where each part is a DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML NativeDicomModel element containing the attributes for one matching Study, Series or Instance (see <olink targetdoc="PS3.19" targetptr="sect_A.1" xrefstyle="select: docname label"/>).</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_91888ecf-835e-4672-972e-a6af847c3c5c">The provider of the QIDO service may use a BulkData reference at its discretion (see <olink targetdoc="PS3.19" targetptr="table_A.1.5-2" xrefstyle="select: docname label"/> and <xref linkend="sect_6.5.6" xrefstyle="select: label"/>). For example, this might be done to avoid encoding a large DICOM Value Field, such as an image thumbnail.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_9caedebc-726c-4f99-920a-e67eb8a9a921">If there are no matching results, the message body will be empty.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_6763fad6-5ec3-4703-b24d-f6308d245d86">Each item in the multipart response will contain the following HTTP/1.1 headers:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_092a463b-3b38-4c2b-ba09-0b1d380855e1">Content-Type: application/dicom+xml</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </section>
            <section label="6.7.1.2.3.2" status="6" xml:id="sect_6.7.1.2.3.2">
              <title>JSON Results</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_27bfa234-d26c-404c-9e81-5e1f77892f3b">Content-Type: application/json</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_3f601145-7fb0-43fb-a512-311e337ef3d9">The response is a DICOM JSON message containing a DICOM JSON property for each matching study, series or instance containing sub-properties describing the matching attributes for each study, series or instance (see <xref linkend="sect_F.2" xrefstyle="select: label"/>).</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_72f275f4-3c9c-424f-af2b-941f4fd2918c">The provider of the QIDO service may use a BulkDataURI reference at its discretion (see <xref linkend="sect_F.2.6" xrefstyle="select: label"/>). For example, this might be done to avoid encoding a large DICOM Value Field, such as an image thumbnail.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_4d25dfcf-24f9-4e9e-a0bf-dc3c1a76ab9b">If there are no matching results, the JSON message is empty.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </section>
          </section>
        </section>
        <section label="6.7.1.3" status="4" xml:id="sect_6.7.1.3">
          <title>Status Codes</title>
          <para xml:id="para_9ce841e3-02bf-477f-a4bc-9370be0e5318">
<xref linkend="table_6.7-1" xrefstyle="select: label"/> lists the HTTP/1.1 status codes that shall be used to report any of the associated error and warning situations. Other error codes may be present for other error and warning situations.</para>
          <table frame="box" label="6.7-1" rules="all" xml:id="table_6.7-1">
            <caption>QIDO-RS HTTP/1.1 Status Codes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_278d556c-f541-46a6-9102-237f730a2f4f">
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_29ec3813-9467-4d9f-99a8-358ca0d2ab09">
                    <emphasis role="bold">Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_934b8e87-a6bd-4487-9c88-e64cb0bedac7">
                    <emphasis role="bold">Description</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="3" rowspan="1">
                  <para xml:id="para_b6f8a79b-e2b8-4994-8c15-cab1d049d455">Success</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_50708b2d-c0a4-4de1-9a78-00a9c3fca134">200</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para xml:id="para_083149e0-25df-443d-b77a-7e937a217b02">OK</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_0af23a9c-bd31-49ec-976d-04bcffe106cc">The query completed and any matching results are returned in the message body.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="3" rowspan="1">
                  <para xml:id="para_f177b67b-21b3-4e61-a45f-b952dc6d0df7">Failure</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_12826091-bbee-4cd2-8ae5-304f1c35fb63">400</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_d825ec56-b0b8-4f2c-88ad-f39fd88501d0">Bad Request</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_ade8ec0b-cb9f-480b-81a8-2370c9366231">The QIDO-RS Provider was unable to perform the query because the Service Provider cannot understand the query component.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_4f40cdec-9f99-4196-96ba-0aed1a52b92f">401</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_45413116-0686-4aa9-bda2-3eedeac52ad5">Unauthorized</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_ed912d5d-dac7-43cb-bb50-2caf382eaab1">The QIDO-RS Provider refused to perform the query because the client is not authenticated.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_7f95c620-afd1-4c3f-ad35-2c53c73c41ac">403</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_c0b3625f-5ef1-4a9a-a4bf-aa442e5c35ee">Forbidden</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_794aa883-3c8b-40e6-84e1-59e23fc878e9">The QIDO-RS Provider understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_351c4369-dc1d-45b8-98c5-6afbdea36bf3">413</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_59ce0f48-da6a-428b-a71b-4f97163a95b0">Request entity too large</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_6694dec5-ffbe-4e1e-b113-466354fcb789">The query was too broad and a narrower query or paging should be requested. The use of this status code should be documented in the conformance statement.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_16c11c18-4edf-4ecf-90e8-d9a5881a48ab">503</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_84f35de8-f5bc-46c0-946d-7654a00fb856">Busy</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_98e74eac-5529-4923-a787-c33972918b53">Service is unavailable.</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
    <section label="6.8" status="2" xml:id="sect_6.8">
      <title>RS Capabilities Service</title>
      <para xml:id="para_21e48b80-e4d6-4866-a130-63c0396f3971">DICOM RS Capabilities Service defines a single transaction type which shall be supported by all implementations</para>
      <orderedlist numeration="loweralpha">
        <listitem>
          <para xml:id="para_f549b331-7dd6-44ba-9d61-dc8dbe22186a">RetrieveCapabilities</para>
          <para xml:id="para_43412f67-2d19-4cf6-b872-7681f7c443cd">This transaction retrieves the parameters for services supported by the server.</para>
        </listitem>
      </orderedlist>
      <section label="6.8.1" status="3" xml:id="sect_6.8.1">
        <title>Retrieve Capabilities</title>
        <section label="6.8.1.1" status="4" xml:id="sect_6.8.1.1">
          <title>Request Message</title>
          <para xml:id="para_b8739dc4-5758-43d9-91c8-beac48aabf97">The Retrieve Server Options transaction can be requested for the following resources:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_2a735a19-85eb-445e-82e2-94ad8d9e2eae">{+SERVICE}/{InformationEntity*}</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_c6ff1cfb-be50-4850-929f-c9a5ff27e11a">where {+SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
                </listitem>
                <listitem>
                  <para xml:id="para_3e93122f-5725-4ff6-b43f-198769faa696">where {InformationEntity} is the path to a defined DICOM RESTful service resource, such as:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_6a86f070-c798-4bdf-bdbc-44ab9d09c41d">WADO-RS (see
                        <xref linkend="sect_6.5.1" xrefstyle="select:labelnumber"/>,
                        <xref linkend="sect_6.5.2" xrefstyle="select:labelnumber"/>,
                        <xref linkend="sect_6.5.3" xrefstyle="select:labelnumber"/>,
                        <xref linkend="sect_6.5.4" xrefstyle="select:labelnumber"/>,
                        <xref linkend="sect_6.5.5" xrefstyle="select:labelnumber"/>,
                        <xref linkend="sect_6.5.6" xrefstyle="select:labelnumber"/>)</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_ca6df99f-21bb-4927-9519-7a50303c7c33">STOW-RS (see <xref linkend="sect_6.6.1" xrefstyle="select:labelnumber"/>)</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_db925c4a-fd26-42f1-9789-a418bd947e09">QIDO-RS (see <xref linkend="sect_6.7.1" xrefstyle="select:labelnumber"/>)</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_30b24bd5-6357-4020-a951-8149800a333a">UPS-RS (see
                      <xref linkend="sect_6.9.1" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.2" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.3" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.4" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.5" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.6" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.7" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.8" xrefstyle="select:labelnumber"/>,
                      <xref linkend="sect_6.9.9" xrefstyle="select:labelnumber"/>)</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
          <section label="6.8.1.1.1" status="5" xml:id="sect_6.8.1.1.1">
            <title>Method = OPTIONS</title>
            <para xml:id="para_50d0a039-046e-480d-88b5-6a709f605455">The Retrieve Server Options Service request messages use the OPTIONS method.</para>
          </section>
          <section label="6.8.1.1.2" status="5" xml:id="sect_6.8.1.1.2">
            <title>Header Fields</title>
            <para xml:id="para_b39c076d-4a4f-41f1-9bb1-935d0b7c4abb">The Retrieve Server Options Service request messages can include the following header fields:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_789400c5-71f9-41c2-96d9-26c6b68b0545">Accept:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_d57b166e-55b2-4ffa-b65c-0dec40d4dcaa">application/vnd.sun.wadl+xml</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_58c7ef83-956d-4c82-9cec-5d2068d5b06e">application/json</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="6.8.1.2" status="4" xml:id="sect_6.8.1.2">
          <title>Response message</title>
          <para xml:id="para_6d652a29-ae39-421c-864e-4c817df616c4">All responses are http single part messages. A successful response will return a Web Application Description Language (WADL) document encoded in a Media Type consistent with the Accept header of the request.</para>
          <para xml:id="para_c88dd881-2333-4403-8572-4cb039079cda">The WADL document shall contain one top-level "application" element.</para>
          <para xml:id="para_5db6c5bf-1f13-45f2-b32e-cc274284f66f">The "application" element shall contain one "resources" element whose "base" attribute value is {SERVICE},
            where {SERVICE} is the base URL for the service. This may be a combination of protocol (either http or https), host, port, and application.</para>
          <para xml:id="para_d7060c2f-eb0a-4239-a171-5a8b4850d7c6">Additionally, the WADL content shall include a "resource" element for the resource specified in the request (see
            <xref linkend="sect_6.8.1.1" xrefstyle="select:labelnumber"/>) describing all methods (see
            <xref linkend="sect_6.8.1.2.2.2" xrefstyle="select:labelnumber"/> for description and examples) and child
              resources (see
            <xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/> for description and examples) for the specified resource and each of its children.</para>
          <section label="6.8.1.2.1" status="5" xml:id="sect_6.8.1.2.1">
            <title>Resources</title>
            <para xml:id="para_847b3d80-2009-4762-bd64-29976abcb8ff">The full WADL resource tree follows directly and unambiguously from the RESTful resource endpoints defined in
              <xref linkend="sect_6.5" xrefstyle="select:labelnumber"/>,
              <xref linkend="sect_6.6" xrefstyle="select:labelnumber"/>,
              <xref linkend="sect_6.7" xrefstyle="select:labelnumber"/> and
              <xref linkend="sect_6.9" xrefstyle="select:labelnumber"/>.</para>
            <para xml:id="para_46fbd4cd-6276-4413-b9b5-c42d7106b148">For informative purposes, the full resource tree and the methods defined for each resource are described in <xref linkend="table_6.8-1" xrefstyle="select:label"/>.</para>
            <table frame="box" label="6.8-1" rules="all" xml:id="table_6.8-1">
              <caption>Resources and Methods</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_13cf7165-878d-4b12-8252-6eedee9b440c">
                      <emphasis role="bold">Resource</emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_e3c01bd1-8bc6-479a-8f7d-a864f4376468">
                      <emphasis role="bold">Methods supported 
                        (excluding RetrieveCapabilities)
                      </emphasis>
                    </para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_162115cd-4444-4905-8003-ae885d725748">
                      <emphasis role="bold">Reference</emphasis>
                    </para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_419ebc0e-f44d-4d1c-8a5f-87f3313382dd">{+SERVICE}</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1352e5be-ee10-4a26-92b9-56c39fbe083c">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b2696ba3-fed1-4fa4-911c-7de1cae2ed7c">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_0eca84c3-4265-47d5-b470-a0debe1c20e0">studies</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_292560af-f269-4eef-adb1-26947cae1bc5">SearchForStudies</para>
                    <para xml:id="para_2e7701e6-de91-4efc-877c-d75d1e935613">StoreInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_fb3e9817-1e7f-4a08-847b-5de2b5fa2753">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_25d99258-d62a-47da-88e1-222cf02a028e">
<xref linkend="sect_6.8.1.2.2.2" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                         <listitem>
<para xml:id="para_34d3e5aa-2dbe-4cae-824d-1c0dd1abdcbc">{StudyInstanceUID}</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_792de50f-5339-4628-b87a-f4eff83b5451">RetrieveStudy</para>
                    <para xml:id="para_4ef92193-9a9b-42c1-9c49-6788e58ea61d">StoreStudyInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7ea40d8a-e68e-4c1c-b7be-b1841f7a3d6e">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_a594387e-278b-41db-8029-f5e6b4d34753">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_2f87532a-900b-4587-9f7a-6daf82ba0edc">metadata</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d86df5bb-716d-4894-a0af-5161431ca077">RetrieveStudyMetadata</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_494eb728-f8a4-44f7-a04b-a64168d36d3d">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_1ef6e48b-c00f-42f2-9073-da3becad3e00">series</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ea4816c6-d589-4d80-8fc1-873e39986d0d">SearchForStudySeries</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_dee9782c-66a4-4bb1-b809-7bd2e9878125">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
<para xml:id="para_34c27418-c89d-48d6-a44e-92601b7bd3b0">{SeriesInstanceUID}</para>
</listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1bedf417-d843-4251-b44e-22ffd7767bec">RetrieveSeries</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1c82459e-dcea-4160-94fc-6e0411818212">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
<para xml:id="para_38f2fe6c-daef-4c3c-9ea5-b721ff7e5947">metadata</para>
</listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bc5b9d54-6d7b-4ea4-875c-c9a689cbdcdb">RetrieveSeriesMetadata</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e126201c-221b-458a-834c-96f36047c9f9">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
<para xml:id="para_c064348a-e37f-42c2-a20a-9be560af8193">instances</para>
</listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cbda8860-c862-4d19-a6e7-3f02c81d5520">SearchForStudySeriesInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e707657b-dd0f-479f-a844-cb657fd0b0e3">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
                                        <itemizedlist mark="none">
                                          <listitem>
<para xml:id="para_1bc06cde-f60e-4b1c-bbe8-ec617b72565c">{SOPInstanceUID}</para>
</listitem>
                                        </itemizedlist>
                                      </listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_afffc4dd-9006-4fd1-b65d-f14ba0af0bf2">RetrieveInstance</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_916a4ce3-29eb-4648-aba2-80685718d438">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
                                        <itemizedlist mark="none">
                                          <listitem>
                                            <itemizedlist mark="none">
                                              <listitem>
<para xml:id="para_9020c6b2-384a-43bc-b081-3b3f33197e35">metadata</para>
</listitem>
                                            </itemizedlist>
                                          </listitem>
                                        </itemizedlist>
                                      </listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f95f6ce7-1783-4c61-a029-d04109dcf3a2">RetrieveInstanceMetadata</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d6ae1ada-bceb-4f8e-950e-3aefd75c2a69">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
                                        <itemizedlist mark="none">
                                          <listitem>
                                            <itemizedlist mark="none">
                                              <listitem>
<para xml:id="para_a5aeaff6-2d3e-41df-80d2-5b972e029535">frames</para>
</listitem>
                                            </itemizedlist>
                                          </listitem>
                                        </itemizedlist>
                                      </listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_de3f6e83-f824-4b74-b8f6-f98983e03e7d">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_184b7570-ec4d-4ea2-aba8-9f97cdf8db46">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
                                        <itemizedlist mark="none">
                                          <listitem>
                                            <itemizedlist mark="none">
                                              <listitem>
                                                <itemizedlist mark="none">
                                                  <listitem>
<para xml:id="para_6d4177c4-2e9b-44ae-b0af-bcab66b17e7a">{framelist}</para>
</listitem>
                                                </itemizedlist>
                                              </listitem>
                                            </itemizedlist>
                                          </listitem>
                                        </itemizedlist>
                                      </listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_84ddf201-c82f-4848-b5c7-379d30fa1f80">RetrieveFrames</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c7eef9c8-2160-4303-b1e1-56d256958b73">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_dcc121dc-f560-4aba-ac6a-6fe362e14c02">instances</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3459677d-5e98-4ada-a9c6-22b00cca5abf">SearchForStudyInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_10301bb3-7b7c-4ec1-8141-41e41c25485d">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_e0d8a642-5132-4c28-9198-c5c809b119e7">series</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3ae2469c-12db-486a-a915-f9ad60dc4d1e">SearchForSeries</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b8bb700b-b9cb-464b-8521-ba9bdeceacd2">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_220dab74-095a-45f2-a259-67a7ef782ae1">{SeriesInstanceUID}</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bc5d29be-077a-447b-b0f7-866c0faa6f97">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cca8455a-262e-49e0-9894-1f55f83b2d6d">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_462a0446-a4d5-4f6d-875f-b51938f92235">{instances}</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8df7882d-0886-49e2-866b-60ec4e107079">SearchForInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0246c938-8f4f-4b34-8ab3-90d5e9725c44">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_d01a184e-6c67-4f78-9379-c995c75a4be2">instances</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ae817f33-930c-4cf4-9a1c-34b6804c8d4f">SearchForInstances</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_41c96efe-aad6-4188-83ff-dfdcbefddcb2">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_de48b7b3-524e-4703-89e0-c31f9f80044e">{BulkDataURL}</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_468953a4-4946-4601-b7a3-0e2c045fdcf2">RetrieveBulkData</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9f2d9e95-1258-4c60-963e-da767721edc0">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e876cbc8-5a4c-4f6e-8b5d-2425371ca86e">workitems</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_22dfc0c3-2f95-4179-ba4c-264cf2cace09">SearchForUPS</para>
                    <para xml:id="para_364f0dc1-039b-485c-85cd-9ea17a0084c9">CreateUPS</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c20806c7-4129-43d6-9415-c64c68702b25">
<xref linkend="sect_6.8.1.2.2.3" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_24951661-add6-4f9f-8391-aef662314b3a">
<xref linkend="sect_6.8.1.2.2.2" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_08ef1e07-488b-4993-94f0-66948659aba2">{UPSInstanceUID}</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_25881b15-8469-4b1b-9416-5bcfbdb1d039">RetrieveUPS</para>
                    <para xml:id="para_a39be98a-5668-44ce-b824-59a12ce8f686">UpdateUPS</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1dbea22a-5789-42c3-b4eb-52413943f997">
<xref linkend="sect_6.8.1.2.2.1" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_bb1e955c-4fc8-40aa-86cb-fa00a58612d9">
<xref linkend="sect_6.8.1.2.2.4" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_26759ab2-dbe3-4cf4-b4b1-963cc2e34272">state</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_55d973fc-5d01-4db5-96a9-2fcf0ac0b31e">ChangeUPSState</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0a7f196b-e290-4aee-ba17-2ea0e6ee727a">
<xref linkend="sect_6.8.1.2.2.4" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_ba23ac44-bad8-4d4c-9dba-a7534e1193ee">cancelrequest</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a9bd1069-ce97-4a1a-bf9a-5c26bfe902af">RequestUPSCancel</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bc540c19-0938-4c70-8a8e-31b59a143b35">
<xref linkend="sect_6.8.1.2.2.4" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_62224a31-7d69-46c9-9956-bd4ac9352070">subscribers</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5e9c6980-4bc0-458b-be64-578ccfbd4f53">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6c6354d1-d0ab-4851-8e49-1155efa7d554">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_8a08724b-97da-4a9a-9085-30a45f70c3a3">{AETitle}</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_beae909d-afc1-40b6-9a88-590c2b26d838">CreateSubscription</para>
                    <para xml:id="para_7404bf93-efc0-4416-8b43-b4fc9052174f">DeleteSubscription</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b367db03-44dd-4297-85a0-bc88faaedddf">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_ddcf781c-c53c-4298-b3a3-ff8feed561dc">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_4c338a9a-2757-4c0b-9734-eec8f515d930">1.2.840.10008.5.1.4.34.5</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6f1d7a7e-9653-43f9-9fe0-b97b5e6e6ca0">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7e946bf1-6494-46cf-92a5-e66ac87cc5a2">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_95121d9a-2ca2-4539-b814-198506807713">subscribers</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7a781e2a-66a3-4e62-98fc-ea88299a9227">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ef5735ef-3f94-4365-a152-2b3be2403c37">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_1d3e79cf-ff0c-453c-b62a-6882210e5244">{AETitle}</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9482e597-c1c7-42f7-ad86-1c6d1e6dca1c">CreateSubscription</para>
                    <para xml:id="para_48b6fc6d-3c2d-4083-b6c6-10e1bcaba573">DeleteSubscription</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2a647842-0d08-45ed-9362-6e9eeb924e6d">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_81bddbc4-14bd-495b-9d08-014699e906c4">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
<para xml:id="para_a76b394e-b2fe-4bea-863f-f8e24c1391ad">suspend</para>
</listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6ea526e5-3000-4b48-a427-bca5f5e9f69e">SuspendGlobalSubscription</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9a1b9609-e192-4dde-b186-afa4181769fe">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
<para xml:id="para_d89f9968-162e-433a-8169-1de398916862">1.2.840.10008.5.1.4.34.5.1</para>
</listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4a1f9698-82ea-485d-bd16-86d5cb15c4cb">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_67304665-360e-46cf-ba41-bcbdd9d7d6fb">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
<para xml:id="para_93303b66-0de0-471a-8662-db5d9fdb0f28">subscribers</para>
</listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3b3d7d08-2141-42e1-9d8a-3d9bb3ee7862">N/A</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4d971aa2-dbe1-4033-855b-898f5e6ae7f3">N/A</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
<para xml:id="para_73543713-088c-49f1-930d-fed28ccb3a99">{AETitle}</para>
</listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9852cbf8-19f1-4faa-896b-add293a1c17c">CreateSubscription</para>
                    <para xml:id="para_89c849c2-79d5-4b72-967d-42c66e0714be">DeleteSubscription</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_00a9af61-d1b7-4423-9c24-a55bb54bb047">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                    <para xml:id="para_465a9830-87a6-470d-9bb9-ecbef396505e">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <itemizedlist mark="none">
                      <listitem>
                        <itemizedlist mark="none">
                          <listitem>
                            <itemizedlist mark="none">
                              <listitem>
                                <itemizedlist mark="none">
                                  <listitem>
                                    <itemizedlist mark="none">
                                      <listitem>
<para xml:id="para_26ece7fb-c1ed-41d3-b685-63a86ff5e9ce">suspend</para>
</listitem>
                                    </itemizedlist>
                                  </listitem>
                                </itemizedlist>
                              </listitem>
                            </itemizedlist>
                          </listitem>
                        </itemizedlist>
                      </listitem>
                    </itemizedlist>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_932a8f83-fdaa-4996-89e7-7177c7fb240f">SuspendGlobalSubscription</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2ea17682-313a-4b29-a06e-ad14551ed9d2">
<xref linkend="sect_6.8.1.2.2.5" xrefstyle="select:labelnumber"/>
</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.8.1.2.2" status="5" xml:id="sect_6.8.1.2.2">
            <title>Methods</title>
            <section label="6.8.1.2.2.1" status="6" xml:id="sect_6.8.1.2.2.1">
              <title>Retrieve Methods</title>
              <para xml:id="para_7838ab16-b385-42b9-a7e9-2d6ee6d059a8">The Retrieve methods define the capabilities of a WADO-RS resource (see <xref linkend="sect_6.5" xrefstyle="select:labelnumber"/>) or a RetrieveUPS resource (see <xref linkend="sect_6.9.4" xrefstyle="select:labelnumber"/>).</para>
              <para xml:id="para_e25a5d7d-14f0-430e-a53c-bf8defc40838">The Retrieve methods shall contain the following attributes:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_e9d21c95-2466-4738-a84e-8a60a15f5614">A "name" attribute with a value of "GET"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_a1efbdaf-6b3f-4e12-a666-b51016baf184">An "id" attribute with a value of "RetrieveStudy", "RetrieveSeries", "RetrieveInstance", "RetrieveBulkData", "RetrieveFrames", "RetrieveStudyMetadata", "RetrieveSeriesMetadata", "RetrieveInstanceMetadata" or "RetrieveUPS"</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_230be8dc-4782-48b9-bdfb-d007782a22d2">The Retrieve methods shall contain a "request" element with "param" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_edc37451-00dd-465d-b9be-d54b0ef77be8">supported Accept header values</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_703eb1c3-db77-4518-b4d5-99b274c1864a">if the same Media Type is supported with multiple Transfer Syntaxes there should be one entry for each combination of Media Type and Transfer Syntax</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
              <para xml:id="para_8d06522e-1415-45d0-b0fc-2d998637af60">The Retrieve methods shall contain one or more "response" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_f96e748c-df67-4c99-87a7-0c3aba8dce8a">supported Status Codes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_3bf5be03-f30c-4098-b333-1ad5a42985d4">Media Types returned for each Status Code (if applicable)</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_34cb8169-0def-4bdd-a052-7b4fae8739f2">if the same Media Type is supported with multiple Transfer Syntaxes there should be one entry for each combination of Media Type and Transfer Syntax</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
              <note>
                <para xml:id="para_9bbc6c51-1535-458f-b7a4-3a41b6954068">More than one Status Code can be described by a single "response" element.</para>
              </note>
              <para xml:id="para_97d15ee5-bdee-4ddd-9334-0e97ca86365e">Example:</para>
              <programlisting><![CDATA[<method name="GET" id="RetrieveStudies">
	<request>
		<param name="Accept" style="header" default="multipart/related; type=application/dicom">
			<option value="multipart/related; type=application/dicom" />
			<option value="multipart/related; type=application/dicom";
			        transfer-syntax=1.2.840.10008.1.2 />
			<option value="multipart/related; type=application/dicom";
			        transfer-syntax=1.2.840.10008.1.2.1 />
			<option value="multipart/related; type=application/octet-stream" />
			<option value="multipart/related; type=image/dicom+jpx" />
			<option value="multipart/related; type=image/dicom+jpx;
			        transfer-syntax=1.2.840.10008.1.2.4.92" />
			<option value="multipart/related; type= video/mpeg;
			        transfer-syntax=1.2.840.10008.1.2.4.100" />
		</param>
	</request>
	<response status="200,206">
		<representation mediaType="multipart/related; type=application/dicom";
		                transfer-syntax=1.2.840.10008.1.2 />
		<representation mediaType="multipart/related; type=application/dicom";
		                transfer-syntax=1.2.840.10008.1.2.1 />
		<representation mediaType="multipart/related; type=application/octet-stream" />
		<representation mediaType="multipart/related; type= image/dicom+jpx" />
		<representation mediaType="multipart/related; type= image/dicom+jpx;
		                transfer-syntax=1.2.840.10008.1.2.4.92" />
		<representation mediaType="multipart/related; type= video/mpeg;
		                transfer-syntax=1.2.840.10008.1.2.4.100" />
	</response>
	<response status="400 404 406 410 503" />
</method>
]]></programlisting>
            </section>
            <section label="6.8.1.2.2.2" status="6" xml:id="sect_6.8.1.2.2.2">
              <title>Store Methods</title>
              <para xml:id="para_eb3fbf72-afe9-40f7-a85b-103d0aa3f8aa">The Store methods define the capabilities of a STOW-RS resource (see <xref linkend="sect_6.6" xrefstyle="select:labelnumber"/>) or a CreateUPS resource (see <xref linkend="sect_6.9.1" xrefstyle="select:labelnumber"/>).</para>
              <para xml:id="para_bd76fc96-a122-4e6e-9e8b-7d0ccdae1c64">The Store methods shall contain the following attributes:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a29875fa-2e43-4df5-bccb-6a59a9351eda">A "name" attribute with a value of "POST"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_d6b89244-c810-4a59-9b9b-cfa0186bc580">An "id" attribute with a value of "StoreInstances", "StoreStudyInstances" or "CreateUPS"</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_2f2788d7-c78b-409d-9f74-f2b6348b853b">The Store methods shall contain a "request" element with "param" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6674da2a-30fe-40a6-a087-b0d98f65fc99">supported Accept header values</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7e8900dc-4c17-4d10-97f0-d81fa0eb051b">supported Representations</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_d43d2675-7084-496a-bed4-0bab9710af4e">if the same Media Type is supported with multiple Transfer Syntaxes there should be one entry for each combination of Media Type and Transfer Syntax</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
              <para xml:id="para_c242687a-fcfb-4809-a576-b779a454d0c3">The Store methods shall contain one or more "response" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_24b71be3-e213-40cc-8033-82aea5677ad9">supported Status Codes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7e0e4461-e121-4b05-8221-4403a14d3dee">Media Types returned for each Status Code (if applicable)</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7c10e8db-274c-448d-8be0-391e1433a548">Headers returned for each Status Code</para>
                </listitem>
              </itemizedlist>
              <note>
                <para xml:id="para_54e5ad6b-4710-4bcf-b62d-552dbd288037">More than one Status Code can be described by a single "response" element.</para>
              </note>
              <para xml:id="para_bf59694e-ac0c-42bb-b8ae-93b96942c95e">Example:</para>
              <programlisting><![CDATA[<method name="GET" id="StoreInstances">
	<request>
		<param name="Accept" style="header" default="application/dicom+xml">
			<option value="application/dicom+xml" />
		</param>
		<representation mediaType="multipart/related; type=application/dicom" />
		<representation mediaType="multipart/related; type=application/dicom;
		                transfer-syntax=1.2.840.10008.1.2" />
		<representation mediaType="multipart/related; type=application/dicom; 
		                transfer-syntax=1.2.840.10008.1.2.1" />
		<representation mediaType="multipart/related; type=application/dicom+xml" />
		<representation mediaType="multipart/related; type=application/dicom+xml;
		                transfer-syntax=1.2.840.10008.1.2" />
		<representation mediaType="multipart/related; type=application/dicom+xml;
						transfer-syntax=1.2.840.10008.1.2.1" />
		<representation mediaType="multipart/related; type=application/dicom+xml;
		                transfer-syntax=1.2.840.10008.1.2.4.92" />
		<representation mediaType="multipart/related; type=application/dicom+xml;
		                transfer-syntax=1.2.840.10008.1.2.4.100" />
	</request>
	<response status="200" />
	<response status="202,409">
		<representation mediaType="application/dicom+xml" />
	</response>
	<response status="400,401,403,503" />
</method>
]]></programlisting>
            </section>
            <section label="6.8.1.2.2.3" status="6" xml:id="sect_6.8.1.2.2.3">
              <title>Search Methods</title>
              <para xml:id="para_44c79e04-a349-4df2-9004-76772a242ca1">The Search methods define the capabilities of a QIDO-RS resource (see <xref linkend="sect_6.7" xrefstyle="select:labelnumber"/>) or a SearchForUPS resource (see <xref linkend="sect_6.9.3" xrefstyle="select:labelnumber"/>).</para>
              <para xml:id="para_cd1cc07e-ca47-4e0d-92b0-0c4903dcc28f">The Search methods shall contain the following attributes:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_d15d6247-de01-49d5-9839-c95f718059c4">A "name" attribute with a value of "GET"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_cbbaf913-cf29-4b80-89f9-4f2366317362">An "id" attribute with a value of "SearchForStudies", "SearchForStudySeries", "SearchForSeries", "SearchForStudySeriesInstances", "SearchForStudyInstances", "SearchForSeriesInstances", "SearchForInstances" or "SearchForUPS"</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_f755e7db-8953-4398-a071-b04113fcc836">The Search methods shall contain a "request" element with "param" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_6149054b-72f6-4589-8607-fff7d64e5334">supported Accept header values</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7a797ed5-cc95-4301-8075-745500fc1bbc">support for the Cache-control header</para>
                </listitem>
                <listitem>
                  <para xml:id="para_07bff693-1dbd-4e0e-b3e5-31b17f3246b2">support of "limit", "offset" and "fuzzymatching" query parameters</para>
                </listitem>
                <listitem>
                  <para xml:id="para_416bde01-84d7-40e6-a4d2-cf2cd5949f3e">supported search parameters (both tag and keyword variants shall be listed)</para>
                </listitem>
                <listitem>
                  <para xml:id="para_4a018fdb-9935-4fda-9d15-ce47c2712374">supported options for the "includefield" parameter (both tag and keyword variants shall be listed)</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_b62b21bc-b9fd-4b1c-8c25-5c527ae63ea6">The Search methods shall contain one or more "response" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_7f1eef4a-9eae-4a2c-9e53-79a197b49d92">supported Status Codes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_3ee404f8-5992-43e8-9896-c083c849ec08">returned "header" parameters, including use of "warning headers"</para>
                </listitem>
                <listitem>
                  <para xml:id="para_32255f91-2cce-46cf-8fc3-6cb68d673579">Media Types returned for each Status Code (if applicable)</para>
                </listitem>
              </itemizedlist>
              <note>
                <para xml:id="para_10eb33cb-ef60-412f-a250-391214705fdf">More than one Status Code can be described by a single "response" element.</para>
              </note>
              <para xml:id="para_6af31a6d-a837-4a9c-9422-1709400f526b">Example:</para>
              <programlisting><![CDATA[<method name="GET" id="SearchForStudies">
	<request>
		<param name="Accept" style="header" default="multipart/related; type=application/dicom+xml">
			<option value="multipart/related; type=application/dicom+xml" />
			<option value="application/json" />
		</param>
		<param name="Cache-control" style="header">
			<option value="no-cache" />
		</param>
		<param name="limit" style="query" />
		<param name="offset" style="query" />
		<param name="fuzzymatching" style="query" />
		<param name="StudyDate" style="query" />
		<param name="00080020" style="query" />
		<param name="StudyTime" style="query" />
		<param name="00080030" style="query" />
		…
		<param name="includefield" style="query" repeating="true" />
		<option value="all" />
		<option value="00081049" />
		<option value="PhysiciansOfRecordIdentificationSequence" />
		<option value="00081060" />
		<option value="NameOfPhysiciansReadingStudy" />
		…
	</param>
</request>
<response status="200">
	<representation mediaType="multipart/related; type=application/dicom+xml" />
	<representation mediaType="application/json" />
</response>
<response status="400 401 403 413 503" />
</method>
]]></programlisting>
            </section>
            <section label="6.8.1.2.2.4" status="6" xml:id="sect_6.8.1.2.2.4">
              <title>Update Methods</title>
              <para xml:id="para_687b94f4-92fe-4905-8200-76418f95c311">The Update methods define the capabilities of an UpdateUPS, a ChangeUPSState or a RequestUPSCancellation resource (see <xref linkend="sect_6.9.2" xrefstyle="select:labelnumber"/>).</para>
              <para xml:id="para_436d686c-db90-48fb-8a55-161d3c879078">The Update methods shall contain the following attributes:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_3d4b2404-66fb-48ba-a176-dcaf98bc6f1f">A "name" attribute with a value of "POST" for UpdateUPS and RequestUPSCancel</para>
                </listitem>
                <listitem>
                  <para xml:id="para_a7bd0ec1-6498-4667-84dd-3d3b77b0819f">A "name" attribute with a value of "PUT" for ChangeUPSState</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7ba32292-3ad2-4927-a0d0-81f90a4d2970">An "id" attribute with a value of "UpdateUPS", "ChangeUPSState" or "RequestUPSCancellation"</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_336bc14a-801b-40ff-859b-a13b1cf3bb43">The Update methods shall contain a "request" element with "param" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_bfd7101c-356c-43c4-9ccb-da6f4add1511">supported Representations</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_bce8db97-e5b6-48d6-b9ca-b47f24a3aa6d">The Update methods shall contain one or more "response" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_0fc53d64-1ee0-4bd8-be4d-37daf3a384ef">supported Status Codes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_eb854c1f-d7de-4f57-b41f-455bc2638aac">Headers returned for each Status Code</para>
                </listitem>
              </itemizedlist>
              <note>
                <para xml:id="para_547d70a9-36ff-4e55-a17f-a30a38c0efd4">More than one Status Code can be described by a single "response" element.</para>
              </note>
              <para xml:id="para_4a4f6a7a-3a8a-49ba-abae-e58b3e67198c">Example:</para>
              <programlisting><![CDATA[<method name="POST" id="UpdateUPS">
  <request>
    <representation mediaType="application/dicom+xml" />
    <representation mediaType="application/json" />
  </request>
  <response status="200">
    <param name="Warning" style="header" fixed="299 {+SERVICE}: The UPS was created with modifications." />
    <param name="Warning" style="header" fixed="299 {+SERVICE}: Requested optional Attributes are not supported." />
  </response>
  <response status="409">
    <param name="Warning" style="header" fixed="299 {+SERVICE}: The Transaction UID is missing." />
    <param name="Warning" style="header" fixed="299 {+SERVICE}: The Transaction UID is incorrect." />
    <param name="Warning" style="header" fixed="299 {+SERVICE}: The submitted request is inconsistent
                                                                with the current state of the UPS Instance." />
  </response>
  <response status="400 401 403 404 503" />
</method>
]]></programlisting>
            </section>
            <section label="6.8.1.2.2.5" status="6" xml:id="sect_6.8.1.2.2.5">
              <title>Subscribe Methods</title>
              <para xml:id="para_26ecb22d-6d20-452b-9a88-04aeea51ed85">The Subscribe methods define the capabilities of a CreateSubscription, a SuspendGlobalSubscription or a DeleteSubscription resource (see <xref linkend="sect_6.9.7" xrefstyle="select:labelnumber"/>, <xref linkend="sect_6.9.8" xrefstyle="select:labelnumber"/> and <xref linkend="sect_6.9.9" xrefstyle="select:labelnumber"/>).</para>
              <para xml:id="para_3e2bc83b-83c2-4141-b4a0-00506a522a51">The Subscribe methods shall contain the following attributes:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ec2c00dc-d74c-4818-be56-76c3b1fb0a9f">A "name" attribute with a value of "POST" for CreateSubscription and SuspendGlobalSubscription</para>
                </listitem>
                <listitem>
                  <para xml:id="para_f9b194e3-ee1b-4d0e-bf49-83fe5de086c1">A "name" attribute with a value of "DELETE" for DeleteSubscription</para>
                </listitem>
                <listitem>
                  <para xml:id="para_a8553d96-98a2-4fea-ba49-b936721990ed">An "id" attribute with a value of "CreateSubscription", "SuspendGlobalSubscription" or "DeleteSubscription"</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_ee7d10b3-cf96-41ce-ab21-2c84e0f5aba6">The Subscribe methods shall contain a "request" element with "param" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_3ba4216f-1ccf-4172-9c0d-078bd23e7a9c">supported Representations</para>
                </listitem>
              </itemizedlist>
              <para xml:id="para_c8cecb46-8c20-45be-9457-597d44eef062">The Subscribe methods shall contain one or more "response" elements documenting the following:</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_9ac66a36-4c5f-45a6-80aa-d7d34269f878">supported Status Codes</para>
                </listitem>
                <listitem>
                  <para xml:id="para_e37e5b5a-e392-47af-8e17-e7488a64f090">Headers returned for each Status Code</para>
                </listitem>
              </itemizedlist>
              <note>
                <para xml:id="para_6269b222-3f1f-4d39-b7d9-bf611ade9e14">More than one Status Code can be described by a single "response" element.</para>
              </note>
              <para xml:id="para_e8a4efbf-3315-4d62-9e61-476ee02659bd">Example:</para>
              <programlisting><![CDATA[<method name="POST" id="CreateSubscription">
  <request>
    <param name="deletionlock" style="query" default="false">
      <option value="true" />
      <option value="false" />
    </param>
  </request>
  <response status="201">
    <param name="Warning" style="header" fixed="299 {+SERVICE}: Deletion Lock not granted." />
   </response>
  <response status="403">
    <param name="Warning" style="header" fixed="299 {+SERVICE}: The Origin-Server does not support
                                                                Global Subscription Filtering." />
  </response>
  <response status="400 401 404 409 503" />
</method>
]]></programlisting>
            </section>
          </section>
        </section>
        <section label="6.8.1.3" status="4" xml:id="sect_6.8.1.3">
          <title>Status Codes</title>
          <para xml:id="para_01039997-d782-41cb-9f9a-e3afd32e0026">
<xref linkend="table_6.8-2" xrefstyle="select:label"/> lists the HTTP/1.1 status codes that shall be used to report any of the associated error and warning situations. Other error codes may be present for other error and warning situations.</para>
          <table frame="box" label="6.8-2" rules="all" xml:id="table_6.8-2">
            <caption>Server Options HTTP/1.1 Status Codes</caption>
            <thead>
              <tr valign="top">
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_5e9009e3-5acc-4c8d-a483-d9ecbd314b77">
                    <emphasis role="bold">Code</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_046ef5e3-746e-4438-bdc0-d713a9bbb17b">
                    <emphasis role="bold">Name</emphasis>
                  </para>
                </th>
                <th align="center" colspan="1" rowspan="1">
                  <para xml:id="para_e67605a2-d9f7-4750-82d4-9f8b5673cd62">
                    <emphasis role="bold">Description</emphasis>
                  </para>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr valign="top">
                <td align="left" colspan="3" rowspan="1">
                  <para xml:id="para_141ceee8-f2c9-4911-8042-bdd2fedc2d48">Success</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_401dd52a-1610-40e0-94e1-c14bb0e3be78">200</para>
                </td>
                <td align="center" colspan="1" rowspan="1">
                  <para xml:id="para_a9088b53-cc6e-457b-9c7d-281d4f6122b2">OK</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_11dbc81a-172b-4b60-9386-25d0013f25e4">The query completed and any matching results are returned in the message body.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="3" rowspan="1">
                  <para xml:id="para_5a4f9805-fbce-4223-a26d-1a23ccdc627c">Failure</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_d3d3e1a6-7719-47df-8935-a33bf5886550">400</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_05ea4476-2742-412b-9135-6cfbab1e4dbf">Bad Request</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_1cca56b2-d4e8-4bd2-a8bf-055ac11392a4">The Server Options Provider was unable to perform the query because the Service Provider cannot understand the query component.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_6778bc4d-fed9-4ba5-9fca-9a452a4958d4">401</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_8f9546f6-032b-42e1-b1ad-be7b061d2339">Unauthorized</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_64cc8fe9-3fd3-4371-8360-5c073a354238">The Server Options Provider refused to perform the query because the client is not authenticated.</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_87975401-7876-4001-aeec-1406e054d403">403</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_53f7ba65-b9c6-4fb3-b3b7-abe5ba0ddf7d">Forbidden</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_717a9822-e29c-4ecd-88bd-9148aab59871">The Server Options Provider understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                </td>
              </tr>
              <tr valign="top">
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_19cef443-39b2-4503-8572-c9cedd77a5bd">503</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_48be935d-d320-447d-839b-ba24db50883c">Busy</para>
                </td>
                <td align="left" colspan="1" rowspan="1">
                  <para xml:id="para_f52a0dd1-a5fe-4de5-a64d-8f92b52679a1">Service is unavailable.</para>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </section>
    <section label="6.9" status="2" xml:id="sect_6.9">
      <title>UPS-RS Worklist Service</title>   
      <para xml:id="para_da3f986d-35c0-42e6-80fb-85e2cd21dcaa">This DICOM Web Service defines a RESTful interface to the UPS SOP Classes (see <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> and <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>). It consists of the following action types:</para>
      <orderedlist numeration="arabic">
        <listitem>
          <para xml:id="para_5e4bd254-65b1-4e7d-bf35-e5a34f8f3ea1">CreateUPS</para>
          <para xml:id="para_b3f8fcf5-bdb5-4205-a257-68424bca8810">This action requests the creation of a UPS Instance on the Origin-Server. It corresponds to the UPS DIMSE N-CREATE operation.</para>
        </listitem>
        <listitem>
          <para xml:id="para_a61b2dce-5c45-4b91-bb0d-6aee771f74b6">UpdateUPS</para>
          <para xml:id="para_02c5ae40-59e0-4bc5-b32b-8910195b68d9">This action sets the attributes of a UPS Instance managed by the Origin-Server. It corresponds to the UPS DIMSE N-SET operation.</para>
        </listitem>
        <listitem>
          <para xml:id="para_191570b2-afae-46f9-bd45-ba3ac875d6f7">SearchForUPS</para>
          <para xml:id="para_5ec43c55-15a7-4e8a-aa36-1bb4cfbed0db">This action searches for UPS Instances known to the Origin-Server. It corresponds to the UPS DIMSE C-FIND operation.</para>
        </listitem>
        <listitem>
          <para xml:id="para_45cda748-5952-4057-8cbc-9a9bf85799fc">RetrieveUPS</para>
          <para xml:id="para_9acddc45-fd62-4ce9-852a-b34756dea98d">This action retrieves a UPS Instances. It corresponds to the UPS DIMSE N-GET operation.</para>
        </listitem>
        <listitem>
          <para xml:id="para_433a9dbc-33f5-46bd-8f95-d5a23b218580">ChangeUPSState</para>
          <para xml:id="para_57563b38-78c3-42d3-9976-020bb06b00b6">This action sets the state of a UPS Instance managed by the Origin-Server. It corresponds to the UPS DIMSE N-ACTION operation "Change UPS State".</para>
        </listitem>
        <listitem>
          <para xml:id="para_b24537aa-883d-4ec5-8e27-3460b1478888">RequestUPSCancellation</para>
          <para xml:id="para_2ce81d1c-98bb-47fa-bf78-1159d9055caa">This action requests the cancellation of a UPS Instance managed by the Origin-Server. It corresponds to the UPS DIMSE N-ACTION operation "Request UPS Cancel".</para>
        </listitem>
        <listitem>
          <para xml:id="para_1ff30e9b-a7c5-4e04-a67f-e0a65a9d20a4">CreateSubscription</para>
          <para xml:id="para_eebba528-d88d-4d31-9908-33da5755a5f7">This action subscribes to a UPS Instance or the Global Worklist managed by the Origin-Server. It corresponds to the UPS DIMSE N-ACTION operation "Subscribe to Receive UPS Event Reports".</para>
        </listitem>
        <listitem>
          <para xml:id="para_04715107-3958-42bc-9e06-6c920d9ebfc6">SuspendGlobalSubscription</para>
          <para xml:id="para_4f66ad93-7e2a-4e65-8115-38117adb6f15">This action suspends an existing subscription to the Global Worklist managed by the Origin-Server. It corresponds to the UPS DIMSE N-ACTION operation "Suspend Global Subscription".</para>
        </listitem>
        <listitem>
          <para xml:id="para_fd7aa4d2-fae6-4a6f-af5a-5f71bbbf9476">DeleteSubscription</para>
          <para xml:id="para_8be2dd72-5422-4510-97d0-828867c0cdaa">This action cancels an existing subscription to a UPS Instance or the Global Worklist managed by the Origin-Server. It corresponds to the UPS DIMSE N-ACTION operation "Unsubscribe from Receiving UPS Event Reports".</para>
        </listitem>
        <listitem>
          <para xml:id="para_c6324d0c-3cd7-47ce-b578-c3d258f8f8c5">OpenEventChannel</para>
          <para xml:id="para_6273d7f3-1cd2-49db-a43c-12c87b158b02">This action initiates a WebSocket connection to allow the User-Agent to start receiving Event Report messages.</para>
        </listitem>
        <listitem>
          <para xml:id="para_be2f7799-12e6-4e75-8992-0eb7185d10a8">SendEventReport</para>
          <para xml:id="para_393ce1fc-d434-4d5f-adf4-a47e8b0dbf20">This action sends an Event Report using an open WebSocket connection. It corresponds to the UPS DIMSE N-EVENT-REPORT operation.</para>
        </listitem>
      </orderedlist>
      <para xml:id="para_b2fe14e3-7acd-4f64-b1fc-b72374301bd6">An Origin-Server shall support all of the above action types.</para>
      <para xml:id="para_3decc75c-1f1c-4ece-8dcf-f69cd7b98214">The requirements for a UPS-RS Origin-Server that is also a Unified Worklist and Procedure Step SCP are described in <olink targetdoc="PS3.4" targetptr="sect_CC.1" xrefstyle="select: docname label"/>
</para>
       <table frame="box" label="6.9-1" rules="all" xml:id="table_6.9-1">
        <caption>UPS Interface Mapping</caption>
        <thead>
          <tr valign="top">
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_ab0e5632-ee7f-4341-b631-ff654adc1fd1">Action Type</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_d40d76b6-d48e-4a24-a4e7-5d183692a9a1">Section</para>
            </th>
            <th align="center" colspan="1" rowspan="1">
              <para xml:id="para_9a4a864a-7810-4bb4-a9bb-43ead002782d">Method &amp; Resource</para>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_75d1ca58-a940-4acc-88a3-0115aefcf8a9">CreateUPS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_1825474b-7bf0-480c-a088-eb46331c5089">
<xref linkend="sect_6.9.1" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_3198598e-c1a0-4174-abb4-403eb7f441f9">POST {+SERVICE}/workitems{?AffectedSOPInstanceUID}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_f37492af-f0ce-4466-9100-5dd8a981f7ef">UpdateUPS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_99f91e72-0db3-4643-a39b-1b9c7036d682">
<xref linkend="sect_6.9.2" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_3eff6adc-0fca-4fb0-afd9-a8f988fd027d">POST {+SERVICE}/workitems/{UPSInstanceUID}{?transaction}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_514f7488-5d2e-4852-a9ef-7bb28cab3cd3">SearchForUPS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_71ba087c-1e85-440f-a728-11302e00e8c2">
<xref linkend="sect_6.9.3" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_687dac50-878d-4e11-82ef-dc41a709327e">GET {+SERVICE}/workitems{?query*}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_92ed9c8c-1a14-43dd-aacb-895749a67a48">RetrieveUPS</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_28cd22de-c63f-4651-8919-d6664bb4abf3">
<xref linkend="sect_6.9.4" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_14cda30e-6aea-44f2-84b4-73838f29a897">GET {+SERVICE}/workitems/{UPSInstanceUID}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_99d8b107-bf6d-46dc-8ad5-cd02780b314c">ChangeUPSState</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_7f35b53a-9a9a-4756-aa9d-a821b0c9aebb">
<xref linkend="sect_6.9.5" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_789782f7-b219-4cf1-9cf6-f2705b6de0c5">PUT {+SERVICE}/workitems/{UPSInstanceUID}/state</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_470bedf6-8016-4b55-8755-2f58f8fd3010">RequestUPSCancellation</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_6f6a2e1d-4f20-4f61-897c-9ba98f1aaf3b">
<xref linkend="sect_6.9.6" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_9315270d-a0f2-4748-a0b6-cea240fdab68">POST {+SERVICE}/workitems/{UPSInstanceUID}/cancelrequest</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_9c6c5f95-5cd9-4449-a9b4-11df65e65f01">CreateSubscription</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_375c5dc6-055c-49eb-bfbb-d66de1adfb1b">
<xref linkend="sect_6.9.7" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_c08afad8-a704-46bb-a234-599a58633b12">POST {+SERVICE}/workitems/{UPSInstanceUID}/subscribers/{AETitle}{?deletionlock}</para>
              <para xml:id="para_367ad878-c3bb-43da-b198-ef734afd5549">POST {+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5/</para>
              <para xml:id="para_a04a1399-f7b7-45dd-be4c-7b0d7a55b869">subscribers/{AETitle}{?deletionlock}</para>
              <para xml:id="para_ea14a69f-6cea-4afb-96b0-caaacd4eef8c">POST {+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5.1/</para>
              <para xml:id="para_ff8c1910-d362-4006-be8b-234c9ddf8026">subscribers/{AETitle}{?deletionlock,query*}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8ab891d7-097b-48ff-93d1-c3d3a1a13a89">SuspendGlobalSubscription</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_ec58d276-985c-46c5-ac0f-e782bc790b23">
<xref linkend="sect_6.9.8" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_069895b9-00c2-4358-8fa0-9634649a62cc">POST {+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5/</para>
              <para xml:id="para_e59e1dc4-b87a-4540-b006-5d68d0bc67f9">subscribers/{AETitle}/suspend</para>
              <para xml:id="para_d729b723-22b5-417f-807c-eb8e5eaecbc4">POST {+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5.1/</para>
              <para xml:id="para_f920d492-2886-46e7-98da-8489ad265c1c">subscribers/{AETitle}/suspend</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_88e9c5e1-3344-43b2-9174-03106438b0a4">DeleteSubscription</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_8171385a-fec1-4e19-982f-11e4d338e37b">
<xref linkend="sect_6.9.9" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_859f10c7-a1f4-4060-a08c-940d5b919b2a">DELETE {+SERVICE}/workitems/{UPSInstanceUID}/</para>
              <para xml:id="para_2f135e33-9c11-4728-b021-99a209a1d62b">subscribers/{AETitle}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_26ab66f3-bccc-4f4f-a605-4b7ee6fbc65f">OpenEventChannel</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_30297b2a-39a7-4f9e-a709-cb2d946db35c">
<xref linkend="sect_6.9.10" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_16a8f7d4-468b-4861-9509-49855509644a">GET {+WSSERVICE}/subscribers/{AETitle}</para>
            </td>
          </tr>
          <tr valign="top">
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_a1044309-fd9b-430a-8953-67634649a4ec">SendEventReport</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_9479ca48-2660-4d24-b3bd-cd45b2f9b4e2">
<xref linkend="sect_6.9.11" xrefstyle="select: labelnumber"/>
</para>
            </td>
            <td align="left" colspan="1" rowspan="1">
              <para xml:id="para_2411282e-3d26-4d1f-b3e1-a0b6e131c4fa">N/A</para>
            </td>
          </tr>
        </tbody>
      </table>
      <para xml:id="para_990d0cfd-9070-42dd-8b37-eb112473e558">The Origin-Server shall comply with all requirements placed on the SCP for the corresponding services in <olink targetdoc="PS3.4" targetptr="chapter_CC" xrefstyle="template:Annex %n “%t” in PS3.4"/>.</para>
      <section label="6.9.1" status="3" xml:id="sect_6.9.1">
        <title>CreateUPS</title>
        <para xml:id="para_7ae05aa6-cb7a-43a7-8179-9c90ece66664">This resource allows a User-Agent to instruct an Origin-Server to create a UPS instance.</para>
        <section label="6.9.1.1" status="4" xml:id="sect_6.9.1.1">
          <title>Request</title>
          <para xml:id="para_e3f944ae-4fa9-4f4d-be41-35199f85906a">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_ae8077e9-b78a-451e-b63c-d8dc726797e0">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_353f9c11-b316-4ac1-b51b-cb67be3f9440">{+SERVICE}/workitems{?AffectedSOPInstanceUID}</para>
                  <para xml:id="para_cd607b71-b3eb-447f-a3df-b371b7a555df">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_2d597096-84a2-4f6e-b0e1-09b0d84c1013">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_dbc70dbd-fe29-4926-9b73-81f7f48299d2">{AffectedSOPInstanceUID} specifies the SOP Instance UID of the UPS Instance to be created</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_03015e08-de97-4778-aef7-8f661f1c4c0d">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_9061127d-f056-4f82-9237-0bcab2d96572">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_3fab3b1e-2723-465e-8861-c2e6ff488180">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_58ba4621-4f04-4cdb-bd6b-3524b4cecf0e">Content-Type - The representation scheme being posted to the RESTful service. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_da5fcedf-8bc7-42e0-b531-d5ee59cdd4b7">application/dicom+xml</para>
                      <para xml:id="para_7ea46608-a14c-4b1b-bd6d-bb6a0e55d584">Specifies that the post is DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata. See <xref linkend="sect_6.9.1.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_af4074a0-7d0a-4dfd-b39d-a21b65a270e4">application/json</para>
                      <para xml:id="para_354f7e06-0082-4ab5-a061-95483861f069">Specifies that the post is DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata. See <xref linkend="sect_6.9.1.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_7ad56338-33df-4cd5-baac-85c0adc39f99">The request body shall convey a single Unified Procedure Step Instance. The instance shall comply with all requirements in the Req. Type N-CREATE column of <olink targetdoc="PS3.4" targetptr="table_CC.2.5-3" xrefstyle="select: docname label"/>.</para>
            </listitem>
          </itemizedlist>
          <section label="6.9.1.1.1" status="5" xml:id="sect_6.9.1.1.1">
            <title>Request Message</title>
            <para xml:id="para_d9bb0ef8-bebb-45b9-91a9-8b66aaa83d6c">The Request Message has a single part body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_5d1daaf7-fe4d-43ed-a754-a7547a88df8a">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_9e3809cd-e2e8-4bf1-9005-353d7267d15d">application/dicom+xml</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_941e42aa-16da-48f1-8ec1-c9130534c795">application/json</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_5fd306eb-da12-4414-854c-1872bb4fd80d">The request body contains all attributes to be stored in either DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML or DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: label"/> JSON. Any binary data contained in the message shall be inline.</para>
              </listitem>
            </itemizedlist>
           </section>
        </section>
        <section label="6.9.1.2" status="4" xml:id="sect_6.9.1.2">
          <title>Behavior</title>
          <para xml:id="para_3ba6f95c-d273-4200-bd68-267814c40d20">The Origin-Server shall create and maintain UPS instances as instructed by CreateUPS requests and as specified by the SCP behavior in <olink targetdoc="PS3.4" targetptr="sect_CC.2.5.3" xrefstyle="select: docname label"/>.</para>
          <para xml:id="para_b7a4de25-f187-4436-add7-09a8ab264c4c">The Origin-Server shall return the HTTP/1.1 Status Line applicable to the associated request.</para>
        </section>
        <section label="6.9.1.3" status="4" xml:id="sect_6.9.1.3">
          <title>Response</title>
          <para xml:id="para_b4f5a353-124b-41e2-9abf-64eb0619c0e4">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.1.3.1" status="5" xml:id="sect_6.9.1.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_6165777f-85b8-4d61-8422-b6901a445fbc">If the Create request is successful, the Origin-Server shall return an HTTP/1.1 "201 - Created" response code.</para>
            <para xml:id="para_d3a80cff-d7cb-4f7d-903f-1a3333da38d3">If the request fails, the Origin-Server shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.1-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.1-1" rules="all" xml:id="table_6.9.1-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_116689b5-6a47-47b3-a2e3-f3a907985491">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_2f5c6960-20a6-48e8-b966-bae55b65d5f0">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_aed27381-c496-46e6-baaf-d8bad55caf2e">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_14e599e6-4bb5-4bcf-ad49-e518c463eca9">201</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d0c5d045-e75a-483c-8312-2ce7f7cd1850">Created</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a5423cb4-acd1-4b96-8d49-c8254eb79811">The UPS instance was created and the new resource can be retrieved at the Content-Location specified in the response</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a95cf0e2-3b35-4474-a736-64854b6d2187">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0afa2e1f-d06a-4a8d-a021-83d197352465">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_83778bc6-4f04-47f4-87a0-4663f4d1a130">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_dfd9cb5a-bc9c-4d89-8645-0e829f986628">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_269063ea-d968-4d45-ab8c-b4b178eddf95">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9f359799-5ba4-4aa7-898b-c0778365bd76">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1a9a1a58-8941-4cf4-8471-c4a38d342a46">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_84b9908d-af34-44d0-9330-4f015daab2d0">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_312817a0-f8e4-47f0-aedb-50c1bef01384">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e5375599-25dc-4f00-bc4d-1954b7ce3da4">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b617f23f-a982-4fa8-8e1b-9bee2de73aaf">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_86b51c91-e347-45ff-b534-010201608636">The UID of the posted UPS Instance corresponds to an existing UPS Instance.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_683dc4bf-eb0a-4a8f-a8d1-f654f5a9e2f9">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_16830fdc-5aa6-4982-a9c5-b13283c9d49d">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d6ea612f-cff8-4094-846c-a9f5b852e0f5">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.1.3.2" status="5" xml:id="sect_6.9.1.3.2">
            <title>Response Headers</title>
            <para xml:id="para_82de0c90-42ae-4454-b9cd-d19e8c67033a">If the request is successful, the HTTP/1.1 response message shall include the following HTTP/1.1 header:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_478008c3-750b-4f24-823e-5645343d7fe2">Content-Location: {+WorkitemURL}</para>
                <para xml:id="para_71dddf04-cad0-4dcc-a6a6-f7d8f7f63d7f">Where {+WorkitemURL} is the URL from which the created UPS Instance can be retrieved (see <xref linkend="sect_6.9.4" xrefstyle="select: label"/>)</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_9a5d3bdf-257d-4c09-ba1e-fe552f168562">If the UPS instance was created with modifications, the response message shall include the following HTTP/1.1 header:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_ad4be69c-4b35-4988-ae21-a429c8fa346a">Warning: 299 {+SERVICE}: The UPS was created with modifications.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.1.3.3" status="5" xml:id="sect_6.9.1.3.3">
            <title>Response Message Body</title>
            <para xml:id="para_826e9873-bbb2-4083-819a-f22143402bd4">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.2" status="3" xml:id="sect_6.9.2">
        <title>UpdateUPS</title>
        <para xml:id="para_e7c0aaa8-daf0-4d8b-8bac-bdabff228678">This resource supports the modification of attribute values of an existing UPS Instance.</para>
        <section label="6.9.2.1" status="4" xml:id="sect_6.9.2.1">
          <title>Request</title>
          <para xml:id="para_7a306939-4b00-4410-83aa-a61159361ee5">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_641fe0c5-e174-4e37-92e7-6d7199c26dcd">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_c2a1067c-4e44-4104-9008-6351d35e5e65">{+SERVICE}/workitems/{UPSInstanceUID}{?transaction}</para>
                  <para xml:id="para_cccc80fe-e905-448d-a9cb-aae83294a50c">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_d20ab916-f112-42b8-aaf7-0c96f1cc5486">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_a81dd60e-dcac-4050-8f1f-1cb92517fdcf">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_fa86e732-f005-476f-bd18-bc7db0292a3f">{transaction} specifies the Transaction UID / Locking UID for the specified Unified Procedure Step Instance</para>
                      <para xml:id="para_0a7b274a-bfbd-4e21-826c-010dc2df1c65">If the UPS instance is currently in the SCHEDULED state, {transaction} shall not be specified.</para>
                      <para xml:id="para_ea7ffc84-838c-4d3f-be8e-43e1b4f8d34e">If the UPS instance is currently in the IN PROGRESS state, {transaction} shall be specified.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>             
            </listitem>
            <listitem>
              <para xml:id="para_12f1d9ea-3e86-40df-9013-d26e42bfddbc">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ee902a34-337d-4387-94aa-071bc31ca96b">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_5ed2aedf-7cb9-477e-99a4-3050e71a6cd0">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_43b81d8b-b1bf-4d4d-b857-5416a88172f1">Content-Type - The representation scheme being posted to the RESTful service. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_08f078e3-dae7-49aa-9811-70e2c66cc429">application/dicom+xml</para>
                      <para xml:id="para_df314a31-f8d4-4d57-9521-ec91a96ea929">Specifies that the post is DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata. See <xref linkend="sect_6.9.2.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_063e4e5c-7966-44ee-8999-0548f5bb64dc">application/json</para>
                      <para xml:id="para_2ea65e6f-2af1-4b0c-87f2-a0f7c9a3f871">Specifies that the post is DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata. See <xref linkend="sect_6.9.2.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_5e47a5f5-31f3-45ed-b8ee-17202a44938f">The request body describes changes to a single Unified Procedure Step Instance. It shall include all Attributes for which Attribute Values are to be set. The changes shall comply with all requirements described in <olink targetdoc="PS3.4" targetptr="sect_CC.2.6.2" xrefstyle="select: docname label"/>.</para>
            </listitem>
            <listitem>
              <para xml:id="para_5f64dfd7-cb34-4bf8-9294-d3600cfe79f2">Because the request will be treated as atomic (indivisible) and idempotent (repeat executions have no additional effect), all changes contained in the request shall leave the UPS instance in an internally consistent state.</para>
            </listitem>
          </itemizedlist>
          <section label="6.9.2.1.1" status="5" xml:id="sect_6.9.2.1.1">
            <title>Request Message</title>
            <para xml:id="para_aea93ae6-ee2b-4f2f-a2e8-cddb6de82e3f">The Request Message has a single part body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_213d38f8-7752-41a4-bcbf-d9eac2cfea4e">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_fcccf24e-1f3b-439c-8e93-3e913ee253af">application/dicom+xml</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_ada1c163-2e87-4797-922e-c1e58c71a97c">application/json</para>
                  </listitem>
                </itemizedlist>
               </listitem>
              <listitem>
                <para xml:id="para_603055f3-150c-45da-8452-1d45968222dd">The request body contains all the attributes to be updated in either DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML or DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON. Any binary data contained in the message shall be inline.</para>
              </listitem>
            </itemizedlist>
           </section>
        </section>
        <section label="6.9.2.2" status="4" xml:id="sect_6.9.2.2">
          <title>Behavior</title>
          <para xml:id="para_2cc34fb6-50c8-4b8b-974f-37fd13b02ce8">The Origin-Server shall support the Attribute changes to the UPS instance specified by the User-Agent in the UpdateUPS request and as specified by the SCP behavior in <olink targetdoc="PS3.4" targetptr="sect_CC.2.6.3" xrefstyle="select: docname label"/>.</para>
          <para xml:id="para_9c398dca-8bba-4e0a-9e1a-2700f5f5d36d">The Origin-Server shall return the HTTP/1.1 Status applicable to the associated request.</para>
        </section>
        <section label="6.9.2.3" status="4" xml:id="sect_6.9.2.3">
          <title>Response</title>
          <para xml:id="para_fc078948-1c00-4376-abce-bc50717ed776">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.2.3.1" status="5" xml:id="sect_6.9.2.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_30463e57-9fdf-4de3-ba6a-f7c8a10ad57a">If the Set request is successful, the Origin-Server shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_60ac4877-486d-49e5-b92f-0d99febce733">If the request fails, the Origin-Server shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.2-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.2-1" rules="all" xml:id="table_6.9.2-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_e1d42c4e-e58d-4669-93e1-348cdcb929e0">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_34f4a5ae-5e42-46f9-8a70-a3637d4bc06a">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_8b1aad8f-5a3b-4101-9acd-a68b94e772a7">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
               <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9c189fa2-e48c-420c-bca1-f56d2d472d50">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e5ea71c2-a545-43d6-b9b7-bea083743cc8">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6ee2432c-3e36-4bbe-a439-d9d7245b2ede">The UPS instance was updated</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3f5b91e3-ac8b-4db7-8da1-f757dfb21c9e">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_41a6d39a-02d4-4a77-b08a-74dea6041b57">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_befbe2d7-ba0c-4de2-922b-34e54d6fc786">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8fd073e7-c104-451f-8ac6-dd42e13f60be">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2f24b19c-723b-49c1-b77f-fb9662d32f73">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0872b164-e248-4e8f-b9f0-e9c5bf5bdeb0">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c8f0f987-0db4-4670-876c-4ccfc7214a89">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0c6b1b78-2b81-455b-b490-610c9d0e21ad">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0b870c81-33bc-4ae1-98dc-a6465c136fbf">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_66dd9372-fdac-49a3-bf31-1fb595737771">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5a681eb2-6fc9-4b30-b64b-2b0cc653f653">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bf633d37-7e7b-49a1-b2c4-679551e9b984">The specified UPS Instance does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cf05b3ee-d3c1-42f9-aef9-07b619cfa60b">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_85c79369-660f-453e-8d5e-274d7d0e5291">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_927825e5-efe7-4989-b15e-04bdc0c0c385">The request cannot be performed for one of the following reasons:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_eda3c6e8-8646-4aef-9cfe-93d9da852578">the submitted request is inconsistent with the current state of the UPS Instance</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_47639558-c84d-484c-8567-cff5bb15aa48">the Transaction UID is missing</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_252567a2-2ac7-435e-b1a2-8c56c62a999d">the Transaction UID is incorrect</para>
                      </listitem>
                    </itemizedlist>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e3eeb79f-fdc4-4ecf-a5a5-0b3900a3cc6a">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1620d0af-1324-40a2-8d50-a90123d5e3ba">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_28aa7762-12d7-4b89-bdd2-78d8c94dc7ad">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.2.3.2" status="5" xml:id="sect_6.9.2.3.2">
            <title>Response Headers</title>
            <para xml:id="para_c4e7122b-0e5f-4def-8429-9a94fe30a6d6">If the UPS instance was updated but with modifications made by the Origin-Server, the response message shall include the following HTTP/1.1 header:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_e99a3d65-c358-4a89-ba58-bf4f50db6c5e">Warning: 299 {+SERVICE}: The UPS was created with modifications.</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_db9a9460-e146-4379-b8af-fa56a2764bd3">If optional attributes were rejected, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_840c2a96-3b5e-4c5b-a570-0bdcbaf0b1db">Warning: 299 {+SERVICE}: Requested optional Attributes are not supported.</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_f1a461e3-f672-493d-bfbd-0d900cc258b4">If the request was rejected with an HTTP/1.1 409 status code, the response message shall include one of following messages encoded in an HTTP/1.1 Warning header field describing the nature of the conflict:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_1b81d4e5-7c87-4bae-babb-fb7eccd231f6">Warning: 299 {+SERVICE}: The Transaction UID is missing.</para>
              </listitem>
              <listitem>
                <para xml:id="para_24b2edf3-b10f-4e03-bbde-b33400c3cd6f">Warning: 299 {+SERVICE}: The Transaction UID is incorrect.</para>
              </listitem>
              <listitem>
                <para xml:id="para_74ee2709-051a-4a4a-87d4-e0296c6ddac5">Warning: 299 {+SERVICE}: The submitted request is inconsistent with the current state of the UPS Instance.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.2.3.3" status="5" xml:id="sect_6.9.2.3.3">
            <title>Response Message Body</title>
            <para xml:id="para_91f82a9b-f697-415b-a230-d5b2169e0391">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.3" status="3" xml:id="sect_6.9.3">
        <title>SearchForUPS</title>
        <para xml:id="para_b73b6500-5fb0-4ede-aadf-005cc08b843d">This resource returns a list of UPS Instances that match specified search query parameters along with requested attributes for each Instance.</para>
        <section label="6.9.3.1" status="4" xml:id="sect_6.9.3.1">
          <title>Request</title>
          <para xml:id="para_27682887-30d2-4049-8228-7f656a887680">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_e257ba8a-7a56-4c11-a844-fe1ecee9cab7">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_afe5628f-7c84-4cdd-a6b4-8f6565d05203">{+SERVICE}/workitems/{?query*}</para>
                  <para xml:id="para_3bf4cad2-d62c-4389-8ee6-9c6eede1667d">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_54e2ddf8-a49c-4138-b405-7e0b0de1e9c9">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_34bae724-266f-4d7a-8de5-4aaa8c4c1dd1">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_5087b77f-562b-4a96-abd0-c0b2e1865d1b">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_9a3b6dee-9868-4166-93be-2295196cae86">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ceaf1656-718e-45e0-9f84-ef056e754ac0">Accept - The representation scheme in which the RESTful service is requested to return the results. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_f402e05b-2222-491f-9bd8-94d6b4ec4674">multipart/related; type=application/dicom+xml; boundary={messageBoundary}</para>
                      <para xml:id="para_eb3d3c1f-81e4-4ed2-a896-3d78e80f261e">Specifies that the results should be DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_287ad91e-21a6-470b-94f5-245ee3a22b4d">application/json</para>
                      <para xml:id="para_6a3773ad-9675-44b0-bfd2-bb28cfeab279">Specifies that the results should be DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_ba0281e5-d6cc-4c8a-9f45-082648ed4dff">Cache-control: no-cache (recommended)</para>
                  <para xml:id="para_a5b73f66-9d22-4d1f-9f92-f901656af6f3">If included, specifies that search results returned should be current and not cached.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_381718fc-18ed-4277-a151-92508a54eac4">{query}</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_33549c06-36c5-46ff-86b4-3db44647bcfc">{attributeID}={value}</para>
                  <para xml:id="para_72777c39-4277-4d86-8a93-989d5d6c8b6e">0-n / {attributeID}={value} pairs allowed</para>
                </listitem>
                <listitem>
                  <para xml:id="para_6c2fddfd-3acc-41ff-97d6-cf837eb590a2">includefield={attributeID} | all</para>
                  <para xml:id="para_4c06213d-90a5-4baa-b18d-bab7650ba117">0-n includefield / {attributeID} pairs allowed, where "all" indicates that all attributes with values should be included for each response.</para>
                  <para xml:id="para_77bccabb-b204-4d7c-9311-a1f6783b6989">Each {attributeID} shall refer to an attribute of the Unified Procedure Step IOD (see <olink targetdoc="PS3.3" targetptr="sect_B.26.2" xrefstyle="select: docname label"/>).</para>
                  <para xml:id="para_e163d81e-68f9-4771-b64f-570f5033e92f">See <xref linkend="sect_6.7.1.1" xrefstyle="select: label"/> for {attributeID} and {value} encoding rules</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7e4b75f2-ad35-4882-935a-2330da80f8f2">fuzzymatching=true | false</para>
                </listitem>
                <listitem>
                  <para xml:id="para_86065daf-960c-449e-815c-5b3da5974e7a">limit={maximumResults}</para>
                </listitem>
                <listitem>
                  <para xml:id="para_fea51167-82c7-4bc6-b847-3e2b852336ba">offset={skippedResults}</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.3.2" status="4" xml:id="sect_6.9.3.2">
          <title>Behavior</title>
          <para xml:id="para_8a93a9e4-550b-4122-90a8-9a6e028b3e0e">The Origin-Server shall perform a search according the requirements for the QIDO-RS services (see <xref linkend="sect_6.7.1.2" xrefstyle="select: label"/>).</para>
          <section label="6.9.3.2.1" status="5" xml:id="sect_6.9.3.2.1">
            <title>Matching</title>
            <para xml:id="para_fa3f9a02-981f-45d2-90de-de5b2058b66f">An Origin-Server shall support matching against all Unified Procedure Step Instance Attributes in <olink targetdoc="PS3.4" targetptr="table_CC.2.5-3" xrefstyle="select: docname label"/> with a Match Key Type value of U, R or *.</para>
            <para xml:id="para_c95675c7-463e-4a6b-94ba-bb7abba930d5">See <xref linkend="sect_6.7.1.2.1" xrefstyle="select: label"/> for matching behavior.</para>
          </section>
        </section>
        <section label="6.9.3.3" status="4" xml:id="sect_6.9.3.3">
          <title>Response</title>
          <para xml:id="para_a8c25d80-6c05-4779-95e5-d97cd1fa23ce">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.3.3.1" status="5" xml:id="sect_6.9.3.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_3343ccd3-9039-4ca6-a034-db7034b2ab7b">If the SearchForUPS request is successful, the Origin-Server shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_de6ef616-2343-4ee5-a523-adaf3297207c">If the request fails, the Origin-Server shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.3-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.3-1" rules="all" xml:id="table_6.9.3-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_44271312-12e1-47ae-b401-f5530a5e5bea">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_e6339b0b-1b74-4d17-8814-9d7d670e4c37">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_96209b1f-ea12-4e71-ae66-fa583b8ea1ef">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0aea7a0f-69aa-4ce9-9244-fbab96136b43">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_84976689-6cdb-4146-8927-16ab1b42db23">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_812a167b-8550-4852-84af-df648f7abbb7">The query completed and any matching results are returned in the message body.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4eb33dfc-8999-4f26-8e66-6e4868830e16">206</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7361abbe-9a96-4e13-bdbe-afd84dcd67e5">Partial Content</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4a426838-587e-4dee-81d8-3ee4bbb97296">Only some of the query results were returned and the rest can be requested through the appropriate UPS-RS request.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c93a34d0-f9ec-4b5b-bc07-fe197cd14796">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a3bf6ffb-f01b-4b98-91fc-445ac24e30c8">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a4edde36-0318-45ad-98fa-cbb8c4b45daa">The UPS-RS Origin-Server was unable to perform the query because the Service Provider cannot understand the query component.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_00438f97-2e18-4e92-ae3c-98405f0e06b1">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5dff261a-7ec0-43f3-a7a8-255fd66cb2ba">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_43c74ae2-a38f-4cdb-9eff-d91b7808a8b2">The UPS-RS Origin-Server refused to perform the query because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6a534afe-b962-4554-bb61-8238a07972ab">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0ded0674-da0b-4218-b43f-dc75cc51f511">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f0677fee-fe16-47c6-8da6-093e732eff1f">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9cf2d311-68a3-4b18-b95c-08e120b50ed9">413</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8022a3eb-6a5c-48b7-a7bd-d1babbd693ad">Request entity too large</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7d555083-47c3-42b4-945c-d54feb3bfee9">The query was too broad and a narrower query or paging should be requested.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b2f602ff-6c79-4d05-b70d-1ae53ae58204">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_047aa1a8-c0a3-41da-9716-11f42eeb5c96">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3cec4b75-18e4-420a-81b9-215d4a5beb01">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.3.3.2" status="5" xml:id="sect_6.9.3.3.2">
            <title>Query Result Attribute</title>
            <para xml:id="para_3de3e738-d347-4d58-8436-4bb54b380101">For each matching UPS Instance, the Origin-Server shall return:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_941778c5-191c-4612-a79f-8044c57a1ec6">All Unified Procedure Step Instance Attributes in <olink targetdoc="PS3.4" targetptr="table_CC.2.5-3" xrefstyle="select: docname label"/> with a Return Key value of 1 and 2.</para>
              </listitem>
              <listitem>
                <para xml:id="para_1ab4f199-6b35-455f-aff2-e5e00b9d6a69">All Unified Procedure Step Instance Attributes in <olink targetdoc="PS3.4" targetptr="table_CC.2.5-3" xrefstyle="select: docname label"/> with a Return Key value of 1C for which the conditional requirements are met.</para>
              </listitem>
              <listitem>
                <para xml:id="para_4eebbcab-f703-4562-8cad-cdc318fd0ee4">All other Unified Procedure Step Instance Attributes passed as {attributeID} query keys that are supported by the Origin-Server as matching or return attributes</para>
              </listitem>
              <listitem>
                <para xml:id="para_fff3fa9e-a2c3-408a-b535-6b1056fba879">All other Unified Procedure Step Instance Attributes passed as "includefield" query values that are supported by the Origin-Server as return attributes.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.3.3.3" status="5" xml:id="sect_6.9.3.3.3">
            <title>Response Message</title>
            <para xml:id="para_c140334f-4b18-41fc-9238-bb9f6398c4e4">The response message body contains the results.</para>
            <para xml:id="para_df5bf8ad-4972-4662-a3e2-6d489fe1f492">The format of the response message body shall contain one of the Media Types specified by the request Accept header field. An Origin-Server shall support all Media-Types allowed in the request.</para>
            <section label="6.9.3.3.3.1" status="6" xml:id="sect_6.9.3.3.3.1">
              <title>XML Response Message</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_8bc12da7-320f-414c-ac34-a8fb858cdf67">Content-Type:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_39240703-1534-44c3-b978-019b1ae23530">multipart/related; type=application/dicom+xml</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_ac83ba42-a131-4913-9088-0fe95ff157a1">The response is a multipart message body where each part is a DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML DicomNativeModel element containing the attributes for one matching UPS Instance (see <olink targetdoc="PS3.19" targetptr="sect_A.1" xrefstyle="select: docname label"/>).</para>
                 </listitem>
                <listitem>
                  <para xml:id="para_0c3ed0a5-7b85-4947-b777-d8b62a40e1a9">If there are no matching results, the message body shall be empty.</para>
                 </listitem>
                <listitem>
                  <para xml:id="para_59fff842-5f71-4f8b-a18a-9623e036d354">Each part in the multipart body includes the following HTTP/1.1 headers:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_7d679bbd-ed94-43f6-999a-b2e81d0fdc5a">Content-Type: application/dicom+xml</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </section>
            <section label="6.9.3.3.3.2" status="6" xml:id="sect_6.9.3.3.3.2">
              <title>JSON Response Message</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_f7dff11d-2441-459d-8db4-c903f9300592">Content-Type:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_deee475f-c184-4e0a-9ea7-dda2a10f4f5e">application/json</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_d30c9859-e1eb-43ea-a63c-9e3d753be081">The response is a DICOM JSON message containing a DICOM JSON property for each matching UPS Instance containing sub-properties describing the matching attributes for each UPS Instance (see <xref linkend="sect_F.2" xrefstyle="select: label"/>).</para>
                </listitem>
                <listitem>
                  <para xml:id="para_21859463-1ba7-477b-83ed-f9356dbe5c1f">If there are no matching results, the JSON message shall be empty.</para>
                </listitem>
              </itemizedlist>
             </section>
          </section>
        </section>
      </section>
      <section label="6.9.4" status="3" xml:id="sect_6.9.4">
        <title>RetrieveUPS</title>
         <para xml:id="para_089d17fa-c3a9-4d20-adf6-ea3af5bccaa6">This resource supports the retrieval of a UPS Instance.</para>
        <section label="6.9.4.1" status="4" xml:id="sect_6.9.4.1">
          <title>Request</title>
          <para xml:id="para_8335f7c4-cfe7-457c-81f5-d9b5aeafd7c0">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_3ff0a82e-99cb-4f21-94cc-e8e0e9530736">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_45481dc8-892d-4203-89c6-80f3f7bd20d5">{+SERVICE}/workitems/{UPSInstanceUID}</para>
                  <para xml:id="para_19091f51-37db-42dc-bd14-8806a96a7527">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_38a85fd1-51e0-46a2-b586-d1b7e979b56c">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_a0c39313-b794-4a47-b39d-d14a8838f0a5">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_a6ed1b44-dbaf-4260-8f6e-44dd41f01c46">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_15f20e7e-0319-4560-99e4-696aba228151">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_802f693f-1c66-451b-b29c-f99d32e8289a">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_9f820fe0-3403-4efc-8b4b-939e413b7360">Accept - The representation scheme in which the RESTful service is requested to return the result. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_09005a23-7844-4db1-a137-22f219b1c1c7">application/dicom+xml</para>
                      <para xml:id="para_f038011a-fec1-4df3-81ec-8aef8cee7ba7">Specifies that the result should be DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_08bb61be-5c96-4e69-9286-58b053c2a097">application/json</para>
                      <para xml:id="para_4502ac10-2ece-49f6-944c-86f66d0ac568">Specifies that the result should be DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_b0415b1a-01a8-4496-bd0a-e2c5ecb286bb">Cache-control: no-cache (recommended)</para>
                  <para xml:id="para_608cfebe-c12b-4014-b68c-7337ca2b6616">If included, specifies that results returned should be current and not cached.</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.4.2" status="4" xml:id="sect_6.9.4.2">
          <title>Behavior</title>
           <para xml:id="para_b0e0ca6d-23ae-44ea-8d16-300cc860e9d4">The Origin-Server shall return, via the HTTP/1.1 response, the indicated Unified Procedure Step Instance to the User-Agent.</para>
          <note>
            <para xml:id="para_ec3ff97d-8b67-4cdf-aa19-731d802a3e07">The requirement for the Origin-Server to respond to GET requests for UPS Instances that have moved to the COMPLETED or CANCELED state is limited. See <olink targetdoc="PS3.4" targetptr="sect_CC.2.1.3" xrefstyle="select: docname label"/>.</para>
          </note>
          <para xml:id="para_24cc2424-389c-42b0-8a62-b67886793965">The User-Agent shall not return the Transaction UID (0008,1195) Attribute. This is necessary to preserve this Attribute's role as an access lock.</para>
          <para xml:id="para_96746a8d-e73c-476c-8415-cf7513f973e7">The User-Agent shall return the HTTP/1.1 Response Status Code applicable to the associated request. A Failure Code shall indicate that the Origin-Server has not returned the SOP Instance.</para>
        </section>
        <section label="6.9.4.3" status="4" xml:id="sect_6.9.4.3">
          <title>Response</title>
          <para xml:id="para_9ac893bb-dfc5-42d7-9929-d865b0a97385">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.4.3.1" status="5" xml:id="sect_6.9.4.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_85dba46a-aadb-4693-94ae-5425e48328df">If the Retrieve request is successful, the Origin-Server shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_3e13775e-42b1-4c38-9e3b-f7e466c3a2df">If the request fails, the Origin-Server shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.4-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.4-1" rules="all" xml:id="table_6.9.4-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_22b68152-7a32-4bd4-8e56-741cec172341">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_7e5885e9-8060-435f-b757-c62e6e61be18">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_51daa520-7510-47bd-92fa-5ff94f59cf6f">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2b320700-4dd2-4dbf-b31b-4c66df7c19d9">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c4242007-b8b8-4e54-b70e-c54ac6d99e8d">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d004a204-c99d-41db-8ebb-1d62338270c4">The requested instance is returned.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e8dfb4ee-c4f1-4eec-846b-87dbed7c7525">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_696910a3-326a-49a1-a373-4a0c08d3ce74">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1c843104-bb69-43fb-88dd-d61934187571">The UPS-RS Origin-Server was unable to perform the query because the Service Provider cannot understand the query component.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8425413c-21c3-451f-b484-c512a7b7eb59">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e6774c71-e480-4e17-ace9-456610ca4262">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3632357e-4da5-4a25-aa3f-d90e8b7227a4">The UPS-RS Origin-Server refused to perform the query because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_41b24062-0044-4613-9223-7d2dabaef01c">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_df022575-0f73-4ecc-a07f-73990af293ae">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0c6c88f1-0820-403a-ae73-251d94fb4df8">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8048981b-c952-43be-ac54-959292f6e834">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_668e8111-1273-469e-975e-018bd2f4347b">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a6e31ace-4fbe-4fa6-b472-2dcefa153b8d">The specified UPS Instance does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3c791598-a8f1-4046-8d8c-aeb982404a5e">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_764014c8-63e8-4884-ad39-2cedcd1a7645">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8af51cbe-37ce-4259-b575-1191b26cff6c">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.4.3.2" status="5" xml:id="sect_6.9.4.3.2">
            <title>Response Message</title>
            <para xml:id="para_6e7c116f-ba40-4278-8adc-1c3f43caeada">The response message body contains the results.</para>
            <para xml:id="para_ef436099-a3b4-4020-a9ad-a6b4cf33f3df">The format of the response message body shall contain one of the Media Types specified by the request Accept header field. An Origin-Server shall support all Media-Types allowed in the request.</para>
            <section label="6.9.4.3.2.1" status="6" xml:id="sect_6.9.4.3.2.1">
              <title>XML Response Message</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_9df2a032-d42a-45f1-8229-d57a4a835ffa">Content-Type:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_ba653cb9-8d0d-445d-8844-266cb78f73e9">application/dicom+xml</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_c41ee764-e0f2-4b48-aa3b-604654a60270">The response contains a DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML DicomNativeModel element containing the attributes for the requested UPS Instance (see <olink targetdoc="PS3.19" targetptr="sect_A.1" xrefstyle="select: docname label"/>).</para>
                </listitem>
              </itemizedlist>
            </section>
            <section label="6.9.4.3.2.2" status="6" xml:id="sect_6.9.4.3.2.2">
              <title>JSON Response Message</title>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_dc41edd2-ae88-4a6f-895d-06687e1bdb07">Content-Type:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_51df51d8-49c7-4c6f-a47f-22d88b03e5bd">application/json</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
                <listitem>
                  <para xml:id="para_6589b12e-3cc2-47b8-9729-a9b379457a2a">The response is a DICOM JSON array containing a DICOM JSON representation of the requested UPS Instance (see <xref linkend="sect_F.2" xrefstyle="select: label"/>).</para>
                </listitem>
              </itemizedlist>
            </section>
          </section>
        </section>
      </section>
      <section label="6.9.5" status="3" xml:id="sect_6.9.5">
        <title>ChangeUPSState</title>
        <para xml:id="para_6d385994-814c-41f3-808d-ccf22e34e7b9">This resource supports the modification of the state of an existing UPS Instance.</para>
        <section label="6.9.5.1" status="4" xml:id="sect_6.9.5.1">
          <title>Request</title>
          <para xml:id="para_7cf1d993-a3cf-4e6c-a1a9-ef54b5a5086b">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_724c9398-80ad-4ab3-a63a-272c7afa81f3">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_5ff109fd-e45b-440b-a0de-be6f3c763650">{+SERVICE}/workitems/{UPSInstanceUID}/state</para>
                  <para xml:id="para_04798586-33ce-485e-bd5b-c7aa2078f1a3">where:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_3b5143e5-d584-485f-8059-1adeeb78a20e">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_c63f9ef6-fc36-427c-ab54-39cfb5edd2ca">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_9fb0c57b-d92e-4758-9901-413709979c4c">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_32b65c66-69ef-4f43-baf2-760d8d8af9f5">PUT</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_4591e722-eca3-415a-b0de-e6f8c3bdbc91">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ca717c0a-4fff-4cdf-8273-33b9ce2802f6">Content-Type - The representation scheme being posted to the RESTful service. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_dc6076ff-d8e8-455b-9377-4989b24be187">application/dicom+xml</para>
                      <para xml:id="para_c81bcfc5-5dc8-4190-b51f-07ad8c096025">Specifies that the post is DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata. See <xref linkend="sect_6.9.5.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_2c903d58-4f83-4f3d-a5ee-5bd17231c59e">application/json</para>
                      <para xml:id="para_57534d31-9979-4d01-82d6-ca0656067a24">Specifies that the post is DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata. See <xref linkend="sect_6.9.5.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_b25bf2b8-2e21-44e9-afaf-030e0f61586e">The request body describes a state change to a single Unified Procedure Step Instance. It shall include all Attributes required for an SCU in <olink targetdoc="PS3.4" targetptr="table_CC.2.1-1" xrefstyle="select: docname label"/>.</para>
            </listitem>
          </itemizedlist>
          <section label="6.9.5.1.1" status="5" xml:id="sect_6.9.5.1.1">
            <title>Request Message</title>
            <para xml:id="para_81973672-650c-4633-b59a-358f9b52085e">The Request Message has a single part body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_f73ec2d8-cb32-45ff-8355-48b38d154fda">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_d94833b9-eff2-4632-af00-07bc9277f7ad">application/dicom+xml</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_03122b07-8936-472d-af62-17220e06465f">application/json</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_a3e9401a-c68c-41d8-a3a9-2061a17c6e59">The request body contains attributes in either DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML or DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON format.</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="6.9.5.2" status="4" xml:id="sect_6.9.5.2">
          <title>Behavior</title>
          <para xml:id="para_8b62bdf8-0512-49d7-8f2a-eca1393b72da">The Origin-Server shall support the state changes to the UPS instance specified in the request as described by the SCP behavior in <olink targetdoc="PS3.4" targetptr="sect_CC.2.1.3" xrefstyle="select: docname label"/>.</para>
          <para xml:id="para_ae253839-a04b-43e5-9821-924772860ea3">After completing the ChangeUPSState request, the Origin-Server shall return the HTTP/1.1 Response Line applicable to the associated request.</para>
        </section>
        <section label="6.9.5.3" status="4" xml:id="sect_6.9.5.3">
          <title>Response</title>
          <para xml:id="para_48b78c11-0588-416a-9063-704952972218">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.5.3.1" status="5" xml:id="sect_6.9.5.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_6c527955-6601-4279-a96d-205a3158d84f">If the State Change was successful, the Service shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_4b04eb83-315b-4621-88d0-7b9b586efbd8">If the State Change fails, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.5-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.5-1" rules="all" xml:id="table_6.9.5-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_a76fbfc3-5e3f-4a1f-b696-820fe268f1e8">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_37a34c6b-a242-4f9c-8523-139d558f648b">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_6713196c-bf31-477d-8bac-8b7a88b885f5">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cba95fb1-6dd0-42ba-a40f-c03a5c1990cc">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4a7cb72c-73c0-4af8-9a45-5a04dba90982">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_eb077198-7d76-41cd-ba3f-586ee7f2276d">The UPS instance was updated</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_03de6619-d3cc-432b-a5e5-5ce3a1fb241d">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5c30afe7-5bb8-4291-85c0-596bdff3f468">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a3c8d96b-7fca-44ca-a411-f0a5b2fac9ce">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_374e81f9-1ad9-4ae5-afb0-6410eb5aa166">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7798b5e2-d17f-423b-9126-5a8388631499">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8180f130-2896-4a6c-8919-e544a6e9ee5f">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a50ccabf-2cc9-4cc0-b1bb-3a55dac29b03">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5cdcb985-3a6d-4ef3-a3b1-bf5132d8697b">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_db85b82a-50d0-4b5b-bf5f-69e16931c0c2">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ea4bbaf3-3905-4895-a7d7-10284979ef4b">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_af3ac5b3-64e3-40ce-994e-87263b3309f3">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_46f75767-a073-4145-b5a1-a5e390d0ae99">The specified UPS Instance does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_256c964b-e529-49cf-83f8-cae7d3d503ff">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_fd7c58aa-fe15-4f17-a8a2-aa24344536cf">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_fb1b0bb1-0cdd-4531-aa5f-de8117bf9b2a">The request cannot be performed for one of the following reasons:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_84aed995-0b47-4d62-867f-8e4b4c13de25">the submitted request is inconsistent with the current state of the UPS Instance</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_b296f7cf-9190-4b18-a1e7-406c1c709d69">the Transaction UID is missing</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_216ad774-47a3-4e66-9670-c6fe45463a65">the Transaction UID is incorrect</para>
                      </listitem>
                    </itemizedlist>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b24d2d1b-6297-4591-b61a-d4c1a1b8807f">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_059df988-cedb-4fd3-bf3a-bc3a1ae850fa">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_95c91b72-27ba-4952-9d0e-5bd058fbe4ac">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.5.3.2" status="5" xml:id="sect_6.9.5.3.2">
            <title>Response Headers</title>
            <para xml:id="para_8a01f85c-3f60-4b6e-913e-82446efae3f1">If the User-Agent specifies a Procedure Step State (0074,1000) attribute with a value of "CANCELED" and the UPS Instance is already in that state, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
<para xml:id="para_f542085c-af02-4463-86b3-7a5fec560628">Warning: 299 {+SERVICE}: The UPS is already in the requested state of CANCELED.</para>
</listitem>
            </itemizedlist>
            <para xml:id="para_33a66bdf-8d46-40ed-8250-95dc80c72a90">If the User-Agent specifies a Procedure Step State (0074,1000) attribute with a value of "COMPLETED" and the UPS Instance is already in that state, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_9ed0ad89-a4c5-44b9-917c-9e33cf651f78">Warning: 299 {+SERVICE}: The UPS is already in the requested state of COMPLETED.</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_36b03646-3e63-4102-8641-301867f68e70">If the request was rejected with an HTTP/1.1 409 status code, the response message shall include one of following messages in the HTTP/1.1 Warning header field describing the nature of the conflict:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_c9bd54a7-3027-41b7-80b4-c9d2dd17ccbf">Warning: 299 {+SERVICE}: The Transaction UID is missing.</para>
              </listitem>
              <listitem>
                <para xml:id="para_ec2c1b4b-f143-4e59-ad15-a4a8bef62c8a">Warning: 299 {+SERVICE}: The Transaction UID is incorrect.</para>
              </listitem>
              <listitem>
                <para xml:id="para_6fada79a-ed3f-4b4b-b31d-4ecaa417d6a4">Warning: 299 {+SERVICE}: The submitted request is inconsistent with the current state of the UPS Instance.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.5.3.3" status="5" xml:id="sect_6.9.5.3.3">
            <title>Response Message Body</title>
            <para xml:id="para_cb786fab-1aca-4133-a2ff-2f72ded9ae5a">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.6" status="3" xml:id="sect_6.9.6">
        <title>RequestUPSCancellation</title>
        <para xml:id="para_3de310e5-44ac-44fa-86c3-5c41e58f8157">This resource records a request that the specified UPS Instance be canceled.</para>
        <section label="6.9.6.1" status="4" xml:id="sect_6.9.6.1">
          <title>Request</title>
          <itemizedlist>
            <listitem>
              <para xml:id="para_831a9389-3fa9-446c-a71f-beb60c3bb24e">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_bf054d51-2e99-4c5e-8f1e-939abd3761d1">{+SERVICE}/workitems/{UPSInstanceUID}/cancelrequest</para>
                  <para xml:id="para_05b1c0ec-b320-49aa-a91a-295b903cd0da">where:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_03833711-5982-4a7b-97a5-d2cb34c78ccc">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_225ca6aa-8eb5-4693-b64d-4d804bdc5336">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_c9fcd51f-cf1f-4972-b78f-3dc9e57f663b">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_26fba1ab-dcf7-42ec-82d5-c9f436854361">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_0df67935-6055-4987-8870-c5fe3aeedaf3">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a43890ee-34ee-45ff-b104-7ecf95dfb2d5">Content-Type - The representation scheme being posted to the RESTful service. The types allowed for this request header are as follows:</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_c734bf7f-81d5-4c33-a1f0-c844c14fdb70">application/dicom+xml</para>
                      <para xml:id="para_0c57cc0a-fdc2-4aa5-9e22-31decc9d4416">Specifies that the post is DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML metadata. See <xref linkend="sect_6.9.5.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_7c1b2a35-0b45-42c8-a425-67903eb3e573">application/json</para>
                      <para xml:id="para_f2efe409-1c9c-46c7-8587-f591c223bff4">Specifies that the post is DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON metadata. See <xref linkend="sect_6.9.5.1.1" xrefstyle="select: label"/>.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_c09bfa7d-2fe8-4195-b977-3234070cb39c">The request body describes a request to cancel a single Unified Procedure Step Instance. The request body shall comply with all attribute requirements described in <olink targetdoc="PS3.4" targetptr="table_CC.2.2-1" xrefstyle="select: docname label"/>.</para>
            </listitem>
          </itemizedlist>
          <section label="6.9.6.1.1" status="5" xml:id="sect_6.9.6.1.1">
            <title>Request Message</title>
            <para xml:id="para_8642d617-6160-43ff-8d87-6f2a7c470b2b">The Request Message has a single part body.</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_5844c12b-4e90-4e6a-b280-c302ccd2ca4c">Content-Type:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_016ad37d-57c8-42da-8c8e-6320353160b2">application/dicom+xml</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_59030f45-a254-41a3-993e-ccd8c156023d">application/json</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_d6440c63-85e4-4e92-82d8-c9d2c46d6765">The request body contains attributes in either DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML or DICOM <olink targetdoc="PS3.18" targetptr="PS3.18" xrefstyle="select: labelnumber"/> JSON format.</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>
        <section label="6.9.6.2" status="4" xml:id="sect_6.9.6.2">
          <title>Behavior</title>
          <para xml:id="para_020efd69-6c6e-43a7-a267-77e715a1d484">RequestUPSCancellation is used to request to the Origin-Server that the state of a UPS Instance be changed to CANCELED as shown in <olink targetdoc="PS3.4" targetptr="figure_CC.1.1-1" xrefstyle="select: docname label"/>. The Origin-Server shall process the request as described by the SCP behavior in <olink targetdoc="PS3.4" targetptr="sect_CC.2.2.3" xrefstyle="select: docname label"/>.</para>
          <para xml:id="para_1583907e-c7f4-438c-9fe4-2b77741f0d3f">The request may include a Reason For Cancellation and/or a proposed Procedure Step Discontinuation Reason Code Sequence.</para>
          <para xml:id="para_b17cc9c2-c689-4a13-9b64-15176dac1541">The request may also include a Contact Display Name and/or a Contact URI for the person with whom the cancel request may be discussed.</para>
          <note>
            <para xml:id="para_90494204-2070-4e52-a49f-eefad6134ca0">An HTTP/1.1 Status Code indicating success means that the Request was accepted, not that the UPS has been canceled. The system performing the UPS is not obliged to honor the request to cancel and in some scenarios, may not even receive notification of the request. See <olink targetdoc="PS3.4" targetptr="sect_CC.2.4" xrefstyle="select: docname label"/>.</para>
          </note>
          <para xml:id="para_cdfc944f-5efb-40de-8d87-3e83a58c4829">To cancel an IN PROGRESS UPS that the User-Agent is itself performing, the User-Agent shall instead use the ChangeUPSState action as described in <xref linkend="sect_6.9.5" xrefstyle="select: label"/>.</para>
        </section>
        <section label="6.9.6.3" status="4" xml:id="sect_6.9.6.3">
          <title>Response</title>
          <para xml:id="para_33fa5ffc-839e-4829-bf11-146e98cc9005">The Origin-Server shall return an HTTP/1.1 response message.</para>
          <section label="6.9.6.2.1" status="5" xml:id="sect_6.9.6.2.1">
            <title>Response Status Line</title>
            <para xml:id="para_de7b2086-2af4-4cfc-857e-08c3c922d365">If the cancel request was accepted, the Service shall return an HTTP/1.1 "202 - Accepted" response code.</para>
            <para xml:id="para_df25c10a-54e7-4c72-b6cc-24e0f6a56134">If the cancel request was rejected, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.6-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.6-1" rules="all" xml:id="table_6.9.6-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_99045aaf-e11b-425c-93e4-19a206b65d13">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_d691e18c-74dd-48c1-81fc-e03b7013e86b">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_0229fb42-956d-4e03-9d75-530ce88710c6">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_68779ed5-051f-4bbd-9c1a-422ecbf7f7dd">202</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c3aa4d28-d699-42b8-8e4e-4cb15d2fbd5e">Accepted</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_18de86ec-21af-4944-a714-4533451d2dd9">The cancel request was accepted</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_734eeef3-10cf-4e97-8bee-c0a3b86ca618">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8de2c9c5-6202-4c95-a2f6-76f30b269574">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2b204ba9-e48d-411c-ae62-ac5a24a6d4e5">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b551c0d7-b343-4595-ac70-7ef2f2312eab">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_72dfc95c-bc9a-479d-9b74-c33175baf97c">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_66af05ad-480e-40c4-a69f-52f91f2742f5">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c487d95c-f5c2-4e54-bf53-bcadaffc5e55">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_333908be-f654-4915-ab4e-6ded2685adbd">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_30661fbf-dc2d-415b-9f76-d1cc8043f153">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5b2aa771-765c-43bb-9631-028e13f55aa1">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ac3c068c-0bec-4e5b-9a64-315d577bcef7">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e3063a71-6372-4acf-a7d6-20ae47d7947e">The specified UPS Instance does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2c2b952c-fe3b-470e-bd0f-ce20fc49eeff">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bf60d85c-d6fd-45c5-8bf0-9144a48ee69d">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_93d8572d-130a-48df-a3ea-20b8f3a756d7">The cancellation request is inconsistent with the current state of the UPS Instance</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d5235b5a-ec6f-49df-a5b1-d3ee6d7e9990">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9b9b4bef-b367-492e-bc49-3bf3391c8ca9">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_75704194-0708-4d64-a6a5-722a7cfaed2e">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.2.5.2" status="5" xml:id="sect_6.9.2.5.2">
            <title>Response Headers</title>
            <para xml:id="para_2e459311-4858-4d02-936d-f09374d638d3">If the UPS Instance is already in a canceled state, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_f5b54030-c2b0-4709-a808-898b69ebba19">Warning: 299 {+SERVICE}: The UPS is already in the requested state of CANCELED.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.5.2.3" status="5" xml:id="sect_6.9.5.2.3">
            <title>Response Message Body</title>
            <para xml:id="para_5db42ab4-4f18-48c9-a1ce-0bf33168eb4f">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.7" status="3" xml:id="sect_6.9.7">
        <title>CreateSubscription</title>
        <para xml:id="para_a412fbda-c25d-4294-bad9-c2fc5275ac7c">This resource records subscribers to whom future events associated with the specified UPS Instances will be reported.</para>
        <section label="6.9.7.1" status="4" xml:id="sect_6.9.7.1">
          <title>Request</title>
          <para xml:id="para_a1fbbefc-5793-41fb-9c37-bb8717c9f142">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_531ac176-15dc-4857-ae5e-41d703e7c662">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_fde679c5-3487-4255-90d3-2f7c6701d0f5">{+SERVICE}/workitems/{UPSInstanceUID}/subscribers/{AETitle}}{?deletionlock}</para>
                </listitem>
                <listitem>
                  <para xml:id="para_34c5a084-5190-4b19-ba50-6667e726333d">{+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5/subscribers/{AETitle}{?deletionlock}</para>
                </listitem>
                <listitem>
                  <para xml:id="para_7c130e1a-f94d-4410-97d7-7dcdb8927729">{+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/{AETitle}{?deletionlock,query*}</para>
                  <para xml:id="para_ac834208-6474-4fe6-a387-1bf359f4057d">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_edceeb17-eb9b-4084-84c1-2a4278bf5a80">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_7d8fffad-0db8-42ec-99fc-524d3bceb25f">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance or a well-known UID</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_316e7f50-163c-4a54-b9e5-5ab845dc19fa">{AETitle} is an Application Entity Title that conforms to the "AE" Value Representation (see <olink targetdoc="PS3.5" targetptr="table_6.2-1" xrefstyle="select: docname label"/>) and identifies the Application Entity to be subscribed</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_8a255d43-b767-45c7-b07b-8e2b7a8ef81e">{deletionlock}, if present, shall have a value of either "true" or "false", indicating whether or not the User-Agent is requesting a Deletion Lock</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_71f8e5cc-d384-41b1-a076-ec81b03a869b">{query} specifies the query key/value pairs describing the filter parameters</para>
                    </listitem>
                  </itemizedlist>
               </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_b9b9814f-8ed7-4e09-af22-fcd6adc227e7">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_52269060-21d3-4392-9039-42cf44a7d31a">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_b9c57602-5056-4863-9803-89fa8ffe959c">Headers</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_1274b203-8b0e-45a6-86e5-aea674cdd97c">Content-Length: 0</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_844518ba-a7d8-4385-8d7a-c80d01821a2b">{query}</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ddd89d7b-6787-4220-aa84-faca07f26411">deletionlock=true | false</para>
                </listitem>
                <listitem>
                  <para xml:id="para_00859451-6636-44bd-9ea4-1dc1e3b8b58c">{attributeID}={value}</para>
                  <para xml:id="para_debd7e1a-f227-47d9-a9ba-4e2121b89f9e">0-n / {attributeID}={value} pairs allowed</para>
                  <para xml:id="para_1158c041-bd09-475a-a186-a70a7ab31ae2">Each {attributeID} shall refer to an attribute of the Unified Procedure Step IOD (see <olink targetdoc="PS3.3" targetptr="sect_B.26.2" xrefstyle="select: docname label"/>).</para>
                  <para xml:id="para_4ba35ffe-bf47-436b-a801-6dc7a370e2b7">See <xref linkend="sect_6.7.1.1" xrefstyle="select: label"/> for {attributeID} and {value} encoding rules.</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_960a2a2d-e519-40e0-892d-002b92c2230c">The request body shall be empty.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.7.2" status="4" xml:id="sect_6.9.7.2">
          <title>Behavior</title>
          <para xml:id="para_e20edb09-19f5-4bcd-bbc0-bb7bd1ee27fa">The Origin-Server shall support the management of UPS instance subscriptions as specified by the SCP behavior in <olink targetdoc="PS3.4" targetptr="sect_CC.2.3.3" xrefstyle="select: docname label"/>.</para>
          <para xml:id="para_b5c38421-1e02-4a26-8a31-e3304e315c02">Upon receipt of the CreateSubscription, SuspendGlobalSubscription or DeleteSubscription request, the Origin-Server shall attempt to update the Global Subscription State, Filtered Global Subscription and/or UPS Subscription State of the specified Application Entity with respect to the specified SOP Instance UID as described in <olink targetdoc="PS3.4" targetptr="table_CC.2.3-2" xrefstyle="select: docname label"/> and then return the appropriate HTTP/1.1 response.</para>
        </section>
        <section label="6.9.7.3" status="4" xml:id="sect_6.9.7.3">
          <title>Response</title>
          <section label="6.9.7.3.1" status="5" xml:id="sect_6.9.7.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_cf67d714-7339-417f-aafa-12b2421d1aed">The Service shall return an HTTP/1.1 status line, including a status code and associated reason phrase.</para>
            <para xml:id="para_3233756e-4b82-412f-9aa3-5c8c1afd7dea">If the CreateSubscription request was successful, the Service shall return an "HTTP/1.1 201 - Created" response code. The response shall contain a "Content-Location" header of the following format:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_26261613-3323-480f-aa20-7705587eedc2">Content-Location: {WSSERVICE}</para>
                <para xml:id="para_75a50891-6b26-44c5-8c0f-6c05fdbbc976">where:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_b162f152-01d2-4c76-8441-1c8be52697c1">{WSSERVICE} is the base URL for the WebSocket service. This shall include the WebSocket protocol (either WS or WSS) and may include a combination of authority and path.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </itemizedlist>
            <para xml:id="para_7d80d996-a2c8-4438-aee2-dee15c9ebd30">If the subscription fails, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.7-2" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.7-2" rules="all" xml:id="table_6.9.7-2">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_8e388fce-2af0-4c4a-8f4f-b04bb633c8fb">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_bade3a32-e4d6-4113-b2a7-4f66d702241d">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_1a4ca6ab-9b01-4abf-8dda-34e49b4772ab">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c1aa2fa1-6337-4c9f-81ed-a3e31d9aa7b0">201</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_39a5e08f-dae2-45e3-a73e-30760485b1cd">Created</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_56c5326a-dcb8-4b11-b529-60a9ac2fe0c7">The subscription was created.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_47e2c8de-2fa2-4131-af2a-62cd1f552a70">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e02ffa3c-b374-41ad-8f4c-3fad3e87347b">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8c21fa1a-6537-4b32-a38a-02329a02f449">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_24f0518a-1f3d-4009-a932-466e7bf9d36d">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3e4807de-a029-4d01-8062-35dad09fec6d">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_479536c6-4ff2-48f9-aeef-e405953a0930">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3ea614c3-ae63-499a-81df-fdb45febfa74">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cc93240f-8ed7-4ea8-a374-16bd1d43664b">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_92546e3d-2ca9-46bc-aac9-1c7f125d7c85">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., the Origin-Server does not support global subscription filtering or an authenticated user has insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e8b6043b-6e35-4cb5-914e-b7ea5b28845a">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ac6701ea-660f-41f4-b28e-74b6c48ed2a5">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_808288c9-febf-4a26-bbca-1bca97baafdd">The specified UPS Instance or well-known UID does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cb752d19-0b85-498a-801a-3023dbd82a72">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1b04bbde-734f-4c9f-ba9c-10d3cafaa951">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_89e255f0-3424-40a4-8602-690b6b414e1a">Specified action not appropriate for specified instance.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_6229d6ec-6dc1-41d3-9c7a-9622cd5f7f0f">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d3abe3dd-1548-4305-9c14-17b2d13d73cb">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1b6ec3d4-57c1-4bf3-a330-2b6227a864a6">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.7.3.2" status="5" xml:id="sect_6.9.7.3.2">
            <title>Response Headers</title>
            <para xml:id="para_4cb1225b-c0c8-4fdb-b047-6ca7c93df9e9">If the CreateSubscriptionrequest was accepted but the deletion lock was not, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_5761f5aa-5f28-4c47-90d8-8587ea51317d">Warning: 299 {+SERVICE}: Deletion Lock not granted.</para>
              </listitem>
            </itemizedlist>
            <para xml:id="para_57812f92-cbeb-4bd7-8860-2849f8cf8b38">If the request was rejected with an HTTP/1.1 403 status code because Filtered Global Subscription is not supported, the response message shall include the following HTTP/1.1 Warning header field:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_51b912d6-8e98-478a-a0b4-9a37cd4c751a">Warning: 299 {+SERVICE}: The Origin-Server does not support Global Subscription Filtering.</para>
              </listitem>
            </itemizedlist>
          </section>
          <section label="6.9.7.3.3" status="5" xml:id="sect_6.9.7.3.3">
            <title>Response Message Body</title>
            <para xml:id="para_e79ccb74-5367-4900-a942-a01825b6d4ea">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.8" status="3" xml:id="sect_6.9.8">
        <title>SuspendGlobalSubscription</title>
        <para xml:id="para_10f90641-ab04-4a72-8eb2-44ff5159ac57">This resource suspends an existing Global Subscription or Filtered Global Subscription. The Origin-Server will no longer automatically subscribe the User-Agent to newly-created UPS Instances. This does not delete any existing subscriptions to specific UPS Instances.</para>
        <section label="6.9.8.1" status="4" xml:id="sect_6.9.8.1">
          <title>Request</title>
          <para xml:id="para_6628e535-eb85-4b36-97ee-da1eece6cf95">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_cafa9ce8-82e4-40a0-a12b-fa71efdf023d">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_06e8ab43-ad8f-4077-834d-84b957df0073">{+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5/subscribers/{AETitle}/suspend</para>
                </listitem>
                <listitem>
                  <para xml:id="para_c7e28566-4128-4b30-81eb-fe33255e7a1a">{+SERVICE}/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/{AETitle}/suspend</para>
                  <para xml:id="para_257b7d22-8569-4144-a4eb-a417ed4849f5">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_5fc6e237-01c3-4d12-a1da-0159b74bf409">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_8ff5424d-1e20-478c-85c9-d1e347fca811">{AETitle} identifies the subscribed Application Entity.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_55a29060-88d1-41f8-a60b-aec51e79d1bf">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_2e58613e-67c3-40fc-be1e-133a3178a699">POST</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_3690f1cc-1ee7-4515-9378-7c51ca5b0a9f">The request body shall be empty.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.8.2" status="4" xml:id="sect_6.9.8.2">
          <title>Behavior</title>
          <para xml:id="para_acb6e9ae-c750-41e9-a8f0-689d4f8efd41">The SuspendGlobalSubscription Origin-Server shall behave as described in <xref linkend="sect_6.9.7.2" xrefstyle="select: label"/>.</para>
        </section>
        <section label="6.9.8.3" status="4" xml:id="sect_6.9.8.3">
          <title>Response</title>
          <section label="6.9.8.3.1" status="5" xml:id="sect_6.9.8.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_d5f1f63e-c167-4477-bdf8-ddf9a5b7a800">The Service shall return an HTTP/1.1 status line, including a status code and associated reason phrase.</para>
            <para xml:id="para_2f211101-b9a7-49f5-83c2-0563edccf4ab">If the SuspendGlobalSubscriptionrequest was successful, the Service shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_1406bb6c-c9be-4e54-a420-5aee0145c7c6">If the subscription change fails, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.8-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.8-1" rules="all" xml:id="table_6.9.8-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_808fedf3-6c3f-42b3-84f0-3184cb53756a">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_62f9c544-26dd-4f46-ba24-763593ed1e89">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_1d8bc33c-5e37-41b7-85a6-92db75da11ef">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_1c1fd676-bf04-4a00-811f-ece6157b5b9b">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_77f17373-f52b-4959-9212-32ef2385f4e4">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_cee62da0-ddcd-4afd-a18f-df8f3ec85e95">The subscription was suspended.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_30078206-db6b-4301-9d4c-75b2eaf40062">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_08fc5daf-7142-488b-a234-a202d3fc2507">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5d2ef6ad-ede7-4e34-9f8e-28f74d3cc3d7">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_10a7cf8c-f1f5-46ab-9a7b-fd161c871d31">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7f2eb32f-c80b-43b8-8350-32cbba2a9a2d">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a594a2c3-b385-456d-8b0c-8c62c0e1ba87">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f0be92d3-67e3-4c8f-b5ee-98a2ba009115">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_e88e1d2c-efd7-4f50-987d-1c40d0940f54">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ca2fcea9-6f30-4273-8d99-98fe706d8978">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_5a58161d-3050-47cb-942f-647de05167a3">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_31b669c0-b065-4f53-8351-813aa327ecb7">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_eb39c269-b99d-4d3b-ac86-d73997d2dc6c">The specified UPS Instance or well-known UID does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_168cd3ef-4957-4b11-ae2e-9dc51da90252">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7bb8482b-9b57-4b64-8c53-6b197f99e7ab">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_122b0cd4-edc1-4149-8739-6047a79a771c">Specified action not appropriate for specified instance.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_0ff96c9a-7f12-456a-adfe-0c13f3f475e5">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7c986001-ae2a-4296-b939-f9a3cef8478e">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9c02ac1c-6f61-4c5d-9a05-4517152b89b5">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.8.2.2" status="5" xml:id="sect_6.9.8.2.2">
            <title>Response Message Body</title>
            <para xml:id="para_6217e241-f149-4e95-b205-52b8bae9c103">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.9" status="3" xml:id="sect_6.9.9">
        <title>DeleteSubscription</title>
        <para xml:id="para_8b7c2648-cba3-453e-a56e-575e2c017645">This resource removes existing subscriptions from the specified UPS Instances.</para>
        <section label="6.9.9.1" status="4" xml:id="sect_6.9.9.1">
          <title>Request</title>
          <para xml:id="para_212e8baa-f25f-4895-b1bc-bae1509011b7">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_74aa2c74-c482-45f6-91d7-5d9f708b6dd2">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_ecef9109-6abb-4bd4-9798-e1a52158db19">{+SERVICE}/workitems/{UPSInstanceUID}/subscribers/{AETitle}</para>
                  <para xml:id="para_abb16cf2-5a94-4106-8a29-b86ec8af9e8e">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_6be93744-dd49-4360-a0b8-9ef24093cf6b">{+SERVICE} is the base URL for the service. This may be a combination of protocol (either HTTP or HTTPS), authority and path.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_69df1710-e24f-410f-bbf7-b4f1a79e27cf">{UPSInstanceUID} is the UID of the Unified Procedure Step Instance or a well-known UID.</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_5593cc02-f607-404c-b218-c5eca24eff8b">{AETitle} identifies the subscribed Application Entity.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_3b92bcab-328f-479c-86fd-90b10f4614f0">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_2a2e7c35-4c3f-4e2d-93b1-a5265f2d4f0e">DELETE</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_96f5dc2d-0dfc-4b37-947e-0f6188bb3ce3">The request body shall be empty.</para>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.9.2" status="4" xml:id="sect_6.9.9.2">
          <title>Behavior</title>
          <para xml:id="para_928ff02b-32a4-482a-b793-fb2773b59982">The DeleteSubscription Origin-Server shall behave as described in <xref linkend="sect_6.9.7.2" xrefstyle="select: label"/>.</para>
        </section>
        <section label="6.9.9.3" status="4" xml:id="sect_6.9.9.3">
          <title>Response</title>
          <section label="6.9.9.3.1" status="5" xml:id="sect_6.9.9.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_76c90e5f-39fb-477a-9028-e09c6464d4b8">The Service shall return an HTTP/1.1 status line, including a status code and associated reason phrase.</para>
            <para xml:id="para_c6a2e204-9c57-4af4-8943-4b562c6ffc30">If the DeleteSubscriptionrequest was successful, the Service shall return an HTTP/1.1 "200 - OK" response code.</para>
            <para xml:id="para_8ad72394-2236-4e0b-b3ec-8c05e9a3e431">If the subscription fails, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.9-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.7-1" rules="all" xml:id="table_6.9.9-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_4b95a2e3-ae1b-4f88-9f7e-80fa29d49fe1">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_22354367-d1b7-44bc-8c2b-bd366009675b">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_31327a17-94f3-4ca9-921b-cfa927f3797f">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_df320a7c-f4b4-47d5-9452-bf36492b1043">200</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_137ca432-9688-4352-95c9-a8e7c8dc0f5c">OK</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_3aa42993-472f-4bc5-99cd-1a693edc5223">The subscription was removed.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_390f42c6-cffb-457b-9eea-485fa156b496">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2ed87307-2e71-4cfd-b551-a5bab6a1d48f">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f2ce2974-3901-473d-84f3-30050a1a3a26">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_f5169278-96d4-4333-b5de-4d34d6d5e6d8">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8ecd4cb5-ae05-40d6-bd98-45cfc34b1442">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_8e5aa9f5-9e38-46b8-86c9-510effed91a7">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_bac3ef4d-7232-4036-8760-62f0055fdf6c">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_38d7a9f1-cd11-420b-93c8-b3bfd8136de6">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4c48c36a-adaf-4daa-b3a2-743cd82435f8">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_4e355eb2-274b-48b8-82d7-690984980a2c">404</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_48a9de6f-ff4e-4362-aedf-5bbcfd03a57c">Not found</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_2eb610a6-1904-4e1d-8f20-86c332d8c14c">The specified UPS Instance or well-known UID does not exist or is not managed by this Origin-Server.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ec4edbfc-54e7-4ee8-a043-5e486c349da6">409</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9d13dc6b-717b-481e-84cc-2e0c03ccf9bd">Conflict</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_7ae840a2-2291-4e68-ae9a-f91c46b7f0fc">Specified action not appropriate for specified instance.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b7f7129d-0474-46c9-a6bc-719c2a2c80fb">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d028ddcf-ff62-41a9-b521-d2c0269a2b66">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c11fd937-6961-49da-b376-8ec5659c101b">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.9.3.2" status="5" xml:id="sect_6.9.9.3.2">
            <title>Response Message Body</title>
            <para xml:id="para_dc2ecf81-4cdd-4ec1-8dd9-1249f9a322ad">The response message body shall be empty.</para>
          </section>
        </section>
      </section>
      <section label="6.9.10" status="3" xml:id="sect_6.9.10">
        <title>OpenEventChannel</title>
        <para xml:id="para_4f12e125-0477-451b-8284-f8894d90ca02">This resource opens a WebSocket channel that will be used to send Event Reports to the client.</para>
        <para xml:id="para_b8e06445-8365-404f-b19b-633f540f35b7">See RFC-6455 for details on the WebSocket protocol.</para>
        <section label="6.9.10.1" status="4" xml:id="sect_6.9.10.1">
          <title>Request</title>
          <para xml:id="para_2cc50443-15be-4732-abc9-c0768a806d11">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_14fd9475-6241-4b5b-b434-fb3bc1e67bf1">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_af130313-ebff-4269-9eb2-7f34ea1c90f5">{+WSSERVICE}/subscribers/{AETitle}</para>
                  <para xml:id="para_2dabb5a2-0dae-4ce6-ad86-a61298e29f48">where</para>
                  <itemizedlist>
                    <listitem>
                      <para xml:id="para_1707b683-2875-472d-8a8e-b65d088ea13c">{+WSSERVICE} is the base URL for the WebSocket service. This shall include the WebSocket protocol (either WS or WSS) and may include a combination of authority and path</para>
                    </listitem>
                    <listitem>
                      <para xml:id="para_14d4722c-d511-4e9f-9514-8ea9889da78a">{AETitle} identifies the subscribed Application Entity.</para>
                    </listitem>
                  </itemizedlist>                          
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_fca885cd-b9e5-4511-9a06-6fe7d8b7b2a0">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_5e5f1f5b-339c-42ac-827d-986c6660a9ac">GET</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </itemizedlist>
        </section>
        <section label="6.9.10.2" status="4" xml:id="sect_6.9.10.2">
          <title>Behavior</title>
          <para xml:id="para_484b2ea5-625b-4a99-b2d3-fd0c25bebf18">The Origin-Server maintains the active WebSocket connection and uses it to send Event Report messages for UPS Instances which have subscriptions association with {AETitle} (see <xref linkend="sect_6.9.7.2" xrefstyle="select: label"/>).</para>
          <para xml:id="para_2389119d-f6ab-4e89-a9e0-66da42551be3">If the WebSocket connection is lost at any point the User-Agent can re-establish it by repeating the request.</para>
          <para xml:id="para_2a609230-a870-4d92-bfb0-c3ff327aaf89">The state of a WebSocket connection does not affect subscriptions and an Origin-Server is not required to queue messages when the connection is down.</para>
          <note>
            <para xml:id="para_27007e31-e087-4306-bb71-3fb93d5e8f45">A User-Agent will only receive the initial state of a newly-subscribed UPS Instance if the WebSocket connection was initiated before creating the subscription</para>
          </note>
        </section>
        <section label="6.9.10.3" status="4" xml:id="sect_6.9.10.3">
          <title>Response</title>
          <section label="6.9.10.3.1" status="5" xml:id="sect_6.9.10.3.1">
            <title>Response Status Line</title>
            <para xml:id="para_320b9c41-c77d-4652-bab3-24daa7dbfaa9">The Service shall return an HTTP/1.1 status line, including a status code and associated reason phrase.</para>
            <para xml:id="para_cfc1258b-16c8-4f60-b834-c4a7dfdf9a6d">If the request was successful, the Service shall return an HTTP/1.1 "101 - Switching Protocols" response code.</para>
            <para xml:id="para_e3fb7105-b5d9-45a8-ae27-3174b5ef4c17">If the request fails, the Service shall return an appropriate failure status line with a response code from <xref linkend="table_6.9.10-1" xrefstyle="select: label"/>.</para>
            <table frame="box" label="6.9.10-1" rules="all" xml:id="table_6.9.10-1">
              <caption>Status Codes</caption>
              <thead>
                <tr valign="top">
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_afbf638b-de2e-4c48-9f40-16e15c0051fa">HTTP/1.1 Code</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_87724547-c776-42d3-86e2-daeffbb9ec5d">Reason Phrase</para>
                  </th>
                  <th align="center" colspan="1" rowspan="1">
                    <para xml:id="para_c26201dd-963b-405b-bc3d-7c7f47114432">Description</para>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_248048b5-fca0-41d7-86ca-e2d746842441">101</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_98f5d2b2-6a1c-4e42-a886-aa7e0132094e">Switching Protocols</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_82c2e97c-d1e7-4927-8c84-e4921a307370">The WebSocket connection was established.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_41cb8d96-c46a-41fd-9c6a-9af0c8779b47">400</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b12b98e9-fc79-4e60-9779-5abb283ee175">Bad Request</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_ddb01324-83f7-45b3-860f-f6e3b5c25243">The UPS-RS Origin-Server was unable to understand the request</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_d2764fce-de64-43ec-812f-e74d1e9eee16">401</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_c3d1c8b2-2d23-4f51-9ece-28c26b42df3a">Unauthorized</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_b1d1a817-1f14-428d-bcd9-6855e373af1d">The UPS-RS Origin-Server refused to accept the request because the client is not authenticated.</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a7e1d932-24d4-47d5-b991-7eba3822e338">403</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_9e54741c-24e7-4802-8d99-feb6816a1b74">Forbidden</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_a0b4a35b-8656-4b9e-8938-6daa03e0e54b">The UPS-RS Origin-Server understood the request, but is refusing to perform the query (e.g., an authenticated user with insufficient privileges).</para>
                  </td>
                </tr>
                <tr valign="top">
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_20bd608b-3947-4106-91dd-7931afb93829">503</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_77dae738-2cd0-48ff-904e-9cc9fd9630e6">Busy</para>
                  </td>
                  <td align="left" colspan="1" rowspan="1">
                    <para xml:id="para_11786344-3b8e-4c9a-977b-c7b8311fd0cc">Service is unavailable.</para>
                  </td>
                </tr>
              </tbody>
            </table>
          </section>
          <section label="6.9.10.3.2" status="5" xml:id="sect_6.9.10.3.2">
            <title>Response Message Body</title>
            <para xml:id="para_ecf9d55a-5d1f-4d33-ab36-ad359a13bd99">The response message body shall be empty.</para>
            <para xml:id="para_1cabd4ba-e05f-4a97-a2d4-1952f04a0e98">The connection remains open and may be used by the server to send Event messages (see <xref linkend="sect_6.9.11" xrefstyle="select: label"/>).</para>
          </section>
        </section>
      </section>
      <section label="6.9.11" status="3" xml:id="sect_6.9.11">
        <title>SendEventReport</title>
        <para xml:id="para_554592f1-82ed-480c-9cd9-a98a875193fd">This operation sends an Event Report over an established WebSocket connection.</para>
        <section label="6.9.11.1" status="4" xml:id="sect_6.9.11.1">
          <title>Request</title>
          <para xml:id="para_3f6cdace-2d53-42d7-8c66-4f263487da46">The request message shall be formed as follows:</para>
          <itemizedlist>
            <listitem>
              <para xml:id="para_25ee4957-4bb8-4915-b6ae-e039a20f22f1">Resource</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_a03af35c-659d-4297-91c4-dc1e00910894">N/A</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_919b9587-4739-4c8e-b7f4-17df53bd96b2">Method</para>
              <itemizedlist>
                <listitem>
                  <para xml:id="para_9fea8b9c-a957-459c-b10a-56ed71829fdc">WebSocket Data Frame transmission</para>
                </listitem>
              </itemizedlist>
            </listitem>
            <listitem>
              <para xml:id="para_b2e87a2e-c924-4844-99c9-a9727e9789ef">The Event Report shall contain all mandatory attributes described indescribed in <olink targetdoc="PS3.4" targetptr="table_CC.2.4-1" xrefstyle="select: docname label"/> and <olink targetdoc="PS3.7" targetptr="table_10.3-1" xrefstyle="select: docname label"/> for the event type.</para>
            </listitem>
          </itemizedlist>
          <section label="6.9.11.1.1" status="5" xml:id="sect_6.9.11.1.1">
            <title>Request Message Body</title>
            <para xml:id="para_b5e9dfff-676f-450c-8061-f3ea46f76e1e">WebSocket Events are encoded as WebSocket data frames with an opcode of "%x1" (text).</para>
            <para xml:id="para_3d5dcc59-3124-4a96-acaf-fa1f259154eb">The frame payload data shall be a DICOM JSON dataset containing the attributes of the Event Report.</para>
            <note>
              <orderedlist>
                <listitem>
                  <para xml:id="para_188af6e7-dba8-428f-94da-a4cf04393a9b">Example WebSocket payload:</para>
                  <programlisting><![CDATA[{
"00000002": [ "1.2.840.10008.5.1.4.34.​6.​4" ],
"00000100": [ 256 ],
"00000110": [ 23 ],
"00001000": [ "1.2.840.10008.5.1.4.34.​6.​4.2.3.44.22231" ],
"00001001": [ 1 ],
"00741238": [ "SCHEDULED" ],
"00744041": [ "READY" ]
}
]]></programlisting>
                </listitem>
                <listitem>
                  <para xml:id="para_ed338e31-eaaf-43d8-b4c1-2f88b421af7e">The WebSocket protocol does not allow content negotiation so it is not possible to support both XML and JSON encoding of Event Report messages without extending the protocol.</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
        </section>
        <section label="6.9.11.2" status="4" xml:id="sect_6.9.11.2">
          <title>Behavior</title>
          <para xml:id="para_ead39951-b322-47c8-8924-bb6650fa438d">
<olink targetdoc="PS3.4" targetptr="sect_CC.2.4.3" xrefstyle="select: docname label"/> describes the scenarios in which an Origin-Server sends Event Reports to a subscriber and the content of the Event Report messages.</para>
        </section>
        <section label="6.9.11.3" status="4" xml:id="sect_6.9.11.3">
          <title>Response</title>
          <para xml:id="para_9778671d-e1f4-42e7-90aa-5e22159b0486">None.</para>
        </section>
      </section>
    </section>
  </chapter>
  <chapter label="7" status="1" xml:id="chapter_7">
    <title>Persistent Object Types</title>
    <para xml:id="para_6eda7c23-b8dc-4461-929f-23594f3cf800">The provisions for some specific object types shall be as defined in this section.</para>
    <note>
      <para xml:id="para_fe1cabb2-59e7-48d7-848d-ce7979179e1b">In all cases the categorization depends on the SOP Class of the objects, enabling a client, or application building an HTML page for the client, to determine in advance of the request what the requirements will be.</para>
    </note>
    <section label="7.1" status="2" xml:id="sect_7.1">
      <title>Single Frame Image Objects</title>
      <section label="7.1.1" status="3" xml:id="sect_7.1.1">
        <title>Objects Accessed</title>
        <para xml:id="para_f5c61392-2fc3-4d1a-a2d9-f84c802c032c">In this category are all object instances of SOP classes defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that consist of a single image frame, instances of multi-frame SOP Classes that contain only one frame, or object instances that consist of single frame accessed from instances of multi-frame SOP Classes using the "frameNumber" parameter.</para>
      </section>
      <section label="7.1.2" status="3" xml:id="sect_7.1.2">
        <title>MIME Type Constraints</title>
        <para xml:id="para_9418774b-5927-4ff9-8bb1-299c7e3500d1">The Server shall be able to send a response for each of the following MIME types:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_55cb8173-f8d6-4c01-ac25-6db7b356efbf">WADO-URI and WADO-WS</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_8577e188-f68c-4038-8512-a6c8e4821c60">application/dicom</para>
              </listitem>
              <listitem>
                <para xml:id="para_8a3ea504-ad06-43f1-9e0a-06485072bc6c">image/jpeg</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_76dd3b56-7d34-42a5-a793-1acb1e771ed1">WADO-RS</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_5db9f47f-5609-42e2-bdfb-2c86cc52bffa">application/dicom</para>
              </listitem>
              <listitem>
                <para xml:id="para_e2e54734-ae08-4eff-99ec-74b92c82a09f">application/octet-stream</para>
              </listitem>
              <listitem>
                <para xml:id="para_e356ca03-a264-417e-a59f-8f30ce5eeb52">application/dicom+xml</para>
              </listitem>
              <listitem>
                <para xml:id="para_1d4ba1e6-049c-4e73-b589-4727fb85b737">application/json</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </itemizedlist>
        <para xml:id="para_ca83169c-0ebc-43da-bf36-b180387b749e">If the contentType parameter is not present in the URI or WADO-WS request, the response shall contain an image/jpeg MIME type, if compatible with the 'Accept' field of the GET method. If the contentType parameter is not present in the WADO-RS request, the response is dependent on the 'Accept' field and the requested resource.</para>
        <para xml:id="para_f405ef73-731c-489e-88b6-fc30dae4b752">When an image/jpeg MIME type is returned, the image shall be encoded using the JPEG baseline lossy 8 bit Huffman encoded non-hierarchical non-sequential process ISO/IEC 10918.</para>
        <note>
          <para xml:id="para_164ba304-d241-4d61-9d22-d0b681d45e13">The choice of image/jpeg as the default for continuous tone images is a consequence of the universal support by Web Clients.</para>
        </note>
        <para xml:id="para_ed6a7e0f-fd03-4df6-ab3e-5afc11667687">The Server should also support the following MIME types for WADO-URI or WADO-WS:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_497192f5-1bd3-4f4f-aad5-84b409ea20c1">image/gif</para>
          </listitem>
          <listitem>
            <para xml:id="para_22edb418-ec66-462c-98a8-e1754bf1cc85">image/png</para>
          </listitem>
          <listitem>
            <para xml:id="para_2bcaae52-b1e0-4c8d-89b5-a88728938975">image/jp2</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_489c5ae1-b76d-40ff-a070-9ea3f919a872">The Server should also support the following MIME types for WADO-RS:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_432a4b39-d2c2-47a5-9ef3-64d3790e28bf">image/dicom</para>
          </listitem>
          <listitem>
            <para xml:id="para_8f223a0e-8a73-4cc5-9104-cd522e83b45c">image/dicom+jpeg</para>
          </listitem>
          <listitem>
            <para xml:id="para_c9e0ec96-7cbb-4bba-ada3-1322b8c98a14">image/dicom+rle</para>
          </listitem>
          <listitem>
            <para xml:id="para_6d11e21a-c2bd-44c3-9c98-d648683d104d">image/dicom+jpeg-ls</para>
          </listitem>
          <listitem>
            <para xml:id="para_8d261f2e-78cb-4c31-8807-d841163037bf">image/dicom+jp2image/dicom+jpx</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_43e47cad-3ad5-4d3c-b99c-af8612b09f75">The Server may also support other MIME types.</para>
      </section>
    </section>
    <section label="7.2" status="2" xml:id="sect_7.2">
      <title>Multi-frame and Video Image Objects</title>
      <section label="7.2.1" status="3" xml:id="sect_7.2.1">
        <title>Objects Included</title>
        <para xml:id="para_34f68339-87e6-4495-b7fe-1e87d1eeb163">In this category are all SOP classes defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that are multi-frame or video image objects.</para>
      </section>
      <section label="7.2.2" status="3" xml:id="sect_7.2.2">
        <title>MIME Type Constraints</title>
        <para xml:id="para_31b6fbe4-663d-4ff9-bbf1-8115f48b5cff">The Server shall be able to send a response for the following MIME types:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_51eeb7f7-ecc5-4bb7-8f50-601e528e6409">WADO-URI and WADO-WS</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_0429d6dc-cdbb-45b9-ba70-07cfcdd0e0d4">application/dicom</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_b3a6e42e-732e-49c5-930b-5eb2b3274964">WADO-RS</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_b8f538d5-51d9-4c2f-a569-17e1f186377c">application/dicom</para>
              </listitem>
              <listitem>
                <para xml:id="para_4d32a2cb-f504-42a6-a589-58d81bd8b981">application/octet-stream</para>
              </listitem>
              <listitem>
                <para xml:id="para_31abdf33-a990-415e-922a-b251455e0440">application/dicom+xml</para>
              </listitem>
              <listitem>
                <para xml:id="para_ea75b1e6-3aa5-4caf-9692-2ebb0dcf0bb2">application/json</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </itemizedlist>
        <para xml:id="para_9ba8d2d1-f15d-48d4-a704-c090ee27efdc">If the contentType parameter is not present in the WADO-URI or WADO-WS request, the response shall contain a application/dicom MIME type.</para>
        <para xml:id="para_9f42eed2-bfca-4eeb-a4eb-cb856750c9d7">The Server can optionally support the following MIME types for WADO-URI and WADO-WS:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_6e7cd674-37cd-47bb-b453-2a0f62ae3b9b">video/mpeg</para>
          </listitem>
          <listitem>
            <para xml:id="para_4b02a223-e15a-4856-91a7-fa689cbf95c9">image/gif</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_0d811687-3cb5-4eac-b8cb-7fe7e6392aa4">The Server can optionally support the following MIME types for WADO-RS:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_be438f1d-cb1b-48a2-b449-81d3d3c81352">image/dicom+jpx</para>
          </listitem>
          <listitem>
            <para xml:id="para_f968f5c2-2e3a-4c07-b533-1f8b7819d340">video/mpeg</para>
          </listitem>
          <listitem>
            <para xml:id="para_934a7236-3847-49ba-a233-051e5d35cc0a">video/mp4</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_4b8c6996-953a-4952-b2bc-08d0a81d5869">The Server may also support other MIME types.</para>
      </section>
    </section>
    <section label="7.3" status="2" xml:id="sect_7.3">
      <title>Text Objects</title>
      <section label="7.3.1" status="3" xml:id="sect_7.3.1">
        <title>Objects Included</title>
        <para xml:id="para_b2e9fe43-fb1a-436d-84bf-93b88310d8d6">In this category are all SOP classes defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that include the SR Document Content Module.</para>
        <note>
          <para xml:id="para_19a540aa-b909-4130-b312-554aeb7e4f04">This includes all SOP Classes that are SR documents, such as narrative text, structured reports, CAD, measurement reports and key object selection documents.</para>
        </note>
      </section>
      <section label="7.3.2" status="3" xml:id="sect_7.3.2">
        <title>MIME Type Constraints</title>
        <para xml:id="para_76fad706-2c17-4c32-a954-6ddeac687431">The Server shall be able to send a response in each of the following MIME types:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_4d6b66ef-8e73-4f99-849b-fcfc217e5df6">application/dicom</para>
          </listitem>
          <listitem>
            <para xml:id="para_8235a92f-40b4-433d-89d3-ed7bba2f9d27">text/plain</para>
          </listitem>
          <listitem>
            <para xml:id="para_64e0d69d-3c19-4adc-94ab-688fe0fa0c5e">text/html</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_0dd8e7cd-85a6-440b-9c3b-36a2eb573df3">If the contentType parameter is not present in the request, or contains only MIME types that the Server does not support, the response shall contain a text/html MIME type.</para>
        <para xml:id="para_a83ed901-b562-4034-8664-f1c96e9a0be5">It is recommended that the Server also support the following MIME types:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_c153a565-b460-4efb-99d7-52b4f384ac6e">text/xml</para>
          </listitem>
          <listitem>
            <para xml:id="para_41d9e3ee-8f6c-469e-91b9-a76dd4977a47">application/pdf</para>
          </listitem>
          <listitem>
            <para xml:id="para_00017dbb-add1-4a1d-9751-9ac600c77b05">text/rtf</para>
          </listitem>
          <listitem>
            <para xml:id="para_6a06d827-3a52-437d-bd59-0dec3bdc2f9a">a "CDA" MIME type, in conformance to HL7 CDA R2, e.g., text/xml</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_bb00dd40-1a75-4b46-8bad-9e97ecea40e7">The Server may also support other MIME types.</para>
      </section>
    </section>
    <section label="7.4" status="2" xml:id="sect_7.4">
      <title>Other Objects</title>
      <section label="7.4.1" status="3" xml:id="sect_7.4.1">
        <title>Objects Included</title>
        <para xml:id="para_a394b69f-6cc5-443d-863f-25fc9731abfa">The category shall include all objects of all SOP classes defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that are not included in the categories described in the sections above, and that are considered in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> as classes of persistent objects.</para>
      </section>
      <section label="7.4.2" status="3" xml:id="sect_7.4.2">
        <title>MIME Type Constraints</title>
        <para xml:id="para_1f609761-7fc0-4e68-8a97-10607f4cc1cd">The Server shall be able to send a response in the following MIME type:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_e2d4ef47-9362-4194-b126-f5b3193c9204">application/dicom</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_a1d75753-57d2-401c-9f00-0ce8d3f03dfd">The Server may also support other MIME types.</para>
        <para xml:id="para_38ed15ac-bf0a-47a2-b46a-e28caf6fdda3">If the contentType parameter is not present in the request, the response shall contain an application/dicom MIME type.</para>
      </section>
    </section>
  </chapter>
  <chapter label="8" status="1" xml:id="chapter_8">
    <title>Parameters of the Request</title>
    <section label="8.1" status="2" xml:id="sect_8.1">
      <title>Parameters Available for all DICOM Persistent Objects</title>
      <para xml:id="para_8df370c6-c0b2-429d-997d-c0798954b183">Parameters specified in this section are applicable to all supported DICOM SOP Classes.</para>
      <note>
        <para xml:id="para_27d348ab-3142-4e78-83b0-3967ace3c46d">To identify a DICOM Object, only one UID is required, because any UID is globally unique. However, the standard requires that the UID of the higher levels in the DICOM Information Model are specified (i.e., series and study), in order to support the use of DICOM devices that support only the baseline hierarchical (rather than extended relational) Query/Retrieve model, which requires the Study Instance UID and Series Instance UID to be defined when retrieving an SOP Instance, as defined in <olink targetdoc="PS3.4" targetptr="PS3.4" xrefstyle="select: labelnumber"/>.</para>
      </note>
      <section label="8.1.1" status="3" xml:id="sect_8.1.1">
        <title>Request Type</title>
        <para xml:id="para_0e691f75-87f2-456c-b3a3-7fd789b47751">Type of request performed. This parameter is REQUIRED for URI based mode.</para>
        <para xml:id="para_53ba257d-7874-4d6e-aef6-d92770a0c3b6">The parameter name shall be "requestType".</para>
        <para xml:id="para_6e86ff9f-181b-4863-a877-2277428c8723">The value shall be "WADO".</para>
        <note>
          <para xml:id="para_7bbd2c7e-cb8f-467d-8718-594860dfba6d">This parameter allows other types of requests to be introduced in the future, using a similar syntax.</para>
        </note>
      </section>
      <section label="8.1.2" status="3" xml:id="sect_8.1.2">
        <title>Unique Identifier of the Study</title>
        <para xml:id="para_af389ddb-946c-441c-bd7a-9f9f17115a76">Study Instance UID as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This parameter is REQUIRED.</para>
        <para xml:id="para_67b6e462-3e2e-422b-8ffe-05b4e62a77c2">The parameter name shall be "studyUID" for URI based mode, and "StudyRequest" that contains a required "studyInstanceUID" attribute for the WS mode.</para>
        <para xml:id="para_b8c02e2a-0bdd-4abc-84be-535f8f922224">The value shall be encoded as a Unique Identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
      </section>
      <section label="8.1.3" status="3" xml:id="sect_8.1.3">
        <title>Unique Identifier of the Series</title>
        <para xml:id="para_c68c43a0-54ee-4b1b-a6e5-77eab204841d">Series Instance UID as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This parameter is REQUIRED.</para>
        <para xml:id="para_eb51a620-33af-4d4c-876d-67479cd44bba">The parameter name shall be "seriesUID" for URI based mode, and, for the WS mode, one or multiple "SeriesRequest" that is included into the above described "StudyRequest" and that contains a required "seriesInstanceUID" attribute.</para>
        <para xml:id="para_08e84fff-c049-423e-a499-e10d632bb69e">The value shall be encoded as a Unique Identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
      </section>
      <section label="8.1.4" status="3" xml:id="sect_8.1.4">
        <title>Unique Identifier of the Object</title>
        <para xml:id="para_90344671-03d0-40ce-b2b6-cb2cc16cf074">SOP Instance UID as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This parameter is REQUIRED.</para>
        <para xml:id="para_70b309e4-b196-460c-9a81-1cd701d43720">The parameter name shall be "objectUID" for URI based mode, and for the WS mode one or multiple "DocumentRequest" that is included into the above described "SeriesRequest" and that include each one:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_9e707210-de0a-4ca5-a11c-439e68e15945">a required "DocumentUniqueId" that contains the Instance UID,</para>
          </listitem>
          <listitem>
            <para xml:id="para_0938b9bb-45a0-4044-b092-f376a731d2f1">an optional "RepositoryUniqueId" that contains the UID of the DICOM server, and</para>
          </listitem>
          <listitem>
            <para xml:id="para_65b451be-a329-4221-891f-6a1fc55a3477">an optional "HomeCommunityId" that contains the UID of the "clinical affinity domain".</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_567645bf-8290-4b9f-959f-d8c5d8d83397">The value shall be encoded as a unique identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
      </section>
      <section label="8.1.5" status="3" xml:id="sect_8.1.5">
        <title>MIME Type of the Response</title>
        <para xml:id="para_337205bf-9e1b-4b2b-8f5c-742dbbae696f">MIME type(s) desired by the Web Client for the response from the Server, as defined in the IETF RFC7230. This parameter is OPTIONAL for URI based mode, it shall be present for the WS mode "Rendered Requester" and shall not be present in the other WS mode transactions.</para>
        <para xml:id="para_6b0114df-cd03-473b-b7dd-e6e4af653acf">The parameter name shall be "contentType" for URI based mode, and, for the WS mode, "ContentTypeList" that contains one or multiple "ContentType".</para>
        <para xml:id="para_16e04835-37bc-4fd4-a9e7-ab947e94b915">In URI based mode, the value shall be a list of MIME types, separated by a "," character, and potentially associated with relative degree of preference, as specified in IETF RFC7230. In WS mode, it contains one or more "ContentType" elements containing each one MIME type.</para>
        <para xml:id="para_d7db3136-ba96-4eca-bb95-024e634589e4">In URI based mode, the Web Client shall provide list of content types it supports in the "Accept" field of the GET method. The value of the contentType parameter of the request shall be one of the values specified in that field.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_3bdec474-5cf1-4dc6-9903-020f406f9491">Typically the Accept field will be sent by a Web Client as "*/*", which is compatible with any MIME types.</para>
            </listitem>
            <listitem>
              <para xml:id="para_937a6428-5c5c-4d59-a512-756fbae16efa">When this parameter is absent, the default content type of the response is dictated by the "MIME type constraints" sub-sections of <xref linkend="chapter_7" xrefstyle="template:Section %n"/> (i.e., <xref linkend="sect_7.1.2" xrefstyle="select: labelnumber"/>, <xref linkend="sect_7.2.2" xrefstyle="select: labelnumber"/>, <xref linkend="sect_7.3.2" xrefstyle="select: labelnumber"/>, <xref linkend="sect_7.4.2" xrefstyle="select: labelnumber"/>).</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="8.1.6" status="3" xml:id="sect_8.1.6">
        <title>Charset of the Response</title>
        <para xml:id="para_113db5bc-3de5-4d84-88ab-8fef71711879">Character set with which the returned objects are to be encoded, as defined in the IETF RFC7230. This parameter is OPTIONAL for URI based mode, and for the WS mode "Rendered Requester" and shall not be present in the other WS mode transactions.</para>
        <para xml:id="para_8aeffc42-ab07-484b-85cd-f1363e896800">The parameter name shall be "charset" for URI based mode, and "CharsetList" containing one or more elements "Charset" for the WS mode.</para>
        <para xml:id="para_c14313c3-04ed-4de7-879c-8279e6192bbd">For the URI mode, the value shall be a list of character sets, separated by a "," character, and potentially associated with relative degree of preference, as specified in IETF RFC7230.</para>
        <para xml:id="para_2d0e569b-6fce-4bd1-a2f6-382e5dd62388">In URI based mode, the Web Client may provide a list of character sets it supports in the "Accept-charset" field of the GET method. If this field is present, the value of the charset parameter of the request shall be one of the values specified in it.</para>
        <para xml:id="para_4d14b09a-840b-4d2f-bf88-fd8329e05ddb">The Web Server may or may not support character set conversion. If character set conversion is supported:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_a4507026-d4b0-4757-bd27-b381e0b17279">text based DICOM objects retrieved other than as application/dicom MIME type (e.g., text/plain) may be returned in the requested character set (converted if necessary)</para>
          </listitem>
          <listitem>
            <para xml:id="para_168cd021-9c13-4f0a-8d1d-7428e371134d">DICOM objects retrieved as application/dicom MIME type have all contained strings returned in the requested character set (converted if necessary) and the Specific Character Set (0008,0005) updated (if necessary)</para>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_4d7feb95-76d9-4bbb-b16d-a9bde0c40af9">The IANA Character Set registrations specify names and multiple aliases for most character sets. The standard value for use in WADO is the one marked by IANA as "preferred for MIME." If IANA has not marked one of the aliases as "preferred for MIME", the name used in DICOM shall be the value used for WADO.</para>
            </listitem>
            <listitem>
              <para xml:id="para_4a2d8b7b-664e-4815-a290-0b72f0880f27">The table in Annex D provides an informative mapping of some IANA values to DICOM Specific Character Set Defined Terms.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="8.1.7" status="3" xml:id="sect_8.1.7">
        <title>Anonymize Object</title>
        <para xml:id="para_f493a9e9-de39-41a8-804a-358305812831">Removal of all patient identification information from within the DICOM objects, if not already done, as defined in <olink targetdoc="PS3.15" targetptr="PS3.15" xrefstyle="select: labelnumber"/>. This parameter is OPTIONAL. In the URI based mode, it shall only be present if contentType is application/dicom.</para>
        <para xml:id="para_eb6bbfc5-e4ce-4291-8852-e2a906527de9">This parameter is Optional</para>
        <para xml:id="para_3e387e8a-9010-494c-8b12-618dc4aa54c2">The parameter name shall be "anonymize" for URI based mode, and "Anonymize" for the WS mode.</para>
        <para xml:id="para_1c98aece-144f-47ce-914b-97e3b8cc2f6a">The value shall be "yes".</para>
        <para xml:id="para_23b90584-3fbb-421d-a294-a24cffdbc7b3">The Server may return an error if it either cannot or refuses to anonymize these objects.</para>
        <para xml:id="para_32d7a8bb-6777-4517-83fe-9c8a77a89788">In WS mode, the metadata describing the objects or information extracted from them in the response shall be anonymized if requested.</para>
        <para xml:id="para_32a73486-ee76-41d1-8213-6d2de6bc7eb5">The Server shall return a new SOP Instance UID if the content of the object has not already been anonymized.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_32f8be6a-8cb6-45e4-91eb-2d803c96c44d">This standard does not introduce any security-related requirements. It is likely that the information contained within DICOM objects identifies the patient. The protocol used (that is HTTP) can be replaced by HTTPs, which is its secure extension, to protect the information in transit. The underlying DICOM implementation decides whether or not to grant access to a particular DICOM object based on whatever security policy or mechanism it has in place. A server is unlikely to fulfill a request from an unknown user (e.g., accessed via the HTTP protocol) unless it is certain that the data requested has no patient identifying information within it and has been approved for public viewing.</para>
            </listitem>
            <listitem>
              <para xml:id="para_cbce1e8c-714a-4227-b5de-54b2c8961fbd">The Anonymize object enables, for example, teaching files systems or clinical trial applications to offer an access to original images stored in a PACS, without disclosing the patients identity, and requiring storage of a (de-identified) copy of the original image. Anonymization is the responsibility of the Server. In order to preserve patient confidentiality, the Server likely will refuse to deliver an anonymized SOP instance to an unknown or unauthorized person unless the Server is certain that the SOP instance holds no patient identifying information. This would include "blanking out" any annotation area(s) containing nominative information burned into the pixels or in the overlays.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="8.1.9" status="3" xml:id="sect_8.1.9">
        <title>Retrieve Partial Information From Objects</title>
        <para xml:id="para_e6e3f010-068f-456e-8b66-078ee90dc29d">Retrieval of additional information from the DICOM objects, using a filtering mechanism based on the XML mapping of DICOM IODs, as described in the Native DICOM Model defined in <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/>. This parameter is defined only for the WS mode "Information Requester" transaction.</para>
        <para xml:id="para_5e3a00cb-6f36-4c8f-98f2-7b9114687522">The parameter name shall be "XPath".</para>
      </section>
    </section>
    <section label="8.2" status="2" xml:id="sect_8.2">
      <title>Parameters for DICOM Image Persistent Objects</title>
      <para xml:id="para_1284251f-1ea1-4a76-a134-0084b17fe152">These parameters shall only be included when a request is made for a Single Frame Image Objects or Multi-Frame Image or video Objects as defined in <xref linkend="sect_7.2" xrefstyle="select: label"/>.</para>
    </section>
    <section label="8.2.1" status="2" xml:id="sect_8.2.1">
      <title>Annotation On The Object</title>
      <para xml:id="para_9b819725-5ae3-4935-93c3-065b77e9879e">Annotation of objects retrieved and displayed as an image. This parameter is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present if contentType is application/dicom, or is a non-image MIME type (e.g., text/*). When it is not present for image objects, no additional annotation may be burnt in.</para>
      <para xml:id="para_0fc13d03-d46e-454e-a539-e7acacd30a0e">When used in conjunction with a presentation state object, it shall be applied after the presentation on the images. When used in conjunction with the region parameter, it shall be applied after the selection of the region.</para>
      <para xml:id="para_570078bf-b1c6-4584-9ca6-b74cb1aa6ab6">The parameter name shall be "annotation" for URI based mode, and "Annotation" for the WS mode. Its value is a non-empty list of one or more of the following items, separated by a "," character:</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_df5d53d1-bacb-4dda-8c86-0e2a7960fd0a">"patient", for displaying patient information on the image (e.g., patient name, birth date,…)</para>
        </listitem>
        <listitem>
          <para xml:id="para_40a399bc-3bc5-4948-ac1a-f6bd858fddb7">"technique", for displaying technique information of the image (e.g., image number, study date, image position,…).</para>
        </listitem>
      </itemizedlist>
      <note>
        <para xml:id="para_07185ec9-5505-4534-aada-d26a5ea1300f">The exact nature and presentation of the annotation is determined by the Server. The annotation is burned into the returned image pixels.</para>
      </note>
      <section label="8.2.2" status="3" xml:id="sect_8.2.2">
        <title>Number of Pixel Rows</title>
        <para xml:id="para_d1f82ee7-1b01-4aa4-b2a4-0ead9957a749">The parameter name shall be "rows" for URI based mode, and "Rows" for the WS mode.</para>
        <para xml:id="para_fb468640-81d2-49bf-a6fc-a95aa738787e">The value shall be expressed as an integer, representing the image height to be returned. It is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present for other WS mode transactions. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_78378bac-398c-41b3-ae15-bd02d7949c9e">If both "rows" and "columns" are specified, then each shall be interpreted as a maximum, and a size will be chosen for the images within these constraints, maintaining the correct aspect ratio. If the number of rows is absent and the number of columns is present, the number of rows shall be chosen in order to maintain the correct aspect ratio. If both are absent, the images (or selected region) are sent in their original size (or the size of the presentation state applied on the images), resulting as one pixel of screen image for each value in the images data matrix.</para>
        <para xml:id="para_d247acc6-dd98-438f-9695-00c4408b8986">The value shall be encoded as an integer string (IS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="8.2.3" status="3" xml:id="sect_8.2.3">
        <title>Number of Pixel Columns</title>
        <para xml:id="para_3875d24c-12e7-401b-aab5-4d2a32af9262">The parameter name shall be "columns" for URI based mode, and "Columns" for the WS mode.</para>
        <para xml:id="para_13994225-54d3-485b-8fa9-4a75ed140149">The value shall be expressed as an integer, representing the image width to be returned. It is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_9509d2c5-0b34-4d2e-963b-1478e553f0de">If both "rows" and "columns" are specified, then each shall be interpreted as a maximum, and a size will be chosen for the images within these constraints, maintaining the correct aspect ratio. If the number of columns is absent and the number of rows is present, the number of columns shall be chosen in order to maintain the correct aspect ratio. If both are absent, the images (or selected region) is sent in its original size (or the size of the presentation state applied on the images), resulting as one pixel of screen for one pixel of the images.</para>
        <para xml:id="para_c887e59c-0de5-4ffe-bf53-38da61d6780a">The value shall be encoded as an integer string (IS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="8.2.4" status="3" xml:id="sect_8.2.4">
        <title>Region of the Image</title>
        <para xml:id="para_e39263c8-711d-4a21-b975-6b20898c317e">This parameter allows selection of a rectangular region of an image matrix to be retrieved. The purpose of this parameter is to allow a user to view a selected area of the image matrix, for example at higher magnification.</para>
        <para xml:id="para_5e380c02-194b-4df4-80b7-292f40661bac">The parameter is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present for other WS mode transactions.</para>
        <para xml:id="para_d3c27e38-9d56-488e-acc5-678337b49169">The parameter name shall be "region" for URI based mode, and "Region" for the WS mode.</para>
        <para xml:id="para_aa01888f-6629-445b-af22-e2e9d1fa9785">It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_318ca33f-221e-4393-9fa4-a91f3566e085">The value shall be expressed as a list of four positive decimal strings, separated by the ',' character, representing the region of the source images to be returned. These decimal values shall be values in a normalized coordinate system relative to the size of the original image matrix measured in rows and columns, with values ranging from 0.0 to 1.0, and representing in the following order:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_a3e0bd0d-3b11-4042-8daf-8d4331b846f8">the x position of the top left hand corner of the region to be retrieved, 0.0 corresponding to the first column of the image matrix. In the WS mode, this value is encoded into an XML element "XMin".</para>
          </listitem>
          <listitem>
            <para xml:id="para_a4c802bc-d49d-42f3-b66e-b3c15b6ff73b">the y position of the top left hand corner of the region to be retrieved, 0.0 corresponding to the top row of the image matrix. In the WS mode, this value is encoded into an XML element "YMin".</para>
          </listitem>
          <listitem>
            <para xml:id="para_9c851b92-90ea-417d-90f5-a5fe4d0d779f">the x position of the bottom right hand extent of the region, 1.0 corresponding to the last column of the image matrix, 0.0 being forbidden. In the WS mode, this value is encoded into an XML element "XMax".</para>
          </listitem>
          <listitem>
            <para xml:id="para_e7f0508e-ecf1-461b-80d6-67521b250acb">the y position of the bottom right hand extent of the region, 1.0 corresponding to the last row of the image matrix, 0.0 being forbidden. In the WS mode, this value is encoded into an XML element "YMax".</para>
          </listitem>
        </itemizedlist>
        <note>
          <para xml:id="para_7dc8c74a-509f-4b7a-8d1d-eabc14d75291">The Server may or may not support this parameter.</para>
        </note>
        <para xml:id="para_a45202ab-1bca-4e21-8922-dd67565b72ee">If this parameter is supported, an image matrix corresponding to the specified region shall be returned with size corresponding to the specified normalized coordinate values otherwise the complete image matrix shall be returned. If the presentationUID parameter is present, the region shall be selected after the corresponding presentation state has been applied on the images.</para>
      </section>
      <section label="8.2.5" status="3" xml:id="sect_8.2.5">
        <title>Window Center of the Image</title>
        <para xml:id="para_4bf05859-38a1-490f-ab39-2b87e88c181b">The parameter name shall be "windowCenter" for URI based mode, and "WindowCenter" for the WS mode.</para>
        <para xml:id="para_1a24f271-cfd7-4b94-a6fb-cbfe5e9a65c9">Controls the luminosity of the images as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This parameter is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present for other WS mode transactions. This parameter is REQUIRED if "windowWidth" or "WindowWidth" is present. This parameter shall not be present if there is a presentationUID parameter. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_24b244b6-7738-42c3-96ac-71da9de6edc4">The value shall be encoded as a decimal string (DS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="8.2.6" status="3" xml:id="sect_8.2.6">
        <title>Window Width of the Image</title>
        <para xml:id="para_b6c50b58-2252-4be9-a020-6e9930262b36">The parameter name shall be "windowWidth" for URI based mode, and "WindowWidth" for the WS mode.</para>
        <para xml:id="para_7cd9a6fa-8ca1-4243-b199-3db7672ca685">Controls the contrast of the images as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/>. This parameter is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present for other WS mode transactions. It is REQUIRED if "windowCenter" or "WindowCenter" is present. This parameter shall not be present if there is a presentationUID parameter. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_e703e8a2-2b42-44ab-a640-e5c1289a4860">The value shall be encoded as a decimal string (DS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="8.2.7" status="3" xml:id="sect_8.2.7">
        <title>Frame Number</title>
        <para xml:id="para_c9cf1d91-6844-4665-8d6c-4258f474cc9a">The parameter name shall be "frameNumber" for URI based mode, and "FrameNumber" for the WS mode.</para>
        <para xml:id="para_2db49801-88ac-494d-819a-5474d30b48ea">Specifies that the single frame with that number within a multi-frame image object, as defined in <olink targetdoc="PS3.3" targetptr="PS3.3" xrefstyle="select: labelnumber"/> that shall be returned. It is OPTIONAL and shall be ignored in the case of all objects other than multi-frame objects. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_cbf29bdf-6dfa-43d8-9a6e-edd038747b71">The value shall be encoded as an integer string (IS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
      </section>
      <section label="8.2.8" status="3" xml:id="sect_8.2.8">
        <title>Image Quality</title>
        <para xml:id="para_9a590eee-f935-4919-b523-57c1baafce74">The parameter name shall be "imageQuality" for URI based mode, and "ImageQuality" for the WS mode. It is OPTIONAL for the URI based mode and the WS mode "DICOM requester" and "Rendered Requester" transactions. It shall not be present if contentType is application/dicom, except if the transferSyntax parameter is present and corresponds to a lossy compression.</para>
        <para xml:id="para_23383168-b0a3-4111-87a8-08cb528d33ee">If the requested MIME type is for a lossy compressed image (e.g., image/jpeg), this parameter indicates the required quality of the image to be returned within the range 1 to 100, 100 being the best quality.</para>
        <note>
          <para xml:id="para_7258b1ba-7828-4404-88d6-f89edf0813ec">Decompression and re-compression may degrade the image quality if the original image was already irreversibly compressed. In case the image has been already lossy compressed using the same format as required (e.g., jpeg), it may be sent as it is without decompressing and re-compressing it.</para>
        </note>
        <para xml:id="para_924e0d68-8483-4ed2-8c09-d312cd5c047c">The value shall be encoded as an integer string (IS), as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>.</para>
        <note>
          <para xml:id="para_97f47b85-69dc-4124-863e-eb5b9a80bb4d">The specific interpretation of the meaning of this parameter is left to the interpretation of the implementers of the standard.</para>
        </note>
      </section>
      <section label="8.2.9" status="3" xml:id="sect_8.2.9">
        <title>Unique Identifier of the Presentation Object</title>
        <para xml:id="para_f8a0e012-250c-42ed-8724-289df3e36dbc">The parameter name shall be "presentationUID" for URI based mode, and "PresentationUID" for the WS mode.</para>
        <para xml:id="para_0c751f0b-566c-4194-8ef0-7e2153371e56">SOP Instance UID of the presentation state storage object to be applied to the images. This parameter is OPTIONAL for the URI based mode and the WS mode "Rendered Requester" transaction. It shall not be present if contentType is application/dicom.</para>
        <para xml:id="para_aa74071a-292f-4f6d-89b2-c16d99ba245e">The value shall be encoded as a unique identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
        <para xml:id="para_fd482570-eff0-4700-8221-8fd2135d8f72">If this parameter is combined with region and/or annotation parameter(s), the presentation state shall be applied to the images prior to selecting a region and burning in annotations.</para>
        <para xml:id="para_f3ae2ccb-168e-42f4-8373-8acfb26b0a05">If the Presentation Size Mode in the presentation state is SCALE TO FIT or TRUE SIZE, then the displayed area specified in the presentation shall be scaled to fit the size specified by the rows and columns parameters if present, otherwise the displayed area selected in the presentation state will be returned without scaling.</para>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_b66e6f99-de5d-461c-89da-41f38c8fc92f">The intent of the TRUE SIZE mode in the presentation state cannot be satisfied, since the physical size of the pixels displayed by the web browser is unlikely to be known. If the Presentation Size Mode in the presentation state is MAGNIFY, then the displayed area specified in the presentation shall be magnified (scaled) as specified in the presentation state. It will then be cropped to fit the size specified by the rows and columns parameters, if present.</para>
            </listitem>
            <listitem>
              <para xml:id="para_c5340894-21ce-4c61-92b5-7c87aa976835">Any Displayed Area relative annotations specified in the presentation state are rendered relative to the Specified Displayed Area within the presentation state, not the size of the returned image.</para>
            </listitem>
          </orderedlist>
        </note>
        <para xml:id="para_f16e23d0-21b9-4b2f-9e01-dad06c379a00">Though the output of the presentation state is defined in DICOM to be in P-Values (grayscale values intended for display on a device calibrated to the DICOM Grayscale Standard Display Function <olink targetdoc="PS3.14" targetptr="PS3.14" xrefstyle="select: labelnumber"/>), the grayscale or color space for the images returned by the request is not defined by this standard.</para>
      </section>
      <section label="8.2.10" status="3" xml:id="sect_8.2.10">
        <title>Unique Identifier of the Series Containing The Presentation Object</title>
        <para xml:id="para_85a5e0a2-a1f8-4194-8682-a83bac9b8cbc">The parameter name shall be "presentationSeriesUID" for URI based mode, and "PresentationSeriesUID" for the WS mode.</para>
        <para xml:id="para_6a899612-c7a8-4122-ae83-9a60535e1705">Series Instance UID of the series containing the presentation state storage object to be applied on the images. This parameter is REQUIRED and shall only be present if "presentationUID" is present.</para>
        <para xml:id="para_02797e83-08fe-46a5-84c5-6239efb9508f">The value shall be encoded as a unique identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
        <note>
          <para xml:id="para_ff29bf93-9f06-4e3b-a52f-a90f9742426d">As specified in DICOM, the Presentation State will be in the same study as the images it applies to.</para>
        </note>
      </section>
      <section label="8.2.11" status="3" xml:id="sect_8.2.11">
        <title>Transfer Syntax UID</title>
        <para xml:id="para_c05d7b95-816a-4bc7-98f1-4952c2846d1e">The parameter name shall be "transferSyntax" for URI based mode, and "TransferSyntaxUIDList" containing one or more "TransferSyntaxUID" elements for the WS mode.</para>
        <para xml:id="para_f20d4718-961f-42be-b754-763769671c3f">The Transfer Syntax to be used within the DICOM image objects, as specified in <olink targetdoc="PS3.6" targetptr="PS3.6" xrefstyle="select: labelnumber"/>. This parameter is OPTIONAL for the URI based mode and the WS mode "DICOM Requester" transaction. It shall not be present if contentType is other than application/dicom.</para>
        <para xml:id="para_166baa7e-7574-4ed0-b03c-d8467a6ca3ef">By default the DICOM object(s) returned shall be encoded in Explicit VR Little Endian. Neither Implicit VR, nor Big Endian shall be used. The response shall be the Transfer Syntax requested if possible. If it is not possible for the response to be sent using the requested transfer syntax then the Explicit VR Little Endian Uncompressed Transfer Syntax shall be used.</para>
        <note>
          <para xml:id="para_bc85b4f8-b00b-49db-adb0-f053b8cabf7e">The transfer syntax can be chosen as one of the values of TransferSyntaxUID corresponding to JPIP, in case of which the returned objects will contain the URL of the JPIP session to launch for retrieving the corresponding image.</para>
        </note>
        <para xml:id="para_ed4c8ef6-a829-448e-90a8-0ea2d103f968">The value shall be encoded as an unique identifier (UID) string, as specified in <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/>, except that it shall not be padded to an even length with a NULL character.</para>
      </section>
    </section>
  </chapter>
  <chapter label="A" status="1" xml:id="chapter_A">
    <title>URI Query Component Syntax (Normative)</title>
    <para xml:id="para_dc7ee8cb-88b9-4f86-8c4a-dec8f3dd6632">This Standard uses the URI syntax as defined in IETF RFC 3986 <emphasis role="italic">Uniform Resource Identifier (URI): Generic Syntax</emphasis> and
      extends it by specifying the syntax of the query component of DICOM URIs.
      The grammar for the query component is defined using IETF RFC 5234 <emphasis role="italic">Augmented BNF for Syntax Specifications: ABNF</emphasis>.</para>
    <para xml:id="para_446689b6-d5f4-4fb5-9543-fd71cf2d0a75">DICOM URIs may use the query component of the URI to specify request parameters.
      The following grammar defines the general syntax of parameters contained in the query component of the URI.
      Specific HTTP transactions defined elsewhere in this standard may further refine the legal &lt;name&gt; and/or &lt;value&gt; rules.</para>
    <programlisting><![CDATA[    query-component = parameter [ *("&" parameter) ]
    parameter       = name "="" value
    name            = *qchar
    value           = *qchar
    qchar           = unreserved / pct-encoded / qspecial
    qspecial        = "/" / "?" / ":" / "@" / "!" / "$" / "'" 
                    / "(" / ")" / "*" / "+" / "," / ";"
]]></programlisting>
    <para xml:id="para_fb84803a-1f78-4991-acd3-213f49007876">The following rules are defined in IETF RFC3986 (Normative). They are reproduced here for convenience.</para>
    <programlisting><![CDATA[    unreserved     = ALPHA / DIGIT / "-" / "." / "_" / "~"
    pct-encoded    = "%" HEXDIG HEXDIG
]]></programlisting>
    <note>
      <orderedlist numeration="arabic">
        <listitem>
<para xml:id="para_735f20fa-b7b0-422e-9e4a-4cf91b49de34">This grammar allows the query component to contain any of the legal characters as defined by RFC 3986.</para>
</listitem>
        <listitem>
<para xml:id="para_4068d780-da44-4a62-ac26-64e63f468c99">No whitespace is permitted in URIs. Whitespace around line breaks and the line breaks themselves should be stripped before parsing the URI (See RFC 3986 Appendix C).</para>
</listitem>
        <listitem>
<para xml:id="para_9e607b88-7a83-4d15-84aa-3ab488aa840d">RFC 3986 does not permit an empty query component, i.e. if the "?" appears in the URI then there must be some legal query parameters in the URI.</para>
</listitem>
        <listitem>
<para xml:id="para_631da9ac-be97-4b2e-a0d2-d8bd21b8bbe6">The &lt;qchar&gt; rule defined above is the &lt;pchar&gt; rule of RFC 3986, which defines the legal character for the query component, minus the characters "="" and "&amp;".</para>
</listitem>
      </orderedlist>
    </note>
  </chapter>
  <chapter label="B" status="1" xml:id="chapter_B">
    <title>Examples (Informative)</title>
    <section label="B.1" status="2" xml:id="sect_B.1">
      <title>Retrieving a Simple DICOM Image in JPEG</title>
      <programlisting><![CDATA[http://www.hospital-stmarco/radiology/wado.php?requestType=WADO
  &studyUID=1.2.250.1.59.40211.12345678.678910
  &seriesUID=1.2.250.1.59.40211.789001276.14556172.67789
  &objectUID=1.2.250.1.59.40211.2678810.87991027.899772.2
]]></programlisting>
    </section>
    <section label="B.2" status="2" xml:id="sect_B.2">
      <title>Retrieving a DICOM SR in HTML</title>
      <programlisting><![CDATA[http://server234/script678.asp?requestType=WADO
  &studyUID=1.2.250.1.59.40211.12345678.678910
  &seriesUID=1.2.250.1.59.40211.789001276.14556172.67789
  &objectUID=1.2.250.1.59.40211.2678810.87991027.899772.2
  &charset=UTF-8
]]></programlisting>
    </section>
    <section label="B.3" status="2" xml:id="sect_B.3">
      <title>Retrieving a Region of A DICOM Image</title>
      <para xml:id="para_d6fe1e9e-0674-4f5a-8bae-406a0454092e">Retrieving a region of a DICOM image, converted if possible in JPEG2000, with annotations burned into the image containing the patient name and technical information, and mapped into a defined image size:</para>
      <programlisting><![CDATA[https://aspradio/imageaccess.js?requestType=WADO
  &studyUID=1.2.250.1.59.40211.12345678.678910
  &seriesUID=1.2.250.1.59.40211.789001276.14556172.67789
  &objectUID=1.2.250.1.59.40211.2678810.87991027.899772.2
  &contentType=image%2Fjp2;level=1,image%2Fjpeg;q=0.5
  &annotation=patient,technique
  &columns=400
  &rows=300
  &region=0.3,0.4,0.5,0.5
  &windowCenter=-1000
  &windowWidth=2500
]]></programlisting>
    </section>
    <section label="B.4" status="2" xml:id="sect_B.4">
      <title>Retrieving As A DICOM MIME Type</title>
      <para xml:id="para_e0048ced-bdc9-4efb-a04b-581c715b0819">Retrieving a DICOM image object using the baseline 8-bit lossy JPEG transfer syntax, and de-identified:</para>
      <programlisting><![CDATA[http://www.medical-webservice.st/RetrieveDocument?requestType=WADO
  &studyUID=1.2.250.1.59.40211.12345678.678910
  &seriesUID=1.2.250.1.59.40211.789001276.14556172.67789
  &objectUID=1.2.250.1.59.40211.2678810.87991027.899772.2
  &contentType=application%2Fdicom
  &anonymize=yes
  &transferSyntax=1.2.840.10008.1.2.4.50
]]></programlisting>
    </section>
  </chapter>
  <chapter label="C" status="1" xml:id="chapter_C">
    <title>Applications (Informative)</title>
    <para xml:id="para_b52fa18b-ea9e-4a5a-8807-022528ddcd3d">There are multiple applications, in which DICOM and "web-based" environments are interacting. "Web-based" means information and communication systems that are using Internet related technologies (Web, e-mail…). The basic feature supported by this standard is a mechanism for the "Web-based" system to retrieve a DICOM persistent object from the "DICOM-based" system.</para>
    <para xml:id="para_e9e71831-a112-4c37-97e2-99e80b091f07">Typical applications are:</para>
    <orderedlist numeration="lowerroman">
      <listitem>
        <para xml:id="para_91df2bdc-5e14-4ac9-8239-01236f1c3ffb">Referencing an image or a report from an electronic patient record (EPR)</para>
      </listitem>
      <listitem>
        <para xml:id="para_e76f1cc2-a6e2-4678-a2be-93bce61611c7">Including references to images in an e-mail</para>
      </listitem>
      <listitem>
        <para xml:id="para_6578465a-461a-42b3-a418-9218998cc897">Providing access by outside referring doctors to a hospital web server that contains references to reports, images and waveforms</para>
      </listitem>
      <listitem>
        <para xml:id="para_25a69d21-8e94-4c00-80d3-c12e57809dfc">Providing access to anonymized DICOM reports, images and waveforms via a web server, for teaching purposes and for clinical trials.</para>
      </listitem>
    </orderedlist>
    <para xml:id="para_b9c5fa82-5e81-4673-8d2c-a408afcc4251">To retrieve DICOM persistent objects using "WADO", the "web-based" system must "know" the UIDs (Study, Series, SOP Instance) of the objects it needs to retrieve. These may be obtained through different methods (reception of a standardized message containing a document containing the reference to the DICOM objects, query of other systems…) that are beyond the scope of this standard.</para>
  </chapter>
  <chapter label="D" status="1" xml:id="chapter_D">
    <title>IANA Mapping (Informative)</title>
    <para xml:id="para_e8ea10ce-e162-4e9c-b06e-f0ac8063c0c8">The following table provides an informative mapping of some IANA values to DICOM Specific Character Set Defined Terms:</para>
    <table frame="box" label="D-1" rules="all" xml:id="table_D-1">
      <caption>IANA Mapping</caption>
      <thead>
        <tr valign="top">
          <th align="center" colspan="1" rowspan="1">
            <para xml:id="para_05f701de-b061-413a-ac26-ceffc66db96d">IANA</para>
          </th>
          <th align="center" colspan="1" rowspan="1">
            <para xml:id="para_71a6d277-4bf3-4084-b06f-06a494cb72d7">DICOM</para>
          </th>
          <th align="center" colspan="1" rowspan="1">
            <para xml:id="para_e0735ba6-7cc3-48fb-b17f-b1d4f20540da">Character Set</para>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_bf1d3a30-4d2e-4a5d-ae87-6448e5c434e9">ISO-8859-1</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_07bc9cf4-1636-46dc-b336-71d56bf2fd2c">ISO_IR 100</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_a7004a19-0950-432f-ad49-8e8b61f1cedf">Latin alphabet #1</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_f4a9507d-1e57-4333-9ca7-a5ad90fdc1ac">ISO-8859-2</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_06d61ef3-d795-4445-a9c2-05dc421a2fa7">ISO_IR 101</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_20719826-15a9-43a5-b6ed-afd41d7dbba6">Latin alphabet #2</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_6e1071c7-f4e6-40e7-815e-c1523b8fb4b4">ISO-8859-3</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_896bcac7-0d40-4f6c-b6ef-60f101fee3c2">ISO_IR 109</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_fea2b578-320e-4210-aa69-1171eb541ed4">Latin alphabet #3</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_42d0c7df-a3dd-4e5c-b0a7-794507ce38bd">ISO-8859-4</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_301b4436-f40a-49e3-b4bc-400540123ed8">ISO_IR 110</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_b277ad13-c60d-481c-b140-50f3d31aad15">Latin alphabet #4</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_abfb22c4-c776-4799-ba2f-352c5a8a97c6">ISO-8859-5</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_d737c995-659a-4e77-a484-26de14f8a03b">ISO_IR 144</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_375daae8-3bac-4f85-906b-61b67388a1b7">Cyrillic</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_68eb57f8-ec6e-4cd1-8d47-612038952ad1">ISO-8859-6</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_42f5194d-3f12-41ac-a6ca-9c25309439a5">ISO_IR 127</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_0f4b1ef7-2c1f-42e4-81e7-4925316ef8ed">Arabic</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_dbabf59e-ae9b-4fdc-a4a5-a7d1bb0b14c7">ISO-8859-7</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_56b518b3-cdc8-424e-8a61-99c37f69354e">ISO_IR 126</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_39c38b85-1461-41d3-a729-5098bcac9ca3">Greek</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_d82a060b-ea20-4ca2-9511-6f9adcf0f12f">ISO-8859-8</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_706d3271-373e-4413-b705-1b4bc5802007">ISO_IR 138</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_65e881e8-505f-4301-bcc9-9c0872b68a32">Hebrew</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_c106ab43-93c6-4591-9d57-4827001c280a">ISO-8859-9</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_ac0055dd-8b2a-464b-b99d-b800598c30c6">ISO_IR 148</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_5afdc904-5f34-4f6a-8f46-3c10bcc36c4a">Latin alphabet #5</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_d9dbb3f5-0580-47a3-8af2-48296fbe4e7f">TIS-620</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_f10c7460-706d-4d41-b342-049e98e8126c">ISO_IR 166</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_877db7df-71db-4aa4-89ba-77eae6adcbbe">Thai</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_d0391c23-9b2f-4fae-be9c-4177b5253fa5">ISO-2022-JP</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_8574569a-5e7c-43ac-8dba-358056bfc73e">ISO 2022 IR 87</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_421fc25e-6030-4a50-af8b-03a3ea10627f">Japanese</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_07058e7a-8c68-4a3a-a430-469e9aacf956">ISO-2022-KR</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_72c779ed-746a-42f1-aaa0-34641b9bb1a3">ISO 2022 IR 149</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_3c9a0c53-9891-4ad9-a8e4-a2c5f302a998">Korean</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_c8638c71-8392-4dfd-9d0f-3156c0343f82">ISO-2022-CN</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_63c9e3db-4b27-4e3d-b982-0bd09995b605">ISO 2022 IR 58</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_98d574f5-d1f5-41f0-880f-3244e32f1e22">Chinese</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_e3704594-cc6d-47cf-a1ec-78ea4871647e">GB18030</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_881911dc-621d-422d-8a67-81d01c49d929">GB18030</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_e43c3910-f736-4fe3-bc69-5a9c46d7aaac">Chinese</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_5eeac5a8-725b-4b7a-9ba5-321b1315f78a">GBK</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_715db6e8-3216-4839-aa95-4f3b5dd87429">GBK</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_2d533e4f-365d-47a9-a77a-7297fda1d0c1">Chinese</para>
          </td>
        </tr>
        <tr valign="top">
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_0a6b578d-ba41-40ff-bee8-cacb8158bcb7">UTF-8</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_0dbf4aae-3f95-4182-87eb-c1261bd54d80">ISO_IR 192</para>
          </td>
          <td align="left" colspan="1" rowspan="1">
            <para xml:id="para_b17323d4-b112-40fb-9357-7a37afd7020d">Unicode</para>
          </td>
        </tr>
      </tbody>
    </table>
  </chapter>
  <chapter label="E" status="1" xml:id="chapter_E">
    <title>WADO WS Schemas and Examples</title>
    <section label="E.1" status="2" xml:id="sect_E.1">
      <title>WADO WS XSD Schema (Informative)</title>
      <para xml:id="para_7d6f8767-b36b-4c61-918b-4acee38c3c93">The following XSD schema can be used for the WADO WS implementation:</para>
      <programlisting><![CDATA[<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns="urn:ihe:rad:xdsi-b:2009"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="urn:ihe:rad:xdsi-b:2009" elementFormDefault="qualified"
attributeFormDefault="unqualified"
xmlns:tns="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0">
  <xs:import namespace="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" />
  <xs:import namespace="urn:ihe:iti:xds-b:2007" />
  <xs:simpleType name="LongName">
    <xs:restriction base="xs:string">
      <xs:maxLength value="256" />
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="RetrieveDocumentSetRequestType">
    <xs:sequence>
      <xs:element name="DocumentRequest" maxOccurs="unbounded">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="HomeCommunityId" type="LongName" minOccurs="0">
              <xs:annotation>
                <xs:documentation>This corresponds to the home attribute of the
                Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page
                20)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="RepositoryUniqueId" type="LongName"
            minOccurs="0">
              <xs:annotation>
                <xs:documentation>This is the
                XDSDocumentEntry.repositoryUniqueId attribute in the XDS
                metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="DocumentUniqueId" type="LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.uniqueId
                attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="RegistryErrorType">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="codeContext" type="xs:string" use="required" />
        <xs:attribute name="errorCode" type="xs:string" use="required" />
        <xs:attribute default="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error"
        name="severity" type="xs:anyURI" />
        <xs:attribute name="location" type="xs:string" use="optional" />
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="RegistryErrorListType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The RegistryErrorList is derived from the
      ErrorList element from the ebXML Message Service
      Specification</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="RegistryError"
      type="RegistryErrorType" />
    </xs:sequence>
    <xs:attribute name="highestSeverity" type="xs:anyURI" use="optional" />
  </xs:complexType>
  <xs:complexType name="RegistryResponseType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Base type for all ebXML Registry
      responses</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <!-- every response may be extended using Slots. -->
      <xs:element minOccurs="0" type="RegistryErrorListType"
      name="RegistryErrorList" />
    </xs:sequence>
    <xs:attribute name="status" type="xs:anyURI" use="required" />
    <!-- id is the request if for the request for which this is a response -->
    <xs:attribute name="requestId" type="xs:anyURI" use="optional" />
  </xs:complexType>
  <xs:element name="RetrieveDocumentSetRequest"
  type="RetrieveDocumentSetRequestType" />
  <xs:complexType name="RetrieveDocumentSetResponseType">
    <xs:sequence>
      <xs:element name="RegistryResponse" type="RegistryResponseType" />
      <xs:sequence minOccurs="0">
        <xs:element maxOccurs="unbounded" name="DocumentResponse">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="0" name="HomeCommunityId" type="LongName">
                <xs:annotation>
                  <xs:documentation>This corresponds to the home attribute of
                  the Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf,
                  page 20)</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="RepositoryUniqueId" type="LongName">
                <xs:annotation>
                  <xs:documentation>This is the
                  XDSDocumentEntry.repositoryUniqueId attribute in the XDS
                  metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element name="DocumentUniqueId" type="LongName">
                <xs:annotation>
                  <xs:documentation>This is the XDSDocumentEntry.uniqueId
                  attribute in the XDS metadata</xs:documentation>
                </xs:annotation>
              </xs:element>
              <xs:element minOccurs="0" name="Document"
              type="xs:base64Binary" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveDocumentSetResponse"
  type="RetrieveDocumentSetResponseType" />
  <xs:complexType name="RetrieveRenderedImagingDocumentSetRequestType">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="StudyRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="SeriesRequest">
              <xs:complexType>
                <xs:sequence>
                  <xs:element maxOccurs="unbounded"
                  name="RenderedDocumentRequest">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="HomeCommunityId" type="LongName"
                        minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>This corresponds to the home
                            attribute of the Identifiable class in regrep RIM
                            (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="RepositoryUniqueId" type="LongName"
                        minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>This is the
                            XDSDocumentEntry.repositoryUniqueId attribute in
                            the XDS metadata</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="DocumentUniqueId" type="LongName">
                          <xs:annotation>
                            <xs:documentation>This is the
                            XDSDocumentEntry.uniqueId attribute in the XDS
                            metadata</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element minOccurs="0" name="Annotation"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="Rows"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="Columns"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="Region"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="WindowWidth"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="WindowCenter"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="ImageQuality"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="PresentationSeriesUID"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="Anonymize"
                        type="xs:string" />
                        <xs:element minOccurs="0" name="FrameNumber"
                        type="xs:string" />
                        <xs:element minOccurs="1" name="ContentTypeList"
                        type="xs:string" maxOccurs="unbounded" />
                        <xs:element minOccurs="1" name="CharsetList"
                        type="xs:string" maxOccurs="unbounded" />
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveRenderedImagingDocumentSetRequest"
  type="RetrieveRenderedImagingDocumentSetRequestType" />
  <xs:complexType name="RetrieveRenderedImagingDocumentSetResponseType">
    <xs:sequence>
      <xs:element name="RegistryResponse" type="RegistryResponseType" />
      <xs:element maxOccurs="unbounded" name="RenderedDocumentSetResponse"
      minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="HomeCommunityId" type="LongName" minOccurs="0">
              <xs:annotation>
                <xs:documentation>This corresponds to the home attribute of the
                Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page
                20)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="RepositoryUniqueId" type="LongName"
            minOccurs="1">
              <xs:annotation>
                <xs:documentation>This is the
                XDSDocumentEntry.repositoryUniqueId attribute in the XDS
                metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="SourceDocumentUniqueId" type="LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.uniqueId
                attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element minOccurs="1" name="Annotation" type="xs:string" />
            <xs:element minOccurs="1" name="Rows" type="xs:string" />
            <xs:element minOccurs="1" name="Columns" type="xs:string" />
            <xs:element minOccurs="1" name="Region" type="xs:string" />
            <xs:element name="WindowWidth" type="xs:string" />
            <xs:element minOccurs="1" name="WindowCenter" type="xs:string" />
            <xs:element minOccurs="1" name="ImageQuality" type="xs:string" />
            <xs:element minOccurs="1" name="PresentationSeriesUID"
            type="xs:string" />
            <xs:element minOccurs="0" name="Anonymize" type="xs:string" />
            <xs:element minOccurs="0" name="FrameNumber" type="xs:string" />
            <xs:element minOccurs="1" name="mimeType" type="xs:string"
            maxOccurs="1" />
            <xs:element minOccurs="1" name="Document" type="xs:base64Binary" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveRenderedImagingDocumentSetResponse"
  type="RetrieveRenderedImagingDocumentSetResponseType" />
  <xs:complexType name="RetrieveImagingDocumentSetInformationRequestType">
    <xs:sequence>
      <xs:element maxOccurs="unbounded" name="StudyRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" name="SeriesRequest">
              <xs:complexType>
                <xs:sequence>
                  <xs:element maxOccurs="unbounded"
                  name="DocumentInformationRequest">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="HomeCommunityId" type="LongName"
                        minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>This corresponds to the home
                            attribute of the Identifiable class in regrep RIM
                            (regrep-rim-3.0-os.pdf, page 20)</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="RepositoryUniqueId" type="LongName"
                        minOccurs="1">
                          <xs:annotation>
                            <xs:documentation>This is the
                            XDSDocumentEntry.repositoryUniqueId attribute in
                            the XDS metadata</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="DocumentUniqueId" type="LongName">
                          <xs:annotation>
                            <xs:documentation>This is the
                            XDSDocumentEntry.uniqueId attribute in the XDS
                            metadata</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element minOccurs="0" name="Anonymize"
                        type="xs:string" />
                        <xs:element minOccurs="1" name="XPath" type="xs:string"
                        maxOccurs="1" />
                      </xs:sequence>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveImagingDocumentSetInformationRequest"
  type="RetrieveImagingDocumentSetInformationRequestType" />
  <xs:complexType name="RetrieveImagingDocumentSetInformationResponseType">
    <xs:sequence>
      <xs:element name="RegistryResponse" type="RegistryResponseType" />
      <xs:element maxOccurs="unbounded" name="DocumentInformationResponse"
      minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="HomeCommunityId" type="LongName" minOccurs="0">
              <xs:annotation>
                <xs:documentation>This corresponds to the home attribute of the
                Identifiable class in regrep RIM (regrep-rim-3.0-os.pdf, page
                20)</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="RepositoryUniqueId" type="LongName"
            minOccurs="1">
              <xs:annotation>
                <xs:documentation>This is the
                XDSDocumentEntry.repositoryUniqueId attribute in the XDS
                metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="DocumentUniqueId" type="LongName">
              <xs:annotation>
                <xs:documentation>This is the XDSDocumentEntry.uniqueId
                attribute in the XDS metadata</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="FrameNumber" type="xs:string" />
            <xs:element minOccurs="1" name="XPathResponseList">
              <xs:complexType>
                <xs:sequence>
                  <xs:element maxOccurs="unbounded" name="XPathResponse"
                  type="xs:string" />
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="RetrieveImagingDocumentSetInformationResponse"
  type="RetrieveImagingDocumentSetInformationResponseType" />
</xs:schema>
]]></programlisting>
    </section>
    <section label="E.2" status="2" xml:id="sect_E.2">
      <title>WADO WS Request Example (Informative)</title>
      <programlisting><![CDATA[POST /tf6/services/xdsrepositoryb HTTP/1.1
Content-Type: multipart/related; boundary=MIMEBoundaryurn_uuid_DCD262C64C22DB97351256303951323;
   type="application/xop+xml"; start="<0.urn:uuid:DCD262C64C22DB97351256303951324@apache.org>";
   start-info="application/soap+xml";
   action="urn:dicom:ws:wado:2011:RetrieveRenderedImagingDocumentSet"
User-Agent: Axis2
Host: localhost:5000

--MIMEBoundaryurn_uuid_DCD262C64C22DB97351256303951323
Content-Type: application/xop+xml; charset=UTF-8; type="application/soap+xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:DCD262C64C22DB97351256303951324@apache.org>
<s:Envelope 
    xmlns:s="http://www.w3.org/2003/05/soap-envelope" 
    xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">
       urn:dicom:ws:wado:2011:RetrieveRenderedImagingDocumentSet</a:Action>
    <a:MessageID>urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02</a:MessageID>
    <a:ReplyTo s:mustUnderstand="1">
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <a:To >http://localhost:2647/XdsService/DocSource.svc</a:To>
  </s:Header>
  <s:Body>
    <RetrieveImagingDocumentSetRequest xmlns:iherad="urn:ihe:rad:xdsi-b:2009"
                                       xmlns:ihe="urn:ihe:iti:xds-b:2007">
      <StudyRequest studyInstanceUID="1.3.6.1.4...101">
          <SeriesRequest seriesInstanceUID="1.3.6.1.4...201">
              <ihe:DocumentRequest>
                  <ihe:RepositoryUniqueId>1.3.6.1.4...1000</ihe:RepositoryUniqueId>
                  <ihe:DocumentUniqueId>1.3.6.1.4...2300</ihe:DocumentUniqueId>
                  <Rows>300</Rows>
                  <Columns>300</Columns>
                  <ContentTypeList>
                    <ContentType>image/jpeg</ContentType>
                  </ContentTypeList>
              </ihe:DocumentRequest>
              <ihe:DocumentRequest>
  <ihe:RepositoryUniqueId>1.3.6.1.4...1000</ihe:RepositoryUniqueId>
                  <ihe:DocumentUniqueId>1.3.6.1.4...2301</ihe:DocumentUniqueId>
                  <Rows>300</Rows>
                  <Columns>300</Columns>
                  <ContentTypeList>
                    <ContentType>image/jpeg</ContentType>
                  </ContentTypeList>
              </ihe:DocumentRequest>
          </SeriesRequest>
      </StudyRequest>
    </RetrieveRenderedImagingDocumentSetRequest>
  </s:Body>
</s:Envelope> 

--MIMEBoundaryurn_uuid_DCD262C64C22DB97351256303951323—
]]></programlisting>
    </section>
    <section label="E.3" status="2" xml:id="sect_E.3">
      <title>WADO WS Response Example</title>
      <para xml:id="para_15741f3b-e22b-4d15-af77-6e02adb9fafe">Example of the response corresponding to the above request:</para>
      <programlisting><![CDATA[HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: multipart/related; boundary=MIMEBoundaryurn_uuid_F862C3E04D9E35266C1256303956115;
      type="application/xop+xml"; start="0.urn:uuid:F862C3E04D9E35266C1256303956116@apache.org";
      start-info="application/soap+xml"; action="urn:ihe:iti:2007:RetrieveDocumentSetResponse"
Date: Fri, 23 Oct 2009 13:19:11 GMT

--MIMEBoundaryurn_uuid_F862C3E04D9E35266C1256303956115
Content-Type: application/xop+xml; charset=UTF-8; type="application/soap+xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:F862C3E04D9E35266C1256303956116@apache.org>

<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"
            xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">
      urn:ihe:iti:2007:RetrieveRenderedImagingDocumentSetResponse</a:Action>
    <a:RelatesTo>urn:uuid:0fbfdced-6c01-4d09-a110-2201afedaa02</a:RelatesTo>
  </s:Header>
  <s:Body>
    <RetrieveDocumentSetResponse 
        xmlns="urn:ihe:iti:xds-b:2007" 
        xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" 
        xmlns:query="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" 
        xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" 
        xmlns:rs="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0">
      <rs:RegistryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success"/>
      <DocumentResponse>
        <ihe:RepositoryUniqueId>1.3.6.1.4...1000</ihe:RepositoryUniqueId>
        <SourceDocumentUniqueId>1.3.6.1.4...2300</SourceDocumentUniqueId>
        <Annotation>patient</Annotation>
        <Rows>300</Rows>
        <Columns>300</Columns>
         <Region>
          <Xmin>0.0</Xmin>
          <Ymin>0.0</Ymin>
          <Xmax>1.0</Xmax>
          <Ymax>1.0<Ymax>
        </Region>
        <WindowCenter>2000</WindowCenter>
        <WindowWidth>4096</WindowWidth>
        <ImageQuality>30</ImageQuality>
        <mimeType>image/jpeg</mimeType>
        <Document>
<xop:Include href="cid:1.urn:uuid:F862C3E04D9E35266C1256303956117@apache.org"
xmlns:xop="http://www.w3.org/2004/08/xop/include"/>
        </Document>
      </DocumentResponse>
      <DocumentResponse>
        <RepositoryUniqueId>1.3.6.1.4...1000</RepositoryUniqueId>
        <DocumentUniqueId>1.3.6.1.4...2301</DocumentUniqueId>
        <Annotation>patient</Annotation>
        <Rows>300</Rows>
        <Columns>250</Columns>
         <Region>
          <Xmin>0.0</Xmin>
          <Ymin>0.0</Ymin>
          <Xmax>1.0</Xmax>
          <Ymax>1.0<Ymax>
        </Region>
        <WindowCenter>2000</WindowCenter>
        <WindowWidth>4096</WindowWidth>
        <ImageQuality>30</ImageQuality>
        <mimeType>image/jpeg</mimeType>
        <Document>
<xop:Include href="cid:2.urn:uuid:F862C3E04D9E35266C1256303956117@apache.org"
xmlns:xop="http://www.w3.org/2004/08/xop/include"/>
        </Document>
      </DocumentResponse>
    </RetrieveDocumentSetResponse>
  </s:Body>
</s:Envelope> 
 

--MIMEBoundaryurn_uuid_F862C3E04D9E35266C1256303956115
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-ID: <1.urn:uuid:F862C3E04D9E35266C1256303956117@apache.org>

This is the binary JPEG payload for the first image.

--MIMEBoundaryurn_uuid_F862C3E04D9E35266C1256303956115
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-ID: <2.urn:uuid:F862C3E04D9E35266C1256303956117@apache.org>

This is the binary JPEG payload for the second image.

--MIMEBoundaryurn_uuid_F862C3E04D9E35266C1256303956115—
]]></programlisting>
    </section>
  </chapter>
  <chapter label="F" status="1" xml:id="chapter_F">
    <title>DICOM JSON Model</title>
    <section label="F.1" status="2" xml:id="sect_F.1">
      <title>Introduction to JavaScript Object Notation (JSON)</title>
      <para xml:id="para_0ae6e059-ed41-42bc-bbc6-ec6214fefa37">JSON is a text-based open standard, derived from JavaScript, for representing data structures and associated arrays. It is language-independent, and primarily used for serializing and transmitting lightweight structured data over a network connection. It is described in detail by the Internet Engineering Task Force (IETF) in RFC 4627, available at <link xl:href="http://www.ietf.org/rfc/rfc4627.txt"/>.</para>
      <para xml:id="para_838562fa-2db9-4202-b072-6accb6d91852">The DICOM JSON Model complements the XML-based Native DICOM Model, by providing a lightweight representation of data returned by DICOM web services. While this representation can be used to encode any type of DICOM Data Set it is expected to be used by client applications, especially mobile clients, such as described in the QIDO-RS use cases (see <olink targetdoc="PS3.17" targetptr="chapter_HHH" xrefstyle="template:Annex %n “%t” in PS3.17"/>).</para>
    </section>
    <section label="F.2" status="2" xml:id="sect_F.2">
      <title>DICOM JSON Model</title>
      <para xml:id="para_3b315642-71bb-4dbd-a444-62eedf72b4cb">The DICOM JSON Model follows the Native DICOM Model for XML very closely, so that systems can take advantage of both formats without much retooling. The Media Type for DICOM JSON is application/json. The default character repertoire shall be UTF-8 / ISO_IR 192.</para>
      <section label="F.2.1" status="3" xml:id="sect_F.2.1">
        <title>Multiple Results Structure</title>
        <para xml:id="para_f02e5138-5558-4a07-a2fe-67644ad16ce2">Multiple results returned in JSON are organized as a single top-level array of JSON objects. This differs from the Native DICOM Model, which returns multiple results as a multi-part collection of singular XML documents.</para>
        <section label="F.2.1.1" status="4" xml:id="sect_F.2.1.1">
          <title>Examples</title>
          <section label="F.2.1.1.1" status="5" xml:id="sect_F.2.1.1.1">
            <title>Native DICOM Model</title>
            <programlisting><![CDATA[<?xml version="1.0" encoding="UTF-8" xml:space="preserve" ?>
<NativeDicomModel>
  <DicomAttribute tag="0020000D" vr="UI" keyword="StudyInstanceUID">
    <Value number="1">1.2.392.200036.9116.2.2.2.1762893313.1029997326.945873</Value>
  </DicomAttribute>
</NativeDicomModel>
…
<?xml version="1.0" encoding="UTF-8" xml:space="preserve" ?>
<NativeDicomModel>
  <DicomAttribute tag="0020000D" vr="UI" keyword="StudyInstanceUID">
    <Value number="1">1.2.444.200036.9116.2.2.2.1762893313.1029997326.945876</Value>
  </DicomAttribute>
</NativeDicomModel>
]]></programlisting>
          </section>
          <section label="F.2.1.1.2" status="5" xml:id="sect_F.2.1.1.2">
            <title>DICOM JSON Model</title>
            <programlisting><![CDATA[[
  {
     "0020000D": {
      "vr": "UI",
      "Value": [ "1.2.392.200036.9116.2.2.2.1762893313.1029997326.945873" ]
    }
  }
  {
    "0020000D" : {
      "vr": "UI",
      "Value": [ "1.2.392.200036.9116.2.2.2.2162893313.1029997326.945876" ]
    }
  }
]
]]></programlisting>
          </section>
        </section>
      </section>
      <section label="F.2.2" status="3" xml:id="sect_F.2.2">
        <title>DICOM JSON Model Object Structure</title>
        <para xml:id="para_fdec5594-2b78-412e-9647-285212110ce3">The DICOM JSON Model object is a representation of a DICOM Data Set.</para>
        <para xml:id="para_81894cbe-9261-4a17-9c31-8da5c40314e9">The internal structure of the DICOM JSON Model object is a sequence of objects representing attributes within the DICOM Data Set.</para>
        <para xml:id="para_6563ec5e-25d3-4e09-962c-e8454ac6ba9b">Attribute objects within a DICOM JSON Model object must be ordered by their property name in ascending order.</para>
        <para xml:id="para_45314867-e497-437d-acf1-636865ba96f7">Group Length (gggg,0000) attributes shall not be included in a DICOM JSON Model object.</para>
        <para xml:id="para_2d4d28a7-b779-4b6b-9a60-8638295dd4fc">The name of each attribute object is:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_34e3d09b-ebef-485f-adb6-0739e2a58ac0">The eight character uppercase hexadecimal representation of a DICOM Tag</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_fe283707-346f-4738-8f28-8675768530ec">Each attribute object contains the following named child objects:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_8c61e20e-3cdd-4b38-b996-89c97592e585">vr: A string encoding the DICOM Value Representation. The mapping between DICOM Value Representations and JSON Value Representations is described in <xref linkend="sect_F.2.3" xrefstyle="select: label"/>.</para>
          </listitem>
          <listitem>
            <para xml:id="para_c862781a-7102-49a4-b827-e7f92d6adc7b">At most one of:</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_e053047a-bbc3-47f8-8ac1-ce4169fd76e5">Value: An array containing one of:</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_949c513c-d191-41f2-a2b4-6bf4c8baaddf">The Value Field elements of a DICOM attribute with a VR other than PN, SQ, OB, OD, OF, OW, or UN (described in <xref linkend="sect_F.2.4" xrefstyle="select: label"/>)</para>
                    <para xml:id="para_d93ae819-585f-4912-b04b-fa0d802b28f4">The encoding of empty Value Field elements is described in <xref linkend="sect_F.2.5" xrefstyle="select: label"/>
</para>
                  </listitem>
                  <listitem>
                    <para xml:id="para_50b7b81a-d115-4964-ac03-8dc33ba7f741">The Value Field elements of a DICOM attribute with a VR of PN. The non-empty name components of each element are encoded as a JSON strings with the following names:</para>
                    <itemizedlist>
                      <listitem>
                        <para xml:id="para_c6180b65-4eef-45a2-88b7-d4d14103435b">Alphabetic</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_b135bedf-043f-4093-a787-fd6278832d32">Ideographic</para>
                      </listitem>
                      <listitem>
                        <para xml:id="para_205f6c48-3a32-4129-8f50-d2adef35fb9d">Phonetic</para>
                      </listitem>
                    </itemizedlist>
                  </listitem>
                  <listitem>
                    <para xml:id="para_d7f0d6fc-9b7e-4d2a-858c-4e6ba04b6a09">JSON DICOM Model objects corresponding to the sequence items of an attribute with a VR of SQ</para>
                    <para xml:id="para_7f0523e5-dc87-4227-bfea-a3ba83c48b61">Empty sequence items are represented by empty objects</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_fc52cacc-bb58-4dd7-99c9-b739319c7f8b">BulkDataURI: A string encoding the WADO-RS URL of a bulk data item describing the Value Field of an enclosing Attribute with a VR of FL, FD, IS, LT, OB, OD, OF, OW, SL, SS, ST, UL, UN, US, or UT (described in <xref linkend="sect_F.2.6" xrefstyle="select: label"/>)</para>
              </listitem>
              <listitem>
                <para xml:id="para_e451c65f-31b9-4f15-bd19-04f483f5cd6e">InlineBinary: A base64 string encoding the Value Field of an enclosing Attribute with a VR of OB, OD, OF, OW, or UN (described in <xref linkend="sect_F.2.7" xrefstyle="select: label"/>)</para>
              </listitem>
            </itemizedlist>
          </listitem>
        </itemizedlist>
        <note>
          <orderedlist numeration="arabic">
            <listitem>
              <para xml:id="para_7fe0ade2-1fc2-4b98-946a-938a20b50b54">For Private Data Elements, the group and element numbers will follow the rules specified in <olink targetdoc="PS3.5" targetptr="sect_7.8.1" xrefstyle="select: docname label"/>
</para>
            </listitem>
            <listitem>
              <para xml:id="para_7d1d3ebe-aff7-4def-967d-2d55205833f6">The person name representation is more closely aligned with the DICOM Data Element representation than the DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML representation.</para>
            </listitem>
          </orderedlist>
        </note>
      </section>
      <section label="F.2.3" status="3" xml:id="sect_F.2.3">
        <title>DICOM JSON Value Representation</title>
        <para xml:id="para_57f37df1-2a7b-4b6b-b4e2-3b0af204bc0f">The value representation (VR) is included in each DICOM JSON Model attribute object and named "vr". For example:</para>
        <programlisting><![CDATA["vr": "CS"
]]></programlisting>
        <para xml:id="para_280f3113-55b6-4746-88b5-79df55e19345">All DICOM Value Representations are mapped to specified JSON Data Types (see <xref linkend="table_F.2.3-1" xrefstyle="select: label"/>). The JSON encodings shall conform to the Definition, Character Repertoire (if applicable) and Length of Value specified for that Value Representation (see <olink targetdoc="PS3.5" targetptr="sect_6.2" xrefstyle="select: docname label quotedtitle"/>) with the following exceptions:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_89f5a907-97b1-439e-92ab-e866996c4526">Attributes with a Value Representation of AT shall be restricted to eight character uppercase hexadecimal representation of a DICOM Tag</para>
          </listitem>
        </itemizedlist>
        <table frame="box" label="F.2.3-1" rules="all" xml:id="table_F.2.3-1">
          <caption>DICOM VR to JSON Data Type Mapping</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_04e38a00-a8b9-47dd-977f-4dbfa5482d15">
                  <emphasis role="bold">VR Name</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_d492c756-c6f8-4272-ba28-5d9e3abdebaf">
                  <emphasis role="bold">Type</emphasis>
                </para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_0546044a-8a3e-41e7-8b0a-3f51c8d3d051">
                  <emphasis role="bold">JSON Data Type</emphasis>
                </para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_03164654-6774-499e-97bf-0be428764de2">AE</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_4efc8814-d0ec-4f1c-b3d0-807a70137bbe">Application Entity</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_44384aa8-5ee9-4013-801b-630cee9ccf07">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_f9e2361b-28a3-44a2-a3ad-ec357b7f3bd0">AS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_a1328f02-ea45-4921-9c56-602021d9955e">Age String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_683ec3d7-62bb-45b1-9de9-57940ac6dab5">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_236114c6-ea31-4b45-a753-75ac57b305a5">AT</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_ace88bfa-026b-4227-9d9a-4b328c956dcb">Attribute Tag</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_b6cd5f9d-ab96-4a2c-9635-50aa82c7556f">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_a53324a5-2021-4735-b4c2-eebfe620be0f">CS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_00b5dd1a-77e6-4e70-af27-a8ff7991df1c">Code String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f5986bce-357c-421c-8e65-ea17a13d145d">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_077488d1-ec4d-46e1-8503-a79133580a7b">DA</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3b0232e9-3a86-46fe-9e92-2427ad9002b5">Date</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_b673987d-a98b-4cd9-ac6a-c3ef52fe17d8">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_e4e8f917-e8ef-4e7d-b5b8-72f215f98179">DS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_088d3637-eaf9-4004-8ae2-ab1e598027c5">Decimal</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_fb941f0b-25b8-45c6-9542-85953c51a4d5">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_feb39331-5077-4be0-b935-f897dedc2484">DT</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_6412ff9e-2c48-4fe0-a63f-56df77659241">Date Time</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_02b94a76-ed88-400d-8b25-315450afdbd9">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_a10f7129-0bbd-47d1-a98f-fb52a26cf924">FL</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_31f8e462-dec0-4a62-9c3e-ad2685736431">Floating Point Single</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_8a0e4e02-fd6f-4762-8aa7-21aa96b06c18">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_abbcd7af-fa0d-4a5e-917e-94e475387c5e">FD</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_0bb232e9-149b-4020-a8f5-0773b4f236de">Floating Point Double</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_0df4d292-04b1-4742-a7c7-f656d0d9d777">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_902a6f62-8325-4b47-8fe9-03eb6e37c8c5">IS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_cd017b6d-d87e-4de5-8000-33d6a8bd4cef">Integer String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_dea6fd02-9c86-47ef-8048-a6373e438014">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_2db0e508-0f27-4118-8f7d-722e1ca5008a">LO</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_177698fd-5f26-47fc-b8d3-ade80d11ba51">Long String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_78de27f8-8e1b-4e02-add1-8118e1bc378f">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_296ac1d4-2c77-4661-ac9e-5dd49a7f09f5">LT</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_67fd9105-e872-498c-9ead-05272fbc8387">Long Text</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_3d3e208d-9b9e-4665-beac-4f0984aaee31">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_fbe6a5a0-87cd-4ff1-9475-f29c2da58899">OB</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_36cfbe4e-9e59-43c3-8784-51bdc37685ac">Other Byte String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_529e0293-ae59-437b-bf98-a653f0f30302">
<emphasis role="italic">Base64</emphasis> encoded
        <emphasis role="italic">string</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_a4428d86-ddde-4824-9831-a1d07155766e">OD</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_e1314f65-60a6-45f6-93bf-782f7212379b">Other Double String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_82f4ac33-56bc-4b10-aba5-55d9dc262d73">
<emphasis role="italic">Base64</emphasis> encoded
        <emphasis role="italic">string</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_cd2da0bf-417f-47de-ae18-2e822e018764">OF</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_75a9b9fb-af78-4ffe-a135-bdde8ac636b6">Other Float String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_8575a922-f9b1-433d-a051-2cc4ad2b2e8a">
<emphasis role="italic">Base64</emphasis> encoded
        <emphasis role="italic">string</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_a8138b96-5626-4949-8df1-497bc85a2492">OW</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_484da0e9-b501-4476-b01c-e2fc4726270d">Other Word String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_83b48553-9e93-40b9-8b45-82bcd9793ab7">
<emphasis role="italic">Base64</emphasis> encoded
        <emphasis role="italic">string</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_427b943f-c8f6-4383-b30a-279263e4ef05">PN</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d607f199-a398-4607-8ec9-356c8a633431">Person Name</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_016be3db-0159-4d9b-b0a6-c0bd49e39a6d">
<emphasis role="italic">Object</emphasis> containing Person Name component groups as
        <emphasis role="italic">strings (see <xref linkend="sect_F.2.2" xrefstyle="select: label"/>)</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_102b1cfd-7622-4073-9286-fd74c383d884">SH</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_66ea5f33-727d-43ff-b229-e838eee430be">Short String</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_f96dc693-1ec8-49eb-80da-382312af7e89">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_c65e120b-0c34-400e-a9fa-ca608812ccc3">SL</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_48e4228e-1925-4e53-8e2d-3a6661211d06">Signed Long</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_48d5413a-1e47-4d78-beb1-123282aaeb03">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_d66e52f7-b0e6-4795-8bb8-9e2ff14c4656">SQ</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1a44f726-93ea-4efe-97e2-1f28ba29ba30">Sequence</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_2421c77b-d766-4aa1-8c4e-744b17b77b71">
<emphasis role="italic">Array</emphasis> containing DICOM JSON Objects</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_7a2da8d1-6807-4b91-9b7c-9f7ef6cadc0c">SS</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_36046926-e472-4459-8d81-5f714b722363">Signed Short</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_561cd130-042b-400a-8d1c-896e49bfd3a1">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_450e553b-6e23-4c27-8157-f431da37668b">ST</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_26c32d2e-14e2-4553-8e70-498e839b7d46">Short Text</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_76c6f3d9-9e91-444d-9a1e-0c261f55887b">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_38065e95-7a34-4452-8b58-bd829f55141f">TM</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_6bb082b3-6e06-4cd1-8d8b-7901bbab7a7f">Time</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_569cd27a-2b4a-4a31-9afe-771e240ce456">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_4e71d26d-ceb2-4de1-ad97-6307431793a0">UC</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_8c20a6c3-dcd9-42dc-ac7c-5ac0841ee9fb">Unlimited Characters</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1f470fbc-cf0f-4f64-b0cd-3669df1e169f">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_5e6f7481-e453-4aba-be08-92721ca26077">UI</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1ca81993-d2b1-477d-90d0-fd3cbbb6bac5">UID</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_dd1a46ea-685a-46dd-8324-d1329e48fbbc">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_d33413cc-1a82-472f-9b57-ea09597ea70c">UL</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_5b386362-6ed7-482b-9668-9b8ba790a0fe">Unsigned Long</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_a8cfe5dd-9094-477b-a0ae-38fd74790552">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_7cb6787d-40c4-4cf9-8b65-55115a89a64b">UN</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_8037c191-754d-4d31-bfb8-a40e71b60206">Unknown</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_1b61eec1-3422-47ed-8920-eff19351971e">
<emphasis role="italic">Base64</emphasis> encoded
                  <emphasis role="italic">string</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_5b0d282b-0079-4fc9-aff5-20df2ddf63a4">UR</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_736f7647-c56d-4448-977f-570cf12093c4">URI</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_b8fb7540-b32a-4805-8e31-1dced66b7014">
<emphasis role="italic">String</emphasis>
</para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_9f679c93-7c9c-4e80-90e4-d6524f20da86">US</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_2c6b38f1-1cfb-41b7-bfbb-6717ce9e1d31">Unsigned Short</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_a71a3ab4-1052-4355-a2e3-e76ae04f0be9">
                  <emphasis role="italic">Number</emphasis>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="center" colspan="1" rowspan="1">
                <para xml:id="para_ecbaa3b5-a13f-43f7-8d7d-d3314a8bee75">UT</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_160f7488-f713-4e53-88a3-4293dc390b2d">Unlimited Text</para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_0e05f5fd-7267-4a3f-ac2f-1a0e146d492c">
                  <emphasis role="italic">String</emphasis>
                </para>
              </td>
            </tr>
          </tbody>
        </table>
        <para xml:id="para_2d250794-12f9-4f50-b89e-7b67d0209f89">Although data, such as dates, are represented in the DICOM JSON model as strings, it is expected that they will be treated in the same manner as the original attribute as defined by <olink targetdoc="PS3.6" targetptr="chapter_6" xrefstyle="select: docname label"/>.</para>
      </section>
      <section label="F.2.4" status="3" xml:id="sect_F.2.4">
        <title>DICOM JSON Value Multiplicity</title>
        <para xml:id="para_c47ea887-ead1-419f-83b6-760f93430979">The value or values of a given DICOM attribute are given in the "Value" array. The value multiplicity (VM) is not contained in the DICOM JSON object.</para>
        <para xml:id="para_5c046ad4-5757-42dd-8449-e73e3f5730e6">For example:</para>
        <programlisting><![CDATA["Value": [ "bar", "foo" ]
]]></programlisting>
        <para xml:id="para_5aab53eb-ba73-417b-9cc6-7f1147cadc9b">or:</para>
        <programlisting><![CDATA["Value": [ "bar" ]
]]></programlisting>
      </section>
      <section label="F.2.5" status="3" xml:id="sect_F.2.5">
        <title>DICOM JSON Model Null Values</title>
        <para xml:id="para_3d03f4fb-9faf-4f29-94bf-f84dc0be21b6">If an attribute is present in DICOM but empty (i.e., Value Length is 0), it shall be preserved in the DICOM JSON attribute object containing no "Value", "BulkDataURI" or "InlineBinary".</para>
        <para xml:id="para_490d29b9-a716-47b1-b247-ba879ac4b53f">If a multi-valued attribute has one or more empty values these are represented as "null" array elements. For example:</para>
        <programlisting><![CDATA["Value": [ "bar", null, "foo" ]
]]></programlisting>
        <para xml:id="para_9220e0dc-01ec-4cd7-af59-1f583c50dd6b">If a sequence contains empty items these are represented as empty JSON object in the array.</para>
        <programlisting><![CDATA["Value": [ { … }, { }, { … } ]
]]></programlisting>
      </section>
      <section label="F.2.6" status="3" xml:id="sect_F.2.6">
        <title>BulkDataURI</title>
        <para xml:id="para_fcdac348-a8f9-4493-aecd-849e00568f54">If an attribute contains a "BulkDataURI"
          <emphasis role="italic">,</emphasis> this contains the URI of a bulk data element as defined in <olink targetdoc="PS3.19" targetptr="table_A.1.5-2" xrefstyle="select: docname label"/>.</para>
      </section>
      <section label="F.2.7" status="3" xml:id="sect_F.2.7">
        <title>InlineBinary</title>
        <para xml:id="para_ba86960e-5916-4965-899e-ba6e8ecfedec">If an attribute contains an "InlineBinary", this contains the base64 encoding of the enclosing attribute's Value Field.</para>
        <para xml:id="para_a685ecc0-69b8-41e2-82a5-fe64732ddcc3">There is a single InlineBinary value representing the entire Value Field, and not one per Value in the case where the Value Multiplicity is greater than one. E.g., a LUT with 4096 16 bit entries that may be encoded in DICOM with a Value Representation of OW, with a VL of 8192 and a VM of 1, or a US VR with a VL of 8192 and a VM of 4096 would both be represented as a single InlineBinary string.</para>
        <para xml:id="para_5eb4748b-4c25-4429-ae4e-393319d0259e">All rules (e.g., byte ordering and swapping) in DICOM <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> apply.</para>
        <note>
          <para xml:id="para_cfa93931-1fd8-45cf-8f76-05ebf4be34ab">Implementers should in particular pay attention to the <olink targetdoc="PS3.5" targetptr="PS3.5" xrefstyle="select: labelnumber"/> rules regarding the value representations of OD, OF and OW.</para>
        </note>
      </section>
    </section>
    <section label="F.3" status="2" xml:id="sect_F.3">
      <title>Transformation with other DICOM Formats</title>
      <section label="F.3.1" status="3" xml:id="sect_F.3.1">
        <title>Native DICOM Model XML</title>
        <para xml:id="para_9d163adc-9f0e-4211-979b-735f9ddb16e5">The transformation between the Native DICOM Model XML and the DICOM JSON model cannot be done through the use of generic XML - JSON converters.</para>
        <para xml:id="para_40410d12-7b40-4e21-b2f0-6fa67470f62f">The mapping between the two formats is as follows (see also <xref linkend="table_F.3.1-1" xrefstyle="select: label"/>):</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_54e26682-bc7d-486c-8604-b1098604e466">The XML "NativeDicomModel" element maps to the DICOM JSON Model Object</para>
          </listitem>
          <listitem>
            <para xml:id="para_76654bb1-3d9e-44e1-8dcd-aecccedab17a">Each "DicomAttribute" element maps to an attribute object within the DICOM JSON model object</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_1e17ff64-c906-4529-9219-08478883d61c">The "tag" attribute maps to the JSON object name</para>
                <itemizedlist>
                  <listitem>
                    <para xml:id="para_a6dd9f6b-71ff-4f3d-ba1d-6da7b3c7d594">The Native DICOM Model XML allows for duplicate Tag values and the DICOM JSON model does not. To resolve this, private attribute Tag values must be remapped according to the conflict avoidance rules specified in <olink targetdoc="PS3.5" targetptr="sect_7.8.1" xrefstyle="select: docname label quotedtitle"/>.</para>
                  </listitem>
                </itemizedlist>
              </listitem>
              <listitem>
                <para xml:id="para_9ded16a4-e371-4cc4-a188-9f60f251d4bf">The "vr" attribute maps to the "vr" child string</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_6878a07c-3a94-49fd-8b82-71d5ffbb13a6">"Value" elements map to members of the "Value" child array</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_20058b7f-2ec2-4951-9894-9b9f7ced2d01">A "Value" element with the attribute "number=n" maps to "Value[n-1]"</para>
              </listitem>
              <listitem>
                <para xml:id="para_39ef9cbd-d394-4bb9-9d63-18778daf938a">Empty "Value" elements are represented by "null" entries in the "Value" array</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_421b68f8-015a-4c94-9ede-1d5aceb20017">"PersonName" elements map to objects within the "Value" array. For a "PersonName" element with the attribute "number=n":</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_97a463c8-8cc6-4d27-b946-65defcb611a1">The "Alphabetic" element maps to "Value[<emphasis role="bold">
<emphasis role="italic">n-1</emphasis>
</emphasis>].Alphabetic"</para>
              </listitem>
              <listitem>
                <para xml:id="para_1446128d-147e-4935-9473-a8719a69e743">The "Ideographic" element maps to "PersonName[<emphasis role="bold">
<emphasis role="italic">n</emphasis>
</emphasis>].Ideographic"</para>
              </listitem>
              <listitem>
                <para xml:id="para_150fd3e8-e2c5-4a5d-bdd0-dd6903ea41e8">The "Phonetic" element maps to "PersonName[<emphasis role="bold">
<emphasis role="italic">n</emphasis>
</emphasis>].Phonetic"</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_2feeca92-c3f8-4464-9907-3fe2eb469e69">"Item" elements map to members of the "Value" child array</para>
            <itemizedlist>
              <listitem>
                <para xml:id="para_245fbe88-c5e2-4583-beca-6e6543aaf25e">An "Item" element with the attribute "number=n" maps to "Value[n-1]"</para>
              </listitem>
              <listitem>
                <para xml:id="para_780120f4-ed7b-46e9-9dee-c2e0d6d16534">Empty "Item" elements are represented by empty JSON property entries in the "Value" array</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para xml:id="para_ffe9b4df-72e7-4810-9d8d-06e2fc735c64">The "uri" attribute of the "BulkData" element maps to the "BulkDataURI" string</para>
          </listitem>
          <listitem>
            <para xml:id="para_ce1b5afa-52ed-4cd0-8255-da858cbcb8c2">The "InlineBinary" element maps to the "InlineBinary" string</para>
          </listitem>
        </itemizedlist>
        <table frame="box" label="F.3.1-1" rules="all" xml:id="table_F.3.1-1">
          <caption>XML to JSON Mapping</caption>
          <thead>
            <tr valign="top">
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_dce3ee3b-b41a-47ef-b7d1-7bdd00e9e45b">DICOM <olink targetdoc="PS3.19" targetptr="PS3.19" xrefstyle="select: labelnumber"/> XML</para>
              </th>
              <th align="center" colspan="1" rowspan="1">
                <para xml:id="para_2d233e51-ec71-40fe-aa85-51b600a1f808">DICOM JSON Model</para>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_c09b9a77-ebc3-4bb7-8e89-ce6ef19eff10">
                  <computeroutput>&lt;NativeDicomModel&gt;</computeroutput>
                </para>
                <para xml:id="para_d8f635ea-9181-453f-9d88-184e6f0539cb">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_3520cebd-ae02-4619-be23-04baf2ce808e">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_066d6460-77f7-464f-aa24-fd220e7767bb">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_9c62c2c7-755d-4e36-a2d1-d0ffb5590c55">
                  <computeroutput>&lt;/NativeDicomModel&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_13377850-217c-4277-aef2-0b81c3965e46">
                  <computeroutput>{</computeroutput>
                </para>
                <para xml:id="para_0618e475-0ffa-4cf0-a5f4-3f9532c516ce">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_6faa7ea9-15b7-49c7-a066-09b7cbc47612">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_cfaa1dc4-24f3-49ec-a6a0-16edce035edd">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_3055b159-4baa-4332-a5a7-5e80f549559a">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_cd1a1b68-e6b5-48d4-ae65-f2d9806caec9">
                  <computeroutput>&lt;DicomAttribute</computeroutput>
                </para>
                <para xml:id="para_3748790c-55ef-4461-a473-210518704bf1">
                  <computeroutput>tag=</computeroutput>
                  <emphasis role="bold">
                    <computeroutput>ggggeeee</computeroutput>
                  </emphasis>
                </para>
                <para xml:id="para_05e6ad91-066d-40d8-a447-642b39eb01f3">
                  <computeroutput>vr=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>VR</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&gt;</computeroutput>
                </para>
                <para xml:id="para_b811e75a-e184-4b1c-a8e8-daf67c0abbad">
                  <computeroutput>&lt;Value number="1"&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&lt;/Value&gt;</computeroutput>
                </para>
                <para xml:id="para_929ee841-0cf0-4621-b9c3-44b05fd9723c">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_ee711f3a-11ed-48ae-929e-541ce31e412b">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_92036a43-c40d-476b-9516-825fe506f90e">
                  <computeroutput>"vr":</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>VR</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>,</computeroutput>
                </para>
                <para xml:id="para_e30e95f7-4f9f-40ee-b774-2f0a165cd8d8">
                  <computeroutput>"Value": [</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>]</computeroutput>
                </para>
                <para xml:id="para_ead18534-ddbc-420e-8219-1a3ed596cec0">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_dd7fae12-7853-43bc-8d58-5580d5ebbdad">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… &gt;</computeroutput>
                </para>
                <para xml:id="para_310a663e-b932-447a-b3da-6eaf23c7d0ec">
                  <computeroutput>&lt;Value number="1"&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value1</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&lt;/Value&gt;</computeroutput>
                </para>
                <para xml:id="para_3118c2da-aea7-4341-802f-7c38f1eff6b3">
                  <computeroutput>&lt;Value number="2"&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value2</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&lt;/Value&gt;</computeroutput>
                </para>
                <para xml:id="para_4f27e500-4ea8-45b2-91a4-cbc15efbccf5">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_ee841ca3-2aab-4574-b985-c05e22112ad1">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_909fb3b3-0e0b-4395-a33c-3d5cf5463a77">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_de207391-89e0-4068-8c43-d3a2f0495c47">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_a32ef198-a22a-42ca-b0e1-a32da04d61ab">
                  <computeroutput>"Value": [</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value1</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>,</computeroutput>
                </para>
                <para xml:id="para_248074f0-aedb-4fb9-84b9-7da74ed038b9">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Value2</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>, …</computeroutput>
                </para>
                <para xml:id="para_eba67d62-9ea5-49ab-ad99-52a7f3d8a578">
                  <computeroutput>]</computeroutput>
                </para>
                <para xml:id="para_2f3fb36a-30ea-4722-a93e-62ee4899d33b">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_ab098b65-7140-4bf3-803d-7e3ac6b59ed6">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… &gt;</computeroutput>
                </para>
                <para xml:id="para_05a26661-2716-4898-a721-a8ad37489121">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_afa505c7-1e22-44fb-9772-bfa692321b93">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_756a5163-8f81-4447-b420-309f9ad83233">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_17bd56dd-dbdb-4b0c-99bb-5d818ba4b341">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_2bc2aff2-7cf8-4577-8565-32a06d1200d8">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>vr="PN" … &gt;</computeroutput>
                </para>
                <para xml:id="para_90fe06b6-3f49-4f91-b340-8d2bee9c5dc3">
                  <computeroutput>&lt;PersonName number="1"&gt;</computeroutput>
                </para>
                <para xml:id="para_e7ff2313-522e-4c59-9e9b-a5583a631c79">
                  <computeroutput>&lt;Alphabetic&gt;</computeroutput>
                </para>
                <para xml:id="para_e2b9c308-aab1-4216-b2f3-f4d8cbe45f9d">
                  <computeroutput>&lt;FamilyName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB1</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_c120739e-c7ec-4f7e-ae9b-ed3f8c139eff">
                  <computeroutput>&lt;/FamilyName&gt;</computeroutput>
                </para>
                <para xml:id="para_8756138b-6cb9-4248-a16f-894e141e1f63">
                  <computeroutput>&lt;GivenName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB2</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_f0921237-051c-417f-8894-608ec1bfc7a2">
                  <computeroutput>&lt;/GivenName&gt;</computeroutput>
                </para>
                <para xml:id="para_1feef5cb-2a99-49ed-ac8a-4791e6969284">
                  <computeroutput>&lt;MiddleName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB3</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_3d53af42-13ff-484b-acd3-05c1b650c6ca">
                  <computeroutput>&lt;/MiddleName&gt;</computeroutput>
                </para>
                <para xml:id="para_a64e8653-917b-49e4-86c6-0f82f6b25fd3">
                  <computeroutput>&lt;NamePrefix&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB4</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_d8df9a33-c6c7-49c4-8a5b-b867a8698d6a">
                  <computeroutput>&lt;/NamePrefix&gt;</computeroutput>
                </para>
                <para xml:id="para_51fc7a81-ce13-46e9-8265-60c95f50412c">
                  <computeroutput>&lt;NameSuffix&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB5</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_98aeaff5-1418-4d9e-92b6-56b9ca27bfde">
                  <computeroutput>&lt;/NameSuffix&gt;</computeroutput>
                </para>
                <para xml:id="para_d92b9eff-1a0e-47d3-8d8b-5f269a6af70d">
                  <computeroutput>&lt;/Alphabetic&gt;</computeroutput>
                </para>
                <para xml:id="para_972ff0e0-c767-45a0-9d43-e78911766342">
                  <computeroutput>&lt;Ideographic&gt;</computeroutput>
                </para>
                <para xml:id="para_c32b4a99-b376-4178-bd12-21d819668193">
                  <computeroutput>&lt;FamilyName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ID1</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_7bc5417e-e2d6-4c3a-aefd-c5618a319edd">
                  <computeroutput>&lt;/FamilyName&gt;</computeroutput>
                </para>
                <para xml:id="para_368ebd68-b4b1-4ee9-8152-25d942589953">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_ca22fb60-c53a-4d2c-ad74-9915a9019180">
                  <computeroutput>&lt;/Ideographic&gt;</computeroutput>
                </para>
                <para xml:id="para_fba6a4f8-a1e8-42c4-a9a1-b88b0cbc0273">
                  <computeroutput>&lt;Phonetic&gt;</computeroutput>
                </para>
                <para xml:id="para_6b33f33e-3027-4dc8-b6cc-00650e27fd28">
                  <computeroutput>&lt;FamilyName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>PH1</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_7a73a8c4-a581-4304-964a-314c84e88ff6">
                  <computeroutput>&lt;/FamilyName&gt;</computeroutput>
                </para>
                <para xml:id="para_664ab11f-8f44-4325-84be-8720b0f9506d">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_161540dd-aae6-400b-bd98-a16828320446">
                  <computeroutput>&lt;/Phonetic&gt;</computeroutput>
                </para>
                <para xml:id="para_abee8118-bfa4-40fa-8f05-2363f510162f">
                  <computeroutput>&lt;/PersonName&gt;</computeroutput>
                </para>
                <para xml:id="para_c9c5a535-5dbf-400b-bbfc-696dbc4197ba">
                  <computeroutput>&lt;PersonName number="2"&gt;</computeroutput>
                </para>
                <para xml:id="para_dbe823bf-eb09-4fb5-b8d0-23c5f5ed7f8e">
                  <computeroutput>&lt;Alphabetic&gt;</computeroutput>
                </para>
                <para xml:id="para_d965e554-1f0f-474c-b75b-f820ecbe19aa">
                  <computeroutput>&lt;FamilyName&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB6</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_bc543874-7025-4510-ab18-79266909ca63">
                  <computeroutput>&lt;/FamilyName&gt;</computeroutput>
                </para>
                <para xml:id="para_b48f8ec3-7cc9-4b9b-8af3-7d2ae9ae494c">
                  <computeroutput>&lt;/Alphabetic&gt;</computeroutput>
                </para>
                <para xml:id="para_b6f501fd-566e-4359-9d22-2cae195d09fe">
                  <computeroutput>&lt;/PersonName&gt;</computeroutput>
                </para>
                <para xml:id="para_3721224d-2781-4b4a-8bf7-5bd21570af04">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_12d52cd3-63b9-4c72-9425-9f80efe3ca89">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_19b86ad2-1125-4853-adf4-ae1ff3fcdb66">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_ca69d7ba-28af-42d4-8705-a224c7346760">
                  <computeroutput>"vr": "PN",</computeroutput>
                </para>
                <para xml:id="para_9d3f0461-e2b5-4676-a31d-14bf539dd629">
                  <computeroutput>"Value": [</computeroutput>
                </para>
                <para xml:id="para_ce2fba65-7d0c-4a9b-bf1e-1902d2aa9c69">
                  <computeroutput>{</computeroutput>
                </para>
                <para xml:id="para_e1d2a94e-3786-4acd-b7ed-498a704af9ef">
                  <emphasis role="bold">
                    <computeroutput>"</computeroutput>
                  </emphasis>
                  <computeroutput>Alphabetic</computeroutput>
                  <emphasis role="bold">
                    <computeroutput>"</computeroutput>
                  </emphasis>
                  <computeroutput>:</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>"SB1^SB2^SB3^SB4^SB5",</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_cfc85da6-75c4-4831-9aa7-cfc6cd5fc4a1">
                  <computeroutput>"Ideographic":</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>"ID1^ID2^ID3^ID4^ID5"</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>,</computeroutput>
                </para>
                <para xml:id="para_0b748ece-331a-4f58-8f08-1531b4c6615c">
                  <computeroutput>"Phonetic":</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>"PH1^PH2^PH3^PH4^PH5"</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_f2373c87-f537-42cd-a518-d613d1380031">
                  <computeroutput>},</computeroutput>
                </para>
                <para xml:id="para_562452fc-7624-434c-9bbd-44a9f97c7a97">
                  <computeroutput>{</computeroutput>
                </para>
                <para xml:id="para_3d658212-b799-452f-bb1f-df23bd44cf49">
                  <computeroutput>"Alphabetic":</computeroutput>
                </para>
                <para xml:id="para_b9653638-7fef-403a-88e7-ad5f106bac4a">
                  <computeroutput>"</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>SB6</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>"</computeroutput>
                </para>
                <para xml:id="para_60a9e620-a7a2-4ee5-ba86-9a8f56212559">
                  <computeroutput>}</computeroutput>
                </para>
                <para xml:id="para_ae96f22b-ab6b-448c-982f-6b1f30c827ff">
                  <computeroutput>]</computeroutput>
                </para>
                <para xml:id="para_9511f9ce-0ed0-4342-a0b8-051ea283e2dd">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_9f691c94-713e-4985-904f-659f6165b5d1">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>vr="SQ" … &gt;</computeroutput>
                </para>
                <para xml:id="para_b09b0167-75c7-48b5-92d7-a28a61f5b7f2">
                  <computeroutput>&lt;Item number="1"&gt;</computeroutput>
                </para>
                <para xml:id="para_3aaed46b-da82-4a1d-bf3a-e65278adce11">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_025845ef-0243-40d2-bdad-458bd2ff9e34">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_d12753ab-dc25-438a-9fda-cf385995b1bd">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_8f0f3f38-1ab5-4b7f-8b25-fb8c29d97612">
                  <computeroutput>&lt;/Item&gt;</computeroutput>
                </para>
                <para xml:id="para_c8fc972d-c10b-46b8-9b54-45e851862935">
                  <computeroutput>&lt;Item number="2"&gt;</computeroutput>
                </para>
                <para xml:id="para_05c4fa47-955e-4d26-ba6f-7b22c8a6e8cd">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_600df7f3-c81d-455d-8c17-3cc241905274">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… /&gt;</computeroutput>
                </para>
                <para xml:id="para_8be05a25-9618-4beb-821d-14509abc7c26">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_db097264-643e-4520-a9e8-f44af311b28a">
                  <computeroutput>&lt;/Item&gt;</computeroutput>
                </para>
                <para xml:id="para_02069cca-649f-4d94-9e96-1b176ae9c9dc">
                  <computeroutput>&lt;Item number="3"&gt;</computeroutput>
                </para>
                <para xml:id="para_e921d70a-eecd-4fc6-8667-876f95ff9703">
                  <computeroutput>&lt;/Item&gt;</computeroutput>
                </para>
                <para xml:id="para_6f74abe4-e5cb-466b-b30d-b96840d62a02">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_306b4e2f-47a7-458e-b28b-f8cc88235281">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_fd37e68f-5d16-40b8-a810-3d0b36b9c640">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_5ea6360e-4dab-4e9b-8a3b-40c389e33d3a">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_e3e99caf-2a8a-465d-a62b-30d7bc0d0b00">
                  <computeroutput>"vr": "SQ",</computeroutput>
                </para>
                <para xml:id="para_41e88f9a-4a0f-402f-b6c5-fb41f6a86c7d">
                  <computeroutput>"Value":</computeroutput>
                </para>
                <para xml:id="para_bdcf0fca-844d-4adb-8397-5999abbab774">
                  <computeroutput>[</computeroutput>
                </para>
                <para xml:id="para_5ab5c02c-f3b8-43bb-9b5f-feb0cf5d1b65">
                  <computeroutput>{</computeroutput>
                </para>
                <para xml:id="para_4b673077-9fb9-4edd-9acb-52e6e1fad576">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_93b4f9e0-bec6-4be6-bc97-549921fdafdd">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_cbfc347c-60d4-44aa-a033-b53e830a6d3b">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_05170a48-d882-4b6e-b901-5448951ef7f8">
                  <computeroutput>}</computeroutput>
                </para>
                <para xml:id="para_96719fae-9888-4e66-8251-d5b112247aaa">
                  <computeroutput>{</computeroutput>
                </para>
                <para xml:id="para_b8cdac4c-930f-4dda-9670-9d37ba2db94d">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee01</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_81f9aaf4-0917-40a7-9de0-7074636853aa">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggee02</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: { … },</computeroutput>
                </para>
                <para xml:id="para_cfcf606f-806f-44f8-9865-4976d6124f09">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_cb1e7f06-ebd2-483f-b4b5-b7b32a08a6f3">
                  <computeroutput>}</computeroutput>
                </para>
                <para xml:id="para_3fa97159-f8bd-483f-8c02-66cebf51a38f">
                  <computeroutput>{ }</computeroutput>
                </para>
                <para xml:id="para_340bded5-30c8-412b-9fab-3185ce058f40">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_63f41bc5-e1b6-4289-81fc-90daae688c8f">
                  <computeroutput>]</computeroutput>
                </para>
                <para xml:id="para_0c551910-063f-481a-9abc-5389ae5fbbcf">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_c18f30d0-5947-47fd-9558-68bc4171e038">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… &gt;</computeroutput>
                </para>
                <para xml:id="para_61194216-f9b4-493d-b4d4-212a6894ff70">
                  <computeroutput>&lt;BulkData URI=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>BulkDataURI</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&gt;</computeroutput>
                </para>
                <para xml:id="para_ddffe775-e5d5-445e-8498-806a80420853">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_996ee1fa-79b9-4142-b449-ef629f13bc0e">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_a4f40746-48f9-4175-b756-c7d4b778e7ce">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_44547360-aa3a-42d6-b0fc-3323ad7655bf">
                  <computeroutput>"BulkDataURI":</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>BulkDataURI</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_a77385a1-5313-4148-b5f2-74732279a109">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_eaa6070e-1513-4b15-99bf-1409a4acbd40">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… &gt;</computeroutput>
                </para>
                <para xml:id="para_37faa196-7937-4c53-9b3e-14b6adb32981">
                  <computeroutput>&lt;InlineBinary&gt;</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Base64String</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>&lt;/InlineBinary&gt;</computeroutput>
                </para>
                <para xml:id="para_f03c9b5a-ffb8-42e6-999b-29fa03e6ab66">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_0ac02812-d4aa-4422-b595-d455e9763168">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggeeee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_b5617322-4df2-4e39-b307-9642784b2ffa">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_b135ec4b-9d51-4311-b881-ce4242e337bd">
                  <computeroutput>"InlineBinary": "</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>Base64String"</computeroutput>
                    </emphasis>
                  </emphasis>
                </para>
                <para xml:id="para_429b4862-bea6-40ca-9c33-7ee9dfbf67e6">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
            <tr valign="top">
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_d76759f7-0ffa-44b2-a891-9610ee32ee51">
                  <computeroutput>&lt;DicomAttribute tag=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>gggg00ee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>PrivateCreator=</computeroutput>
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>PrivateCreator</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>… &gt;</computeroutput>
                </para>
                <para xml:id="para_befb10d8-7350-4291-8777-c00f752b2859">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_09359532-8798-473f-925c-573e6bc8694e">
                  <computeroutput>&lt;/DicomAttribute&gt;</computeroutput>
                </para>
              </td>
              <td align="left" colspan="1" rowspan="1">
                <para xml:id="para_09c39441-cb33-408f-8627-6e157c17600d">
                  <emphasis role="bold">
                    <emphasis role="italic">
                      <computeroutput>ggggXXee</computeroutput>
                    </emphasis>
                  </emphasis>
                  <computeroutput>: {</computeroutput>
                </para>
                <para xml:id="para_a5b42fb5-417a-4654-b636-2405e7d23603">
                  <computeroutput>…</computeroutput>
                </para>
                <para xml:id="para_70e968f0-3bfa-41c8-a54c-b5f647d4f01b">
                  <computeroutput>}</computeroutput>
                </para>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section label="F.4" status="2" xml:id="sect_F.4">
      <title>DICOM JSON Model Example</title>
      <programlisting><![CDATA[// The following example is a QIDO-RS SearchForStudies response consisting 
// of two matching studies, corresponding to the example QIDO-RS request:
// GET http://qido.nema.org/studies?PatientID=12345&includefield=all&limit=2
[
    {   // Result 1
        "00080005": {
            "vr": "CS",
            "Value": [ "ISO_IR192" ]
        },
        "00080020": {
            "vr": "DT",
            "Value": [ "20130409" ]
        },
        "00080030": {
            "vr": "TM",
            "Value": [ "131600.0000" ]
        },
        "00080050": {
            "vr": "SH",
            "Value": [ "11235813" ]
        },
        "00080056": {
            "vr": "CS",
            "Value": [ "ONLINE" ]
        },
        "00080061": {
            "vr": "CS",
            "Value": [
                "CT",
                "PET"
            ]
        },
        "00080090": {
            "vr": "PN",
            "Value": [
              {
                "Alphabetic": "^Bob^^Dr."
              }
            ]
        },
        "00081190": {
            "vr": "UR",
            "Value": [ "http://wado.nema.org/studies/
            1.2.392.200036.9116.2.2.2.1762893313.1029997326.945873" ]
        },
        "00090010": {
            "vr": "LO",
            "Value": [ "Vendor A" ]
        },
        "00091002": {
            "vr": "UN",
            "Value": [ "z0x9c8v7" ]
        },
        "00100010": {
            "vr": "PN",
            "Value": [
              {
                "Alphabetic": "Wang^XiaoDong",
                "Ideographic": "王^小東"
              }
            ]
        },
        "00100020": {
            "vr": "LO",
            "Value": [ "12345" ]
        },
        "00100021": {
            "vr": "LO",
            "Value": [ "Hospital A" ]
        },
        "00100030": {
            "vr": "DT",
            "Value": [ "19670701" ]
        },
        "00100040": {
            "vr": "CS",
            "Value": [ "M" ]
        },
        "00101002": {
            "vr": "SQ",
            "Value": [
                {
                    "00100020": {
                        "vr": "LO",
                        "Value": [ "54321" ]
                    },
                    "00100021": {
                        "vr": "LO",
                        "Value": [ "Hospital B" ]
                    }
                },
                {
                    "00100020": {
                        "vr": "LO",
                        "Value": [ "24680" ]
                    },
                    "00100021": {
                        "vr": "LO",
                        "Value": [ "Hospital C" ]
                    }
                }
            ]
        },
        "0020000D": {
            "vr": "UI",
            "Value": [ "1.2.392.200036.9116.2.2.2.1762893313.1029997326.945873" ]
        },
        "00200010": {
            "vr": "SH",
            "Value": [ "11235813" ]
        },
        "00201206": {
            "vr": "IS",
            "Value": [ 4 ]
        },
        "00201208": {
            "vr": "IS",
            "Value": [ 942 ]
        }
    },
    {   // Result 2
        "00080005": {
            "vr": "CS",
            "Value": [ "ISO_IR192" ]
        },
        "00080020": {
            "vr": "DT",
            "Value": [ "20130309" ]
        },
        "00080030": {
            "vr": "TM",
            "Value": [ "111900.0000" ]
        },
        "00080050": {
            "vr": "SH",
            "Value": [ "11235821" ]
        },
        "00080056": {
            "vr": "CS",
            "Value": [ "ONLINE" ]
        },
        "00080061": {
            "vr": "CS",
            "Value": [
                "CT",
                "PET"
            ]
        },
        "00080090": {
            "vr": "PN",
            "Value": [
              {
                "Alphabetic": "^Bob^^Dr." 
              }
            ]
        },
        "00081190": {
            "vr": "UR",
            "Value": [ "http://wado.nema.org/studies/
            1.2.392.200036.9116.2.2.2.2162893313.1029997326.945876" ]
        },
        "00090010": {
            "vr": "LO",
            "Value": [ "Vendor A" ]
        },
        "00091002": {
            "vr": "UN",
            "Value": [ "z0x9c8v7" ]
        },
        "00100010": {
            "vr": "PN",
            "Value": [
              {
                "Alphabetic": "Wang^XiaoDong",
                "Ideographic": "王^小東" 
              }
            ]
        },
        "00100020": {
            "vr": "LO",
            "Value": [ "12345" ]
        },
        "00100021": {
            "vr": "LO",
            "Value": [ "Hospital A" ]
        },
        "00100030": {
            "vr": "DT",
            "Value": [ "19670701" ]
        },
        "00100040": {
            "vr": "CS",
            "Value": [ "M" ]
        },
        "00101002": {
            "vr": "SQ",
            "Value": [
                {
                    "00100020": {
                        "vr": "LO",
                        "Value": [ "54321" ]
                    },
                    "00100021": {
                        "vr": "LO",
                        "Value": [ "Hospital B" ]
                    }
                },
                {
                    "00100020": {
                        "vr": "LO",
                        "Value": [ "24680" ]
                    },
                    "00100021": {
                        "vr": "LO",
                        "Value": [ "Hospital C" ]
                    }
                }
            ]
        },
        "0020000D": {
            "vr": "UI",
            "Value": [ "1.2.392.200036.9116.2.2.2.2162893313.1029997326.945876" ]
        },
        "00200010": {
            "vr": "SH",
            "Value": [ "11235821" ]
        },
        "00201206": {
            "vr": "IS",
            "Value": [ 5 ]
        },
        "00201208": {
            "vr": "IS",
            "Value": [ 1123 ]
        }
    }
]
]]></programlisting>
    </section>
    <section label="F.5" status="2" xml:id="sect_F.5">
      <title>References</title>
      <para xml:id="para_b89633c6-4bb8-43e8-ab01-227cddd84635">IETF RFC 4627 <link xl:href="http://www.ietf.org/rfc/rfc4627.txt"/> (Normative JSON definition)</para>
      <para xml:id="para_444250d6-6dc4-4585-b6e5-1b20c03a78b5">JSON. <link xl:href="http://www.json.org/"/> (Informative)</para>
      <para xml:id="para_ad550f5f-0657-496a-b495-f6a8545004d0">Wikipedia, definition of JSON. <link xl:href="http://en.wikipedia.org/wiki/JSON"/> (Informative)</para>
      <para xml:id="para_c021ea41-b550-41f6-942f-41b75abc7324">JSON in FHIR. <link xl:href="http://www.hl7.org/implement/standards/fhir/formats.htm#json"/> (Informative)</para>
    </section>
  </chapter>
  <chapter label="G" status="1" xml:id="chapter_G">
    <title>WADL JSON Representation</title>
    <section label="G.1" status="2" xml:id="sect_G.1">
      <title>Introduction</title>
      <para xml:id="para_66f82889-fa2d-4e2e-a93c-5ce4c559746e">While the WADL specification only specifies an XML encoding for the WADL payload, the data structure can easily be represented using JSON. Additionally, conversion from XML to JSON and vice-versa can be done in a lossless manner.</para>
    </section>
    <section label="G.2" status="2" xml:id="sect_G.2">
      <title>XML Elements</title>
      <para xml:id="para_b2792dfc-6bf0-4ec6-b8ba-7ee45a1618ba">The JSON encoding of WADL XML elements depends on whether the element is:</para>
      <itemizedlist>
        <listitem>
          <para xml:id="para_408b6a02-6be6-41e8-9f6f-b134f0b8c654">a "doc" element</para>
        </listitem>
        <listitem>
          <para xml:id="para_70f9ecec-7326-454c-8539-47373aff441d">an element that is unique within a particular parent element (e.g., "request")</para>
        </listitem>
        <listitem>
          <para xml:id="para_a1f8828a-2d92-48e5-bf6d-4012a8dcfcee">an element that can be repeated within a particular parent element (e.g., "param")</para>
        </listitem>
      </itemizedlist>
      <section label="G.2.1" status="3" xml:id="sect_G.2.1">
        <title>Doc Elements</title>
        <para xml:id="para_944a7f1a-d656-42eb-be06-702a568beeb7">A "doc" element is represented as an array of objects, where each object may contain:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_88633bb5-6c76-472a-b833-9601c20a8a00">a "@xml:lang" string</para>
          </listitem>
          <listitem>
            <para xml:id="para_3aaa2559-f197-45c5-bc8a-b37dd86f7710">a "@title" string</para>
          </listitem>
          <listitem>
            <para xml:id="para_c99e0512-5a9c-427e-8e3d-e2a488c1555b">a "value" string</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_779b37ec-324b-4b93-924e-2a4214dbb3b3">Example:</para>
        <programlisting><![CDATA["doc": [ 
		{
			"@xml:lang": "en",
			"value": "Granular cell tumor"
		},
		{
			"@xml:lang": "ja",
			"value": "顆粒細胞腫"
		},
		{
			"@xml:lang": "fr",
			"value": "Tumeur à cellules granuleuses"
		}
]
]]></programlisting>
      </section>
      <section label="G.2.2" status="3" xml:id="sect_G.2.2">
        <title>Unique Elements</title>
        <para xml:id="para_7bf828ee-cf08-4171-8a1e-10e330c946e5">All unique WADL XML elements are represented as an object whose name is the name of the XML element and where each member may contain:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_e02e3b06-ae1a-4d59-9e68-6dd0b2a8f328">a "@{attribute}" string for each XML attribute of the name {attribute}</para>
          </listitem>
          <listitem>
            <para xml:id="para_510cdf0d-0f71-45a4-b4c4-9cc1c3c5bdc3">a child object for each child element that must be unique</para>
          </listitem>
          <listitem>
            <para xml:id="para_5ebadd5f-8d8d-4b15-a0e1-92cb12a99025">a child array for each child element that may not be unique</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_c4f1f800-3d1e-4215-838f-92132b8d1f94">Example:</para>
        <programlisting><![CDATA["request": {
			"param": [ ... ],
			"representation": [ ... ]
}
]]></programlisting>
      </section>
      <section label="G.2.3" status="3" xml:id="sect_G.2.3">
        <title>Repeatable Elements</title>
        <para xml:id="para_aeb7fe6e-fd23-4dcc-ac7b-9787e8015c07">All repeatable WADL XML elements are represented as an array of objects whose name is the name of the XML element and where each may contain:</para>
        <itemizedlist>
          <listitem>
            <para xml:id="para_81e48a34-3813-4f7a-9a7f-a0c0fc46fab0">a "@{attribute}" string for each XML attribute of the name {attribute}</para>
          </listitem>
          <listitem>
            <para xml:id="para_5b1a4092-7455-4a73-bc28-10d711b9158c">a child object for each child element that must be unique</para>
          </listitem>
          <listitem>
            <para xml:id="para_9052a900-6f5a-42fc-a72e-d91c852711a0">a child array for each child element that may not be unique</para>
          </listitem>
        </itemizedlist>
        <para xml:id="para_047c0fae-697b-4956-b3e0-d239a372b80c">Example:</para>
        <programlisting><![CDATA["param": [ 
		{
			"@name": "Accept",
			"@style": "header"
		},
		{
			"@name": "Cache-control",
			"@style": "header"
		}
	]
]]></programlisting>
      </section>
    </section>
  </chapter>
</book>
